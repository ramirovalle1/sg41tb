{% load sga_extras %}
<head>
    <meta charset="utf-8">
    <title>{% block pagetitle %}{{ title }}{% endblock %}</title>
     <link rel="stylesheet" href="/static/css/smoke.css" type="text/css" media="screen" />
    <script src="/static/js/smoke.min.js" type="text/javascript"></script>

    <link href="/static/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet"/>
    <link href='/static/css/font-awesome.css' rel='stylesheet'/>

    <link href="/static/css/stylesbs.css" rel='stylesheet'/>
    <link href="/static/css/datepicker.css" rel='stylesheet'/>
    <link href="/static/css/bootstrap-modal.css" rel='stylesheet'/>

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="shortcut icon" href="/static/images/itb/favicon.ico">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bs/bootstrap.min.js"></script>

    <script src="/static/js/jquery.blockUI.js"></script>
    <script src="/static/js/jquery.maskedinput.min.js"></script>
    <script src="/static/js/bootstrap-datepicker.js"></script>
    <script src="/static/js/bootstrap-modal.js"></script>
    <script src="/static/js/bootstrap-modalmanager.js"></script>
    <script src="/static/js/big.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<style type="text/css">
    body {background-image: url(/static/images/fondo-itb.png)}
</style>
<script src="https://cdn.paymentez.com/checkout/1.0.1/paymentez-checkout.min.js"></script>
{% load sga_extras %}
<script type="text/javascript">

     $(function() {
         {% if bloqueo_pago_online %}
            Swal.fire({
                title: 'Acceso denegado!',
                text: 'No puede hacer uso del pago en línea de forma permanente. Cualquier duda consultar con el departamento de Asuntos Estudiantiles.',
                icon: 'error'
            }).then((result) => {
                if (result.isConfirmed || result.dismiss === Swal.DismissReason.backdrop) {
                    location.href = '/';
                }
            })
         {% endif %}
         {% if fraudes %}
                var html = '<strong style="text-align: left">Para acceder al módulo debe realizar las siguientes acciones:</strong>' +
                           '<table class="table mt-3">' +
                           '<tr>' +
                           '<th style="text-align:left;">Acción</th>' +
                           '<th style="text-align:left;">Descripción</th>' +
                           '<th style="text-align:center;">Valor</th>' +
                           '</tr>';
                {% for fraude in fraudes %}
                    html += '<tr>';
                    html += '<td style="text-align:left;">{{ fraude.accion }}</td>';
                    html += '<td style="text-align:left;">{{ fraude.descripcion|safe }}</td>';
                    {% if fraude.valor %}
                        html += '<td style="text-align:right;">${{ fraude.valor }}</td>';
                    {% else %}
                        html += '<td style="text-align:center;"><a href="#" onclick="generarEspecieFraude(`{{ fraude.fraude_id }}`)" class="btn btn-primary">Generar</a></td>';
                    {% endif %}
                    html += '</tr>'
                {% endfor %}

                html += '</table>';
                html += '<p style="font-size: 12px; color:red">Los pagos deben ser realizados de forma presencial o vía transferencia bancaria.</p>'

                Swal.fire({
                    title: 'Acceso denegado!',
                    text: '',
                    html: html,
                    icon: 'error',
                    width: '800px'
                }).then((result) => {
                        if (result.isConfirmed || result.dismiss === Swal.DismissReason.backdrop) {
                            location.href = '/';
                        }
                })

                 generarEspecieFraude = (fraude) => {
                     Swal.fire({
                        title: "Desea continuar?",
                        text: "Generará una especie solicitando acceso al pago en línea.",
                        icon: "info",
                        showCancelButton: true,
                        confirmButtonColor: "#3085d6",
                        cancelButtonColor: "#d33",
                        confirmButtonText: "Generar"
                     }).then((result) => {
                         if (result.isConfirmed) {
                             $.post("/online", {action:'generar_especie_fraude', id: {{ inscripcion.id }}, 'fraude': fraude}, function(data) {
                                 if (data.result=="ok") {
                                     Swal.fire("Solicitud generada", "Puede ver los detalles desde el módulo de Bandeja de atención.", "info").then(function() {
                                         location.href = '/solicitudonline?action=verlibres'
                                      })
                                 }else{
                                     Swal.fire("Error", data.mensaje, "error").then(function() {
                                         location.href = '/'
                                     })
                                 }
                              }, "json");
                         } else if (result.isDismissed) {
                            location.reload();
                         }
                     });
                 }
            {% endif %}

         {% if not aceptapagar %}
            $("#modal_aceptacionpagoenlinea").modal({width: '1000px', backdrop: 'static'});
            $("#modal_aceptacionpagoenlinea").modal("show");
         {% endif %}

         $(".aceptapagoenlinea").click(function(){
            $("#modal_aceptacionpagoenlinea").modal("hide");
            $.post("/online", {action:'aceptapagoenlinea', id: {{ inscripcion.id }}}, function(data) {
                if (data.result=="ok") {
                    location.reload();
                }else{
                     smoke.alert("Ocurrio un error " + data.error )
                }

            }, "json");
         });

         $(".saliraceptapagoenlinea").click(function(){
            $("#modal_aceptacionpagoenlinea").modal("hide");
            location.href="/";
         });

        diferir =1;
          var numeros1="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        function solo_numeros(texto){
           var num = 0;
           for(i=0; i<texto.length; i++){
              if (numeros1.indexOf(texto.charAt(i),0)!=-1){
                  num = num +1;
              }
           }
           return num;
        }
         var caracter=".@";

        function tiene_caracter(texto){
           var c = 0;
           for(i=0; i<texto.length; i++){

              if (caracter.indexOf(texto.charAt(i),0)!=-1){
                 c = c+1;
    {#             return c;#}
              }
           }
           return c;
        }
        var letras="ABCDEFGHIJKLMNÑOPQRSTUVWXYZ abcdefghijklmnñopqrstuvwxyz";
        function solo_letras(texto){
            var tex = 0;
            for(i=0; i<texto.length; i++){
                if (letras.indexOf(texto.charAt(i),0)!=-1){
                  tex = tex + 1;
                }
            }
            return tex;
        }
        var letrasnum="ABCDEFGHIJKLMNÑOPQRSTUVWXYZ abcdefghijklmnñopqrstuvwxyz0123456789.-#";
        function solo_letrasnum(texto){
            var tex = 0;
            for(i=0; i<texto.length; i++){
                if (letrasnum.indexOf(texto.charAt(i),0)!=-1){
                  tex = tex + 1;
                }
            }
            return tex;
        }
        $("#facturanombre").blur(function(){
           var nom = $("#facturanombre").val();
           if(nom.length != solo_letras(nom)){
                $("#facturanombre").val("");
                smoke.alert("Ingrese Solo Letras");

           }
           else{
                $($("#facturanombre").get(0).parentNode).find(".help-text").html("");
           }
        });
         {# var emoji = "[\uD800-\uDFFF]|[\u2600-\u27BF]|[\uD83C][\uDC00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g; #}
        $("#facturadireccion").blur(function(){
            var dire = $("#facturadireccion").val();
            if(dire.length != solo_letrasnum(dire)){
                $("#facturadireccion").val("");
                smoke.alert("Ingrese la dirección correctamente. Caracteres Válidos . - #");
            }
            else{
                $($("#facturadireccion").get(0).parentNode).find(".help-text").html("");
                 {# $("#facturadireccion").blur(function(){# } #}
                {# if(emoji.test(dire)){ #}
                {#      $("#facturadireccion").val("");#}
                {#    smoke.alert("No se permiten emojis en este campo"); #}
                {# } #}
                {# else { #}
                {#  $($("#facturadireccion").get(0).parentNode).find(".help-text").html("");#}
                {# } #}
            }
        });
    {# VALIDAR NOMBRE#}
        $("#facturanombre").keyup(function(e){
           var nom = $("#facturanombre").val();
           if(e.key.length != solo_letras(e.key)){
                $("#facturanombre").val(nom.replace(e.key, ""));
                smoke.alert("Ingrese Solo Letras");
           }
           else{
                $($("#facturanombre").get(0).parentNode).find(".help-text").html("");
           }
        });
    {#VALIDACION DIRECCION#}
        $("#facturadireccion").keyup(function(e){
            var dire = $("#facturadireccion").val();
            if(e.key.length != solo_letrasnum(e.key)){
                $("#facturadireccion").val(dire.replace(e.key, ""));
                smoke.alert("Ingrese la dirección correctamente. Caracteres Válidos . - # ");
            }
            else{
                $($("#facturadireccion").get(0).parentNode).find(".help-text").html("");
                 {# $("#facturadireccion").blur(function(){# } #}
                {# if(emoji.test(dire)){ #}
                {#      $("#facturadireccion").val("");#}
                {#    smoke.alert("No se permiten emojis en este campo"); #}
                {# } #}
                {# else { #}
                {#  $($("#facturadireccion").get(0).parentNode).find(".help-text").html("");#}
                {# } #}
            }
        });
    {#VALIDA RUC#}
         $("#facturaruc").keyup(function(e){
             var ruc = $(this).val();
             var p =solo_numeros(ruc);
             if (p != ruc.length) {
                $("#facturaruc").val(ruc.replace(e.key,""));
                smoke.alert('Ingrese cédula correctamente "Solo numeros"');
             }
         });
    {# VALIDA TELEFONO#}
        $("#facturatelefono").keyup(function(e){
            var tel = $(this).val();
            var t= solo_numerotel(tel);
            if(t!= tel.length){
               $("#facturatelefono").val(tel.replace(e.key,""));
               smoke.alert("Ingrese solo numeros");
            }
            else{
                $($("#facturatelefono").get(0).parentNode).find(".help-text").html("");
            }
        });
          $("#facturaruc").change();
         $("#facturacorreo").change(function(){
                var v = $("#facturacorreo").val();
                var p = tiene_caracter(v);

                if (p < 2)
                {
                  smoke.alert("Ingrese Correo correctamente");
                  $("#facturacorreo").focus();
                }
                else{
                    $($("#facturacorreo").get(0).parentNode).find(".help-text").html("");
                }
          });
         $(".selectorrubro").attr('checked',false);
        $(".btnpagar").click(function(){
            {% if fraudes or bloqueo_pago_online %}
                swal("Accesso denegado", "No puede hacer uso del pago en linea", 'error').then(() => {
                    location.reload()
                })
            {% else %}
                var bander = 0;
                var porpagarval = parseFloat($("#porpagar").val().split('$')[1]);
                if ($("#facturanombre").val() != '' &&  $("#facturadireccion").val() != '' && $("#facturatelefono").val() != '' && $("#facturaruc").val() != '' && $("#facturacorreo").val() != '' && porpagarval != parseFloat(0.00)){
                    var cantnumruc = parseInt($('#facturaruc').val().length) - parseInt(solo_numeros($('#facturaruc').val()));
                    if ($('#facturaruc').val().length < 5 || cantnumruc > 3 || $('#facturanombre').val().length < 2 || $('#facturadireccion').val().length < 2 || $('#facturacorreo').val().length < 8) {
                        if(cantnumruc > 3 )
                            Swal.fire("Alerta","Demasiados caracteres especiales en el RUC/CEDULA", "warning");
                        else
                            Swal.fire("Alerta","Faltan datos de factura por llenar", "warning");
                        bander = 1
                    }
                    var dire = $("#facturadireccion").val();
                    if(dire.length != solo_letrasnum(dire)){
                        Swal.fire("Alerta", "INGRESE LA  DIRECCIÓN CORRECTAMENTE, NO SE PERMITEN CARACTERES ESPECIALES", "warning");
                        bander =1
                    }
                    if(bander == 0){
                     $("#content").hide();
                     var seleccionados = $(".selectorrubro:checked");
                                var ids = '';
                                seleccionados.each(function() {
                                    if (ids.length>0) {
                                        ids += ",";
                                    }
                                    ids += $(this).attr('rid');
                                });
    
                    smoke.confirm("Desea Diferir su pago", function(e){
                        if (e){
                            smoke.confirm("SELECCIONE UNA OPCION", function(e){
                            if (e){
                                    diferir=2;
    
                                    $.get("/online",{"action": "terminos",'ids':ids,'ruc': $("#facturaruc").val(),
                                                                    'nombre': $("#facturanombre").val(),
                                                                    'direccion': $("#facturadireccion").val(),
                                                                    'telefono': $("#facturatelefono").val(),
                                                                    'correo': $("#facturacorreo").val()},function(data) {
                                            if (data =='2'){
                                                location.href="/online?info=OCURRIO UN ERROR.. INTENTE DE NUEVO";
                                            }else{
                                                $("#modal_pagos .modal-body").html(data);
                                                $("#modal_pagos #paneltitle1").html("T&Eacute;RMINOS Y CONDICIONES");
                                                $("#modal_pagos").modal({"backdrop":"static", keyboard: false, width: "400px", height: "70px" });
                                               $("#modal_pagos").modal("show");
                                            }
                                           }, "html");
                                     return false;
                                }else{
                                    diferir=3;
                                    $.get("/online",{"action": "terminos",'ids':ids,'ruc': $("#facturaruc").val(),
                                                                    'nombre': $("#facturanombre").val(),
                                                                    'direccion': $("#facturadireccion").val(),
                                                                    'telefono': $("#facturatelefono").val(),
                                                                    'correo': $("#facturacorreo").val()},function(data) {
                                            if (data =='2'){
                                                location.href="/online?info=OCURRIO UN ERROR.. INTENTE DE NUEVO";
                                            }else{
                                                $("#modal_pagos .modal-body").html(data);
                                                $("#modal_pagos #paneltitle1").html("T&Eacute;RMINOS Y CONDICIONES");
                                                $("#modal_pagos").modal({"backdrop":"static", keyboard: false, width: "400px", height: "50px" });
                                               $("#modal_pagos").modal("show");
                                            }
                                           }, "html");
                                     return false;
                                }
                                }, {
                                ok: "CON INTERESES ",
                                cancel: "SIN INTERESES ",
                                classname: "custom-class",
                                reverseButtons: true
                            });
    
    
                            }else{
                             $.get("/online",{"action": "terminos",'ids':ids,'ruc': $("#facturaruc").val(),
                                                                    'nombre': $("#facturanombre").val(),
                                                                    'direccion': $("#facturadireccion").val(),
                                                                    'telefono': $("#facturatelefono").val(),
                                                                    'correo': $("#facturacorreo").val()},function(data) {
                                            if (data =='2'){
                                                location.href="/online?info=OCURRIO UN ERROR.. INTENTE DE NUEVO";
                                            }else{
                                                $("#modal_pagos .modal-body").html(data);
                                                $("#modal_pagos #paneltitle1").html("T&Eacute;RMINOS Y CONDICIONES");
                                                $("#modal_pagos").modal({"backdrop":"static", keyboard: false, width: "500px", height: "40px" });
                                               $("#modal_pagos").modal("show");
                                            }
    
                                   }, "html");
                             return false;
                            }
                            }, {
                            ok: "Si",
                            cancel: "No",
                            classname: "custom-class",
                            reverseButtons: true
                        });
                }
                    {#else{#}
                    {#    Swal.fire('Alerta',"INGRESAR LA INFORMACION CORRECTAMENTE",'warning');#}
                    {# }#}
                }
                else{
                   Swal.fire('Alerta',"INGRESE TODOS LOS DATOS",'warning');
                }
            {% endif %}



        });

         serverdate=new Date({{ currenttime.year }},{{ currenttime.month }}-1,{{ currenttime.day }}, {{ currenttime.hour }},{{ currenttime.minute }},{{ currenttime.second }},0);
            clientdate=new Date();

            function showTime()
            {
                var today=new Date();
                var timediff = today - clientdate;

                var renderdate = new Date(serverdate.getTime() + timediff);

                var h=renderdate.getHours();
                var mer = " AM";
                if (h>12) {
                    mer = " PM";
                    h -= 12;
                }
                var m=renderdate.getMinutes();
                var s=renderdate.getSeconds();

//                var ph = Math.floor(timediff/(1000*60*60));
//                timediff = timediff%(1000*60*60);
//                var pm = Math.floor(timediff/(1000*60));
//                timediff = timediff%(1000*60);
//                var ps = Math.floor(timediff/(1000));



// add a zero in front of numbers<10
                //h=checkTime(h);
                m=checkTime(m);
                s=checkTime(s);
                $("#clock").text(h+":"+m+mer);
            }
            function checkTime(i)
            {
                if (i<10)
                {
                    i="0" + i;
                }
                return i;
            }
            setInterval(showTime,15000);
            showTime();
         $("#facturanumero, #facturaruc, #facturanombre, #facturadireccion, #facturatelefono,#facturacorreo").addClass("input-block-level");
         contador = 0;

         chequeaCedula = function(){
            numero = $("#facturaruc").val();
            var suma = 0;
            var residuo = 0;
            var pri = false;
            var pub = false;
            var nat = false;
            var numeroProvincias = 24;
            var extranjero = 30;
            var modulo = 11;

            prov = parseInt(numero.substr(0,2));
            if (parseInt(prov)>numeroProvincias || parseInt(prov)<=0){
                if (parseInt(prov)!= extranjero){
                smoke.alert('El código de la provincia (dos primeros dígitos) es inválido');
                $("#facturaruc").val("");
                }
            }

            /* Aqui almacenamos los digitos de la cedula en variables. */
            d1 = numero.substr(0,1);
            d2 = numero.substr(1,1);
            d3 = numero.substr(2,1);
            d4 = numero.substr(3,1);
            d5 = numero.substr(4,1);
            d6 = numero.substr(5,1);
            d7 = numero.substr(6,1);
            d8 = numero.substr(7,1);
            d9 = numero.substr(8,1);
            d10 = numero.substr(9,1);

            /* El tercer digito es: */
            /* 9 para sociedades privadas y extranjeros */
            /* 6 para sociedades publicas */
            /* menor que 6 (0,1,2,3,4,5) para personas naturales */

            if (d3==7 || d3==8){
                smoke.alert('El tercer digito ingresado es invalido');
                $("#facturaruc").val("");
            }

            /* Solo para personas naturales (modulo 10) */
            if (d3 <= 6 && numero.length ==10){
                nat = true;
                p1 = d1 * 2; if (p1 >= 10) p1 -= 9;
                p2 = d2 * 1; if (p2 >= 10) p2 -= 9;
                p3 = d3 * 2; if (p3 >= 10) p3 -= 9;
                p4 = d4 * 1; if (p4 >= 10) p4 -= 9;
                p5 = d5 * 2; if (p5 >= 10) p5 -= 9;
                p6 = d6 * 1; if (p6 >= 10) p6 -= 9;
                p7 = d7 * 2; if (p7 >= 10) p7 -= 9;
                p8 = d8 * 1; if (p8 >= 10) p8 -= 9;
                p9 = d9 * 2; if (p9 >= 10) p9 -= 9;
                modulo = 10;
            }

            /* Solo para sociedades publicas (modulo 11) */
            /* Aqui el digito verficador esta en la posicion 9, en las otras 2 en la pos. 10 */
            else if(d3 == 6){
                pub = false;
                p1 = d1 * 3;
                p2 = d2 * 2;
                p3 = d3 * 7;
                p4 = d4 * 6;
                p5 = d5 * 5;
                p6 = d6 * 4;
                p7 = d7 * 3;
                p8 = d8 * 2;
                p9 = 0;
            }

            /* Solo para entidades privadas (modulo 11) */
            else if(d3 == 9) {
                pri = false;
                p1 = d1 * 4;
                p2 = d2 * 3;
                p3 = d3 * 2;
                p4 = d4 * 7;
                p5 = d5 * 6;
                p6 = d6 * 5;
                p7 = d7 * 4;
                p8 = d8 * 3;
                p9 = d9 * 2;
            }

            suma = p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8 + p9;
            residuo = suma % modulo;

            /* Si residuo=0, dig.ver.=0, caso contrario 10 - residuo*/
            digitoVerificador = residuo==0 ? 0: modulo - residuo;

            /* ahora comparamos el elemento de la posicion 10 con el dig. ver.*/
            if (pub==true){
                if (digitoVerificador != d9){
                    smoke.alert('El ruc de la empresa del sector publico es incorrecto.');
                    $("#facturaruc").val("");
                }
                /* El ruc de las empresas del sector publico terminan con 0001*/
                if ( numero.substr(9,4) != '0001' ){
                    smoke.alert('El ruc de la empresa del sector publico debe terminar con 0001');
                    $("#facturaruc").val("");
                }
            }

            else if(pri == true){
                if (digitoVerificador != d10){
                    smoke.alert('El ruc de la empresa del sector privado es incorrecto.');
                    $("#facturaruc").val("");
                }
                if ( numero.substr(10,3) != '001' ){
                    smoke.alert('El ruc de la empresa del sector privado debe terminar con 001');
                    $("#facturaruc").val("");
                }
            }

            else if(nat == true){
                if (digitoVerificador != d10){
                    smoke.alert('El numero de cedula de la persona natural es incorrecto.');
                    $("#facturaruc").val("");
                }
                if (numero.length >10 && numero.substr(10,3) != '001' ){
                    smoke.alert('El ruc de la persona natural debe terminar con 001');
                    $("#facturaruc").val("");
                }
            }
            return true;
        };
         {% if info %}
             smoke.alert("{{ info }}");
         {% endif %}

         var numerotel="0123456789";
        function solo_numerotel(texto){
           var num = 0;
           var tex = '';
           for(i=0; i<texto.length; i++){
              if (numerotel.indexOf(texto.charAt(i),0)!=-1){
                  num = num +1;
              }
           }
           return num;
        }

        $("#facturatelefono").blur(function(){
            var tel = $("#facturatelefono").val();
            if (tel.length != solo_numerotel(tel)){
                $("#facturatelefono").val('');
                smoke.alert('ingrese solo numeros')
            }
        });

        $("#facturaruc").blur(function(){
            var ruc = $(this).val();
            $("#facturaruc").val(ruc.replace(" ",""));
            if ($("#facturaruc").val().length < 10){
                if ($("#facturaruc").val().length <5){
                    smoke.alert("Por favor el campo cedula o ruc no cumple con la longitud establecida");
                    $(this).val("");
                }
            }else{
                chequeaCedula();
            }
          });

         $("#facturatelefono").blur(function(){
            var tel = $("#facturatelefono").val();
            if (tel.length != solo_numerotel(tel)){
                $("#facturatelefono").val('');
                smoke.alert('ingrese solo numeros')
            }
        });
         var valdescuenpromnivel = 0;
         var totalxpagar = 0;
         var countech = 0;
         var aplicadescuento = false;
         var idrubroece = 0;
         var idrubaplica = [];
         var arreglo = [];
         $(".selectorrubro").change(function() {
            $.ajaxSetup({async: false});
            $("#pvalpag").html('');
            var seleccionados = $(".selectorrubro:checked");
            arreglo = [];
            idrubaplica = [];
            var rid = $(this).attr("rid");
            var idname = "#"+$(this).attr("id");
            var num = $(this).attr("num");
            countech = 0;
            aplicadescuento = false;
            $.post("/online",{"action":"consulta_descuentocab", 'id':rid},function(data) {
                if(data.result=='si'){
                    $("#abonar").attr('disabled',true);
                }else{
                }
            },"json");

            seleccionados.each(function() {
                if ($("#abonar").is(':checked'))
                    $("#porpagar").attr('readonly',false);
                else
                    $("#porpagar").attr('readonly',true);
                arreglo.push($(this).attr('rid'));
            });
            contador =  arreglo.length ;

            if (parseInt(contador) > 0){
                $(".btnpagar").show();
            }else{
                $(".btnpagar").hide();
            }
            $("#cantidad").html("("+contador+")");
            $.post("/online",{action: 'validarfecha','check':$(this).is(':checked') ,'idrub':rid,'data': JSON.stringify(arreglo), id: {{ inscripcion.id }}}, function(data) {
                var seleccionados = $(".selectorrubro:checked");
                var suma = 0;
                valdescuenpromnivel = parseFloat(0);
                totalxpagar = parseFloat(0);
                if (data.result=='ok') {
                    selecfuncheck();
                }
                else {
                    if($(idname).is(':checked'))
                    {
                        $("#tdcancel"+$(idname).attr('rid')).html('$0.00');
                        $(idname).attr('checked',false);
                        smoke.alert("Debe escoger rubro con fecha de vencimiento menor");
                        contador =  arreglo.length  - 1;
                        $("#cantidad").html("("+contador+")");
                    }
                    else{

                        var validacion=false;
                        seleccionados.each(function() {
                            if(parseInt($(this).attr("num")) > num )
                            {
                                if($(this).attr("tipo") != "CONGRESO" )
                                {
                                    if($(this).attr("tipo") != "ESPECIE" )
                                    {
                                        $("#"+$(this).attr("id")).attr('checked',false);
                                        validacion = true;

                                    }
                                }
                            }
                        });
                        if(validacion)
                        {
                            smoke.alert("Se desmarcaron rubros con fecha de vencimiento mayor");
                        }
                        selecfuncheck();
                    }
                }

            }, "json");
        });
/////////////////////////////////FUNCION CHECK SELECCIONADOS /////////////////////////////////////////////////////////////////
         showWaiting = function(mensaje) {
            $("#txtmensaje").html(mensaje);
            $("#frmwaiting").modal({backdrop: 'static', keyboard: false});
            $("#frmwaiting").modal("show");
         };

         hideWaiting = function() {
           $("#frmwaiting").modal("hide");
         };
         selecfuncheck = function(){
            totalxpagar = parseFloat(0);
            var seleccionados = $(".selectorrubro:checked");
            idrubaplica = [];
            seleccionados.each(function() {
                if($(this).attr("aplicades") == 'True') {
                    idrubaplica.push($(this).attr('rid'));
                }
            });
            showWaiting("Calculando descuento, Espere unos segundos por favor...");
            $(".selectorrubro:checked").each(function() {
                var excede = 0;
                {#totalxpagar = parseFloat(0);#}
                var obje = this;
                $.post("/online",{action: 'descuentos','idrub':$(obje).attr("rid"),'data': JSON.stringify(idrubaplica),id: {{ inscripcion.id }}}, function(data) {

                    if(data.result=='ok'){
                            excede = $(obje).attr('deuda');
                            var tdcancel = $(obje).attr('deuda');
                            if(parseInt(data.porcedescuen) > 0)
                                $("#porcenval"+$(obje).attr('rid')).html(data.porcedescuen+'% descuento').addClass('label label-success');
                            {#$("#tddeuda" + $(obje).attr('rid')).html('$' + parseFloat($(obje).attr('deuda')).toFixed(2));#}
                            if ($(obje).attr("aplicades") == 'True'){
                                if(data.aplicanivcut){ {# este if es para q cambie el valor del rubro deuda cuando es por nivel o cuota #}
                                    {#$("#tddeuda" + $(obje).attr('rid')).html('$' + parseFloat($(obje).attr('rubadeuda')).toFixed(2));#}
                                    tdcancel =  parseFloat(data.valor);
                                    excede =  parseFloat($(obje).attr('rubadeuda')).toFixed(2) - parseFloat(data.valor);
                                }
                            }

                            if(excede>0)
                            {
                                $("#tdcancel" + $(obje).attr('rid')).html('$' + parseFloat(tdcancel).toFixed(2));
                            }else{
                                $(obje).attr('checked',false);
                                idrubroece = $(obje).attr('rid');
                                {#$("#tddeuda" + $(obje).attr('rid')).html('$' + parseFloat($(obje).attr('deuda')).toFixed(2));#}
                                $("#mensajeexced").html('<p>El rubro '+$(obje).attr('nombrerub')+' no se puede seleccionar el descuento excede el valor a cancelar</p>');
                                $(".selectorrubro").change();
                            }

                            totalxpagar += parseFloat(tdcancel);

                        }
                }, "json");


            });
            hideWaiting();
            $("#porpagar").val("$" + totalxpagar.toFixed(2));
            $(".selectorrubro:not(:checked)").each(function() {
                {#$("#tddeuda" + $(this).attr('rid')).html('$' + parseFloat($(this).attr('deuda')).toFixed(2));#}
                $("#tdcancel"+$(this).attr('rid')).html('$0.00');
                $("#porcenval"+$(this).attr('rid')).html('').removeClass('label label-success');
                totalxpagar += parseFloat($(this).attr('deuda'));
            });
            $("#etiatotal").html('$'+totalxpagar.toFixed(2));
        };
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
        var numerosabo="0123456789.";
        function solo_numerosabo(texto){
           var num = 0;
           for(i=0; i<texto.length; i++){
              if (numerosabo.indexOf(texto.charAt(i),0)!=-1){
                  num = num +1;
              }
           }
           return num;
        }
        $("#porpagar").blur(function(){
            $.ajaxSetup({async: false});
            $("#pvalpag").html('');
            var valpago = $("#porpagar").val();
            if(valpago.split('$').length > 1)
                valpago = valpago.split('$')[1];
            if(valpago != '') {
                if(valpago.length != solo_numerosabo(valpago)) {
                    $("#porpagar").val('$0.00');
                    $("#pvalpag").html('Debe ingresar solo numeros');
                }else{
                    var seleccionados = $(".selectorrubro:checked");
                    var descpagar = valpago;
                    var valorapagar = 0;
                    var rubrovalmin = 0;
                    var cont = 0;
                    countech = 0;
                    showWaiting("Calculando descuento, Espere unos segundos por favor...");
                    seleccionados.each(function() {
                        var tdcancel = 0;
                        totalxpagar = 0;
                        var objec = this;
                        $.post("/online",{action: 'abonarrubros','idrub':$(objec).attr("rid"),'data': JSON.stringify(idrubaplica), 'rubroselec': JSON.stringify(arreglo),  'valpago': valpago}, function(data) {
                            if(data.result=='ok'){
                                {#$("#tddeuda" + $(objec).attr('rid')).html('$' + parseFloat($(objec).attr('deuda')).toFixed(2));#}
                                $("#tdcancel"+$(objec).attr('rid')).html('$'+parseFloat(data.valor).toFixed(2));

                                tdcancel = parseFloat(data.valor).toFixed(2);
                                totalxpagar += parseFloat(tdcancel);

                                valorapagar = parseFloat(valorapagar) + parseFloat(tdcancel);

                                if(parseInt(seleccionados.length-1) > cont)
                                    rubrovalmin = parseFloat(rubrovalmin) + parseFloat(tdcancel);
                                cont = cont + 1;
                                if (parseFloat(descpagar ) > parseFloat(0)){

                                    if(parseFloat(descpagar) > parseFloat(tdcancel)){
                                        descpagar = descpagar - tdcancel;
                                    }else{
                                        tdcancel = descpagar;
                                        descpagar = descpagar - descpagar;
                                    }
                                    if(parseInt(data.porcedescuen) > 0 && parseFloat(data.valor).toFixed(2) == parseFloat(tdcancel).toFixed(2) )
                                        $("#porcenval"+$(objec).attr('rid')).html(data.porcedescuen+'% descuento').addClass('label label-success');
                                    else
                                        $("#porcenval"+$(objec).attr('rid')).html('').removeClass('label label-success');
                                    $("#tdcancel"+$(objec).attr('rid')).html('$'+parseFloat(tdcancel).toFixed(2));
                                }else{
                                    descpagar = descpagar - tdcancel;
                                    $("#tdcancel"+$(objec).attr('rid')).html('$0.00');
                                }

                            }
                        }, "json");


                    });

                    if(descpagar > 0 || descpagar < 0){
                        seleccionados.each(function() {
                            $("#tdcancel"+$(this).attr('rid')).html('$0.00');
                            $("#porcenval"+$(this).attr('rid')).html('').removeClass('label label-success');
                        });
                        $("#porpagar").val('$0.00');
                    }
                    if(descpagar > 0){
                        $("#pvalpag").html('El valor a cancelar debe ser menor  o igual '+valorapagar);
                    }else if (descpagar < 0){
                        var numselc = seleccionados.length-1;
                        $("#pvalpag").html('El valor a cancelar debe ser mayor  a '+rubrovalmin.toFixed(2));
                    }else {
                        if (valpago.split('.').length > 1)
                            $("#porpagar").val('$' + valpago);
                        else
                            $("#porpagar").val('$' + valpago + '.00');
                    }
                    hideWaiting();
                }
            }else{
                $("#porpagar").val('$0.00');
            }
        });
        $("#abonar").click(function(){
            if ($("#abonar").is(':checked')) {
                var seleccionados = $(".selectorrubro:checked");
                if(seleccionados.length > 0){

                    $("#porpagar").attr('readonly',false);
                    var numrubr = seleccionados.length - 1;
                    $("#pdescripabonar").html('El abono se hara en orden de fecha de vencimiento de menor a mayor').addClass('alert alert-info');
                }else{

                    $("#porpagar").attr('readonly',true);
                    $("#porpagar").val('$0.00');
                    $("#pdescripabonar").html('Seleccione los rubros<br/><br/>El abono se hara en orden de fecha de vencimiento de menor a mayor').addClass('alert alert-info');
                }
            }else{
                selecfuncheck();
                $("#porpagar").attr('readonly',true);
                $("#pdescripabonar").html('').removeClass('alert alert-info');
            }
        });
     });
</script>
<html>
<body data-spy="scroll" data-target=".subnav" data-offset="50">
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">
            <a class="brand" href="/"><img src='/static/images/itb/logobolivariano.png' alt=''/></a>
            <div class="pull-right hidden-phone hidden-tablet visible-desktop">
                <ul class='nav'>
                    <li><a href=""><i class="icon-user icon-white"></i>  {{ persona.nombre_completo_inverso }}</a></li>
                    <li><a href="" style="font-size: 20px"><i class="icon-shopping-cart icon-white"></i> Carrito <i id=cantidad>(0) </i></a></li>
                    <li><a href="/logout"  style="font-size: 20px"><i class="icon-off icon-white"></i> Salir</a></li>
                    <li class="divider-vertical"></li>
                    <li><a href="#" style="font-size: 20px;" id="clock"></a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

    <div class="row-fluid" style="margin-top: 80px" >
    <div id="content" style="background-image: url(/static/images/fondo-itb.png) ">
    <div class="span1"></div>
    <div class="span10" style="background: #fff;border-radius: 10px;border: 3px solid #999999">
        <div class='row-fluid'>
            <div class='span12' style="text-align: center;font-size: 18px;margin-top:20px;margin-bottom: 50px">
                <h1 >PAGO EN L&Iacute;NEA</h1>
                <b> {{ inscripcion }}</b><br><br>
                <b>Pagado </b> <a style="color: red;font-weight: bold">${{ inscripcion.total_pagado|floatformat:2  }}</a><br><br>
                <b>Por Pagar </b> <a style="color: red;font-weight: bold" id="etiatotal">
                        ${{ inscripcion.total_adeudacuoatadesc|floatformat:2  }}
                </a> <br><br>
                {% if plagio %}
                    <h2 ><b><a style="color: #0000ff;font-weight: bold"> ESTIMADO ESTUDIANTE UD. NO PUEDE USAR ESTA OPCI&Oacute;N</a></b><br>
                         <b><a style="color: #0000ff;font-weight: bold"> S&Iacute;RVASE USAR OTRO CANAL DE PAGO</a></b>
                    </h2>
                    <br><br>
                {% endif %}
            </div>
        </div>
         <div class='row-fluid' style="margin-left: 75px">
            <div class='span12'>
                <div class='span6' >
                    <div class='row-fluid'>
                        {% if not plagio %}
                            <div class="span6">
                                <b style="font-size: 18px">ABONAR</b> <input type="checkbox" id="abonar" style="height: 2.3em;width: 10%;cursor: pointer"><br>
                                <h3 id="pdescripabonar" style="text-align: justify"></h3>
                            </div>
                        {% endif %}
                        <div class="span6">
{#                            <a id="porpagar">$0.00</a>#}
                          <h2 style="text-align: right">Valor a Pagar
                              <input style="font-size: 30px;height: 1.75em;color: #08c" type="text" id="porpagar" value="$0.00" readonly/>
                              <p style="color: red;font-size: 16px" id="pvalpag"></p>
                          </h2>
                        </div>
                    </div>
                    <div class='row-fluid' >
                        <table class='table table-bordered table-striped' cellpadding="0" cellspacing="0">
                            <thead>
                            <tr>
                                <th colspan="5"  style="font-size:18px;font-weight: bold">Valores Pendientes de Pago </th>
                            </tr>
                            <tr>
                                <th></th>
                                <th  style="font-size:18px">Rubro</th>
                                <th  style="font-size:18px">Fecha</th>
                                <th style="font-size:18px">Por Pagar</th>
                                <th style="font-size:18px">A Cancelar</th>
            {#                    <th>Pagos</th>#}
                            </tr>
                            </thead>
                            <tbody>
                            {% for rubro in rubros %}
                                <tr>
                                    {% with valores=rubro|args:'None'|call:'aplicadescuento' %}
                                        <td width='20px'>
                                        {% if not rubro.es_notadebito %}
                                            {% if not plagio %}
                                                <input type="checkbox"  class="selectorrubro" tipo="{{ rubro.tipo }}"  num="{{ forloop.counter }}" id="check{{ forloop.counter }}" rid="{{ rubro.id }}"
                                                nombrerub="{{ rubro.nombre }}" deuda='{{ valores.0 }}' aplicades='{{ valores.1 }}' vencido="{{ valores.2 }}" rubadeuda="{{ rubro.adeudado }}"/>
                                            {% endif %}
                                        {% endif %}
                                        </td>
                                        <td style="font-size:18px">{{ rubro.nombre }} <span id="porcenval{{ rubro.id }}"></span></td>
                                        <td style="font-size:18px">
                                            {{ rubro.fechavence|date:"d-m-Y" }}
                                        </td>
                                        <td style="font-size:18px" id="tddeuda{{ rubro.id }}">
                                            ${{ rubro.adeudado|floatformat:2 }}
                                        </td>
                                        <td style="font-size:18px" id="tdcancel{{ rubro.id }}">0</td>
                                    {% endwith %}
                                </tr>
                            {% endfor %}

                            {% if not rubros %}
                                <tr>
                                    <td colspan="5">NO EXISTEN RUBROS</td>
                                </tr>
                            {% else %}
                                <tr>
                                <td colspan="5" id="mensajeexced" style="color: red;font-weight: bold"><p></p></td>
                                </tr>
                                {% if not plagio %}
                                    <tr>
                                    <td colspan="5" style="color: red;font-weight: bold"><p>Marque los valores que desee cancelar</p></td>
                                    </tr>
                                    <tr>
                                    <td class="btnpagar" colspan="5" style="text-align: right;display: none;" > <a class="btn btn-success ">Realizar Pago</a></td>

                                    </tr>
                                {% endif %}
                                <tr>
                                <td  colspan="5" style="text-align: right" > <a href="/" class="btn btn-danger ">Cancelar</a></td>
                                </tr>
                            {% endif %}
                            </tbody>

                        </table>
                    </div>
                </div>
                <div class='span5'>
                    <table class="table table-bordered table-striped table-condensed">
                        <thead>
                        <tr>
                            <th colspan="2"  style="font-size:18px">Datos Factura</th>
                        </tr>
                        </thead>
                        <tbody>
                           <tr>
                                <td  style="font-size:18px">RUC/C&eacute;dula</td>
                                <td  style="font-size:18px" ><input id="facturaruc" type='text' maxlength="20" value="{% if inscripcion.persona.cedula %}{{ inscripcion.persona.cedula }}{% else %}{{ insc }}{% endif %}"/><p class="help-text_fact"></p></td>

                            </tr>
                            <tr>
                                <td  style="font-size:18px">Nombre</td>
                                <td  style="font-size:18px"><input id="facturanombre" style="text-transform: uppercase;" maxlength="100" type='text' value="{{ inscripcion.persona.nombre_completo }}"/></td>
                            </tr>
                            <tr>
                                <td  style="font-size:18px">Direcci&oacute;n</td>
                                <td  style="font-size:18px"><input id="facturadireccion" style="text-transform: uppercase;" maxlength="100" type='text' value="{{ inscripcion.persona.direccion }}"/></td>
                            </tr>
                            <tr>
                                <td  style="font-size:18px">Tel&eacute;fono</td>
                                <td  style="font-size:18px"><input id="facturatelefono" style="text-transform: uppercase;"maxlength="50" type='text' value="{{ inscripcion.persona.telefono }}"/></td>
                            </tr>
                            <tr>
                                <td  style="font-size:18px">Correo</td>
                                <td  style="font-size:18px"><input id="facturacorreo" style="text-transform: none;" type='text' maxlength="100" value="{{ inscripcion.persona.email }}"/></td>
                            </tr>
                          <tr>
                            <td colspan="4" style="color: red;font-weight: bold"><p>Escriba los datos de su factura</p></td>
                            </tr>

                       </tbody>
                    </table>
                </div>
            </div>
        </div> <br><br><br>
    </div>
    <div class="modal fade static" id="espera" style="display: none;"  >
    <div class="modal-header" style="background-color: red">
            <h3 class="paneltitle" style="text-align: center">ESPERE UN MOMENTO POR FAVOR</h3>
    </div>

    </div>


    </div>
    </div>
</div>

</body>
</html>
<div class="modal fade static" id="modal_pagos">
        <div class="row-fluid modal-header">
             <h4  id='paneltitle1'><i> </i></h4>
            <h5></h5>
        </div>
        <div class="modal-body" >

        </div>
        <div class="modal-footer">
            <div >
                <a style="float: right;display: none"  class="btn btn-warning js-paymentez-checkout">  <b> ACEPTAR </b></a>
                <a style="float: left" href="#" class="btn btn-danger  salirterminos">  <b> SALIR</b></a>

            </div>
        </div>
</div>


<div class="modal fade static" id="modal_terminosycondiciones">
        <div class="row-fluid modal-header">
             <h4  id='paneltitle1'><i> </i></h4>
            <h5></h5>
        </div>
        <div class="modal-body" >
            <div class="span12">
                <p>
                <b>T&eacute;rminos y condiciones de compra y pol&iacute;ticas de devoluci&oacute;n del Instituto Tecnol&oacute;gico Bolivariano.</b><br>

               <b style="color: red">I. CONDICIONES GENERALES APLICABLES AL PAGO EN L&Iacute;NEA.</b><br>

                1. El I.S.T Bolivariano de Tecnolog&iacute;a con domicilio en Pedro Carbo y V&iacute;ctor M. Rend&oacute;n, Guayaquil-Ecuador (en adelante tambi&eacute;n como “ITB“),<br>
                Ofrece servicios acad&eacute;micos:<br>
                (i) En las instalaciones del ITB, ubicadas en:
                Pedro Carbo y V&iacute;ctor M. Rend&oacute;n, Guayaquil-Ecuador, horario de atenci&oacute;n: lunes a viernes de 8:30 a 17:00 hrs.
                (ii)     A trav&eacute;s de Internet, en sga.itb.edu.ec<br>

                2. Al pagar directamente en ITB las transacciones y sus efectos jur&iacute;dicos, se regir&aacute;n por estos t&eacute;rminos y condiciones y por la legislaci&oacute;n vigente aplicable en la Rep&uacute;blica de Ecuador.<br>
                    De esta manera, cuando un cliente paga sus rubros acad&eacute;micos, se entender&aacute; que el cliente acepta los presentes t&eacute;rminos y condiciones y manifiesta su total conformidad con las pol&iacute;ticas definidas al efecto por ITB.<br>

                3. Por su parte, al pagar por Internet sus rubros acad&eacute;micos a trav&eacute;s del portal sga.itb.edu.ec, todas las transacciones y sus efectos jur&iacute;dicos, que se realicen en este, se regir&aacute;n por los t&eacute;rminos y condiciones particulares publicadas en cada uno de los Sitios Electr&oacute;nicos y por legislaci&oacute;n vigente aplicable en la Rep&uacute;blica de Ecuador. <br>
                    El ITB invita al p&uacute;blico a informarse sobre los t&eacute;rminos y condiciones de los Sitios Electr&oacute;nicos publicados en tales Sitios Electr&oacute;nicos.
                    <br>Los Sitios Electr&oacute;nicos tienen el derecho de cambiar sus t&eacute;rminos y condiciones, sin embargo, tales cambios s&oacute;lo se aplicar&aacute;n desde el momento en que sean publicados en los Sitios Electr&oacute;nicos y regir&aacute;n para las transacciones que se celebren con posterioridad a su publicaci&oacute;n, sin alterar los contratos celebrados con anterioridad.<br>
                    Los t&eacute;rminos y condiciones contenidos en los Sitios Electr&oacute;nicos se entender&aacute;n que forman parte de todos los actos y contratos que se ejecuten o celebren mediante los sistemas de oferta y comercializaci&oacute;n comprendidos en los Sitios Electr&oacute;nicos. De esta manera, cuando un cliente paga sus rubros acad&eacute;micos a trav&eacute;s del portal sga.itb.edu.ec, se entender&aacute; que el cliente acepta los t&eacute;rminos y condiciones de los Sitios Electr&oacute;nicos.<br>

                4. El ITB puede solicitar informaci&oacute;n personal a sus clientes. Toda la informaci&oacute;n que faciliten los clientes al momento de efectuar el pago deber&aacute; ser veraz. Por ello, el cliente garantiza la autenticidad de todos aquellos datos que comunique. De igual forma, ser&aacute; responsabilidad del cliente mantener toda la informaci&oacute;n facilitada al ITB permanentemente actualizada.<br>
                    El cliente ser&aacute; el &uacute;nico responsable de las manifestaciones falsas o inexactas que realice y de los perjuicios que cause al ITB o a terceros por la informaci&oacute;n que facilite. Si el ITB, o los Sitios Electr&oacute;nicos en su caso, no pueden verificar o comprobar la autenticidad de cualquier informaci&oacute;n que el cliente o usuario proporcione durante cualquier proceso de compra, <br>
                    inscripci&oacute;n, verificaci&oacute;n de autenticidad, entrega, pago, o cualquier otro proceso, o si no podemos verificar o autorizar la tarjeta de cr&eacute;dito o informaci&oacute;n de cuenta bancaria, entonces no podr&aacute; completarse la transacci&oacute;n.
                El cliente o usuario dispondr&aacute; en todo momento de los derechos de informaci&oacute;n y privacidad respecto del uso de los datos personales tal y como lo dictamina la ley.<br>

                <b style="color: red"> II. T&Eacute;RMINOS GENERALES APLICABLES A LOS PAGOS EN L&Iacute;NEA Y POL&Iacute;TICAS DE DEVOLUCI&Oacute;N.</b><br>

                El CLIENTE acepta irrevocablemente las siguientes condiciones generales:<br>

                • Primero: EL CLIENTE es el usuario, previamente registrado en el sistema web sga.itb.edu.ec, quien acepta haber ingresado toda la informaci&oacute;n real personal requerida, y es &eacute;l &uacute;nico y exclusivamente responsable por la informaci&oacute;n registrada. Quien suministre informaci&oacute;n o use su(s) entrada(s) para falsificaciones o adulteraciones ser&aacute; responsable ante las entidades legales respectivas.<br>

                • Segundo: El CLIENTE reconoce que la realizaci&oacute;n y organizaci&oacute;n de horarios, condiciones de seguridad, ubicaciones, realizaci&oacute;n, organizaci&oacute;n; esta responsabilidad exclusivamente del ITB, quien se encuentra identificado en la entrada.<br>

                • Tercero: Los pagos realizados mediante el sitio web sga.itb.edu.ec est&aacute;n sujetos a la verificaci&oacute;n y aceptaci&oacute;n de la tarjeta d&eacute;bito o cr&eacute;dito por parte del BANCO o entidad financiera en el transcurso de 24 horas después de haber efectuado el pago.<br>

                • Cuarto: El CLIENTE acepta y conoce el costo adicional con respecto a la politicas del emisor de la tarjeta <br>

                El I.S.T Bolivariano., no est&aacute; obligado a hacer devoluciones de dinero por errores de fechas, horas, valores registrados, nombres incorrectos, o en general causas ajenas a responsabilidades propias. Cabe recalcar que la instituci&oacute;n NO proceder&aacute; a realizar alguna devoluci&oacute;n una vez realizado el pago.
                De conformidad a la Ley Org&aacute;nica de R&eacute;gimen Tributario interno en su art. 56 No. 5, los servicios de educaci&oacute;n en todos los niveles se encuentran exentos de IVA.<br>

                </p>
            </div>
        </div>
        <div class="modal-footer">
            <div >
                <a style="float: left" href="#" class="btn btn-danger  salirterminosycondiciones">  <b> SALIR</b></a>

            </div>
        </div>
</div>



<div class="modal fade static" id="modal_verifi"   >
       <div class="modal-header">
            <h4  id='paneltitle1'><i style="text-align: center"> Favor Ingresar el c&oacute;digo que lleg&oacute; a su email, o SMS del Banco emisior de su tarjeta</i></h4>
       </div>

       <div class="modal-body " style="text-align: center">
            <input id='id_codigo' style="width: 40%;border-bottom: 3px;border-radius: 4px;text-align: center"> </input>
            <p class="help-text"> </p>
       </div>

       <div class="modal-footer">
            <a href="#" class="btn btn-enviar btn-success"> Verificar</a>
            <a href="#" class="btn btn-cerrar btn-warning">Salir</a>
       </div>
</div>
<div class="modal fade static" id="frmwaiting" style="border: 0px solid #ccc;padding: 0 1rem;margin: 1rem;top:30%;">
    <div style="display: flex;justify-content: center;align-items: center;">
        <h3><span id="txtmensaje" style="color:black;font-size: 1em;"></span></h3>
    </div>
    <div class="cls-spinner" style="margin-left: auto;margin-right: auto;top: 0%">
        <div class="cls-circle cls-spin"></div>
    </div>
</div>

{# modal aceptacion pago en linea #}
<div class="modal fade static" id="modal_aceptacionpagoenlinea">
    <div class="row-fluid modal-header">
         <h4  id='paneltitle1'><i>Estimado/a estudiante: </i></h4>
    </div>
    <div class="modal-body" >
        <div class="span12">
            <p>
            <b style="color: #0000ff">UD. EST&Aacute; ACCEDIENDO AL PAGO EN L&Iacute;NEA EN ITB. NOS PERMITIMOS RECORDALE LO SIGUIENTE:</b><br><br>
            En caso de que se detecte alg&uacute;n tipo de irregularidad a trav&eacute;s del presente pago, acepto que me atendr&eacute; a lo que disponga<br>
            el Consejo Acad&eacute;mico de la Instituci&oacute;n, tal y como lo contempla el reglamento de estudiantes en su art&iacute;tulo 25 <br>
            sobre faltas disciplinarias consideradas graves y para lo cual se tendr&aacute; en cuenta lo estipulado por el C&oacute;digo Integral Penal (COIP)<br>
            en su Art&iacute;culo 186 en el que se precisa el Defraude mediante el uso de tarjetas de cr&eacute;dito y/o d&eacute;bito o similares.<br>
            </p>
        </div>
    </div>
    <div class="modal-footer">
        <div >
            <a style="float: left" href="#" class="btn btn-success aceptapagoenlinea">  <b> He le&iacute;do y acepto lo presentado</b></a>
            <a style="float: left" href="#" class="btn btn-danger  saliraceptapagoenlinea">  <b> SALIR</b></a>
        </div>
    </div>
</div>

