{% extends "basenueva.html" %}
{% load sga_extras %}
{% block heading %}
<script src="../../static/sganuevo/src/plugins/apexcharts/apexcharts.min.js"></script>

<style>


.nav-pills .nav-link.active, .nav-pills .show > .nav-link {
  color: #fff;
  background-color:  #184679; }

.btn-primary {
  color: #fff;
  background-color: #184679;
  border-color: #184679;
}

.custom-control-input:checked ~ .custom-control-label::before {
  color: #fff;
  border-color:#184679;
  background-color: #184679; }

.custom-control-input:checked ~ .custom-control-label::before {
  color: #fff;
  border-color:#184679;
  background-color: #184679; }


.bootstrap-select .dropdown-menu li .dropdown-item.active:hover, .select2-container--default .select2-results__option[aria-selected=true] {
    background-color: #184679;
    color: #fff;
}

.select2-container--default .select2-selection--multiple .select2-selection__choice {
    background-color:#184679;
    color: #fff;
    border-color: #184679;
}

.bootstrap-select .dropdown-menu li .dropdown-item.active:hover,.select2-container--default .select2-results__option[aria-selected=true] {
    background-color: #184679;
    color: #fff
}

.select2-container--default .select2-results__option--highlighted[aria-selected] {
    background-color: #184679;
}





</style>

<script>



 $(function () {
     
     
       var pro_json_ratios=[];
       var seriesratiosmatriu=[];
       var seriesratiosnomatriu=[];
       var categoriaratios=[];

       var pro_json_ratiosasistencia=[];
       var seriesratiosmatriuasis=[];
       var seriesratiosasist=[];
       var categoriaratiosasistencia=[];
       
       var pro_json_ratiodeseracademico=[];
       var seriescantidadinscr=[];
       var seriescantidaretir=[];
       var categoriadeser=[];

       var pro_json_ratiodesergenro=[];
       var seriescantidadesegeneromas=[];
       var seriescantidadesegenerofemi=[];
       var categoriadesergenero=[];

       var pro_json_ratiodesergenroresumen=[];
       var seriescantidadesegeneroresumen=[];
       var categoriadesergeneroresumen=[];


       var pro_json_ratiodeseretnia=[];
       var seriescantidadeseetnia=[];
       var categoriadeseretnia=[];

       var pro_json_ratiodeseretniaresumen=[];
       var seriescantidadeseetniaresumen=[];
       var categoriadeseretniaresumen=[];
       
       var pro_json_ratiodeserestrato=[];
       var seriescantidadeseestrato=[];
       var categoriadeserestrato=[];
       
       var pro_json_ratiodeserestratoresumen=[];
       var seriescantidadeseestratoresumen=[];
       var categoriadeserestratoresumen=[];
     
       var chart="";
       var chart2="";
       var chart3="";
       var chartgenero="";
       var chartderesumen="";
       var chartdeetnia="";
       var chartderesumenetnia="";
       var chartdeestrato="";
       var chartderesumenestrato="";


        $( document ).ready(function() {
            
            
            $("#cmbanodeser").val('2012');

            $('#cmbanodeser').trigger('change.select2'); // Notify only Select2 of changes

            $("#cmbanodesergenero").val('2012');

            $('#cmbanodesergenero').trigger('change.select2'); // Notify only Select2 of changes

            $("#cmbanodeseretnia").val('2012');

            $('#cmbanodeseretnia').trigger('change.select2'); // Notify only Select2 of changes
            
            $("#cmbanodeserestracto").val('2012');

            $('#cmbanodeserestracto').trigger('change.select2'); // Notify only Select2 of changes
            
            {% for xlistamatricu in listamatricu  %}
                categoriaratios.push('{{ xlistamatricu.nombrenivel  }}');
            {% endfor %}
    
            {% for xlistamatricu in listamatricu  %}
                seriesratiosmatriu.push(parseInt('{{ xlistamatricu.cantidadmatriculado }}'));
                seriesratiosnomatriu.push(parseInt('{{ xlistamatricu.cantidadnomatriculado }}'));
            {% endfor %}
        
           pro_json_ratios.push({"label":categoriaratios,
                "data1":seriesratiosmatriu,"data2":seriesratiosnomatriu});
    
            var options = {
                      series: [{
                      name: 'Matriculado',
                      data: pro_json_ratios[0].data1,
    
    
                    }, {
                      name: 'No Matriculado',
                      data:  pro_json_ratios[0].data2,
    
    
    
                    }],
                      chart: {
                      type: 'bar',
                      height: 350,
                      stacked: true,
                          
                      toolbar: {
                        show: false
                      },
    
    
    
                      zoom: {
                        enabled: false
                      }
                    },
                    responsive: [{
                      breakpoint: 480,
                      options: {
                        legend: {
                          position: 'bottom',
                          offsetX: -10,
                          offsetY: 0
                        }
                      }
                    }],
                    plotOptions: {
                      bar: {
                        horizontal: false,
                        borderRadius: 10,
                        borderRadiusApplication: 'end', // 'around', 'end'
                        borderRadiusWhenStacked: 'last', // 'all', 'last'
                        dataLabels: {
                          total: {
                            enabled: true,
                            style: {
                              fontSize: '13px',
                              fontWeight: 900
                            }
                          }
                        }
                      },
                    },
                    xaxis: {
    
                      categories:pro_json_ratios[0].label,
                    },
                      
                    legend: {
                      position: 'right',
                      offsetY: 60
                    },
                    fill: {
                      opacity: 1
                    }
                    };
    
            chart = new ApexCharts(document.querySelector("#chartmatirunomatripornivel"), options);
            chart.render();


            ////// grafico asistencia de los matriculados //////

               {% for xlistamatricuasistencia in listamatricuasistencia  %}
                    categoriaratiosasistencia.push('{{ xlistamatricuasistencia.nombrenivel  }}');
               {% endfor %}

                {% for xlistamatricuasistencia in listamatricuasistencia  %}
                        seriesratiosmatriuasis.push(parseInt('{{ xlistamatricuasistencia.cantidadmatriculado }}'));
                        seriesratiosasist.push(parseInt('{{ xlistamatricuasistencia.cantidadasistencia }}'));

                {% endfor %}

                pro_json_ratiosasistencia.push({"label":categoriaratiosasistencia,
                     "data1":seriesratiosmatriuasis,"data2":seriesratiosasist
                   });

               var options2 = {
                  series: [{
                  name: 'Matriculados',
                  type: 'column',
                  data: pro_json_ratiosasistencia[0].data1
                }, {
                  name: 'Asistencia',
                  type: 'line',
                   data: pro_json_ratiosasistencia[0].data2
                }],
                  chart: {
                  height: 350,
                  type: 'line',
                  toolbar: {
                        show: false
                 },
                },
                stroke: {
                  width: [0, 2]
                },
                dataLabels: {
                  enabled: true,
                  enabledOnSeries: [1]
                },
                labels:  pro_json_ratiosasistencia[0].label,

                yaxis: [{
                  title: {
                    text: 'Matriculados',
                  },

                }, {
                  opposite: true,
                  title: {
                    text: 'Asistencia'
                  }
                }]
                };

                chart2 = new ApexCharts(document.querySelector("#chartmatriculadoasistencia"), options2);
                chart2.render();
                
                
                //// grafico desercion academica
        
        
                 {% for xlistdesecionprograma in listdesecionprograma  %}
                    categoriadeser.push('{{ xlistdesecionprograma.nombrecarrera  }}');
                 {% endfor %}
    
                 {% for xlistdesecionprograma in listdesecionprograma  %}
                            seriescantidadinscr.push(parseInt('{{ xlistdesecionprograma.cantidadinscritos }}'));
                            seriescantidaretir.push(parseInt('{{ xlistdesecionprograma.cantidadretiro }}'));
    
                 {% endfor %}
    
                 pro_json_ratiodeseracademico.push({"label":categoriadeser,
                     "data1":seriescantidadinscr,"data2":seriescantidaretir
                 });
        
                 var options3 = {
                      series: [{
                      name: 'Estudiantes (Inscritos)',
                      data: pro_json_ratiodeseracademico[0].data1
                    }, {
                      name: 'Retirados',
                      data: pro_json_ratiodeseracademico[0].data2
                    }],
                      chart: {
                      type: 'bar',
                      height: 350,
                      stacked: true,
                      stackType: '100%'
                    },
                    responsive: [{
                      breakpoint: 480,
                      options: {
                        legend: {
                          position: 'bottom',
                          offsetX: -10,
                          offsetY: 0
                        }
                      }
                    }], 
                    colors: [ '#008FFB','#E91E63', '#9C27B0','#F86624','#F9CE1D','#2B908F','#662E9B','#7D02EB','#546E7A'],
                    xaxis: {
                      categories: pro_json_ratiodeseracademico[0].label
                    },
                    fill: {
                      opacity: 1
                    },
                    legend: {
                      position: 'right',
                      offsetX: 0,
                      offsetY: 50
                    },
                    };
            
                    chart3 = new ApexCharts(document.querySelector("#chartdesercioncarrera"), options3);
                    chart3.render();

                    //// grafico desercion genero

                     {% for xlistdesecionporgenero in listdesecionporgenero  %}
                        categoriadesergenero.push('{{ xlistdesecionporgenero.nombrecarrera  }}');
                     {% endfor %}

                     {% for xlistdesecionporgenero in listdesecionporgenero  %}
                                seriescantidadesegeneromas.push(parseInt('{{ xlistdesecionporgenero.cantidadretiradomas }}'));
                                seriescantidadesegenerofemi.push(parseInt('{{ xlistdesecionporgenero.cantidadretiradofemi }}'));

                     {% endfor %}

                     pro_json_ratiodesergenro.push({"label":categoriadesergenero,
                         "data1":seriescantidadesegeneromas,"data2":seriescantidadesegenerofemi
                     });

                 var optionsdesgenero = {
                      series: [{
                      name: 'Masculino',
                      data: pro_json_ratiodesergenro[0].data1
                    }, {
                      name: 'Femenino',
                      data: pro_json_ratiodesergenro[0].data2
                    }],
                      chart: {
                      type: 'bar',
                      height: 350,
                      stacked: true,
                      stackType: '100%'
                    },
                    responsive: [{
                      breakpoint: 480,
                      options: {
                        legend: {
                          position: 'bottom',
                          offsetX: -10,
                          offsetY: 0
                        }
                      }
                    }],
                    colors: [ '#104194','#ff0080'],
                    xaxis: {
                      categories: pro_json_ratiodesergenro[0].label
                    },
                    fill: {
                      opacity: 1
                    },
                    legend: {
                      position: 'right',
                      offsetX: 0,
                      offsetY: 50
                    },
                    };

                    chartgenero = new ApexCharts(document.querySelector("#chartdeserciongenero"), optionsdesgenero);
                    chartgenero.render()



                    //// grafico resumen desercion genero


                    {% for xlistdesecionporgeneroresumen in listdesecionporgeneroresumen  %}

                            seriescantidadesegeneroresumen.push(parseInt('{{ xlistdesecionporgeneroresumen.cantidad  }}'));
                            categoriadesergeneroresumen.push('{{ xlistdesecionporgeneroresumen.genero  }}');

                    {% endfor %}


                     pro_json_ratiodesergenroresumen.push({"genero":categoriadesergeneroresumen,
                         "cantidad":seriescantidadesegeneroresumen
                     });

                     var options = {
                     series: pro_json_ratiodesergenroresumen[0].cantidad,
                      chart: {
                      width: 600,
                      type: 'pie',
                    },
                    labels:pro_json_ratiodesergenroresumen[0].genero,
                    colors: [ '#ff0080','#104194'],
                    responsive: [{
                      breakpoint: 480,
                      options: {
                        chart: {
                          width: 200
                        },
                        legend: {
                          position: 'bottom'
                        }
                      }
                    }]
                    };

                    chartderesumen = new ApexCharts(document.querySelector("#chartdeserciongeneroresumen"), options);
                    chartderesumen.render();


                    /// grafico por etnia

                    {% for xlistdesecionporetnia in listdesecionporetnia  %}

                            seriescantidadeseetnia.push(parseInt('{{ xlistdesecionporetnia.cantidad  }}'));
                            categoriadeseretnia.push('{{ xlistdesecionporetnia.raza  }}');

                    {% endfor %}

                     pro_json_ratiodeseretnia.push({"raza":categoriadeseretnia,
                         "cantidad":seriescantidadeseetnia
                     });

                     var optionsetnia = {
                     series: pro_json_ratiodeseretnia[0].cantidad,
                      chart: {
                          width: 700,
                      type: 'pie'
                    },
                    labels:pro_json_ratiodeseretnia[0].raza,
                    responsive: [{
                      breakpoint: 480,
                      options: {
                        chart: {
                          width: 200
                        },
                        legend: {
                          position: 'bottom'
                        }
                      }
                    }]
                    };

                    chartdeetnia = new ApexCharts(document.querySelector("#chartdesercionetnia"), optionsetnia);
                    chartdeetnia.render();



                    /// grafico resumen por etnia


                     {% for xlistdesecionporetniaresumen in listdesecionporetniaresumen  %}

                            seriescantidadeseetniaresumen.push(parseInt('{{ xlistdesecionporetniaresumen.cantidad  }}'));
                            categoriadeseretniaresumen.push('{{ xlistdesecionporetniaresumen.raza  }}');

                    {% endfor %}


                     pro_json_ratiodeseretniaresumen.push({"raza":categoriadeseretniaresumen,
                         "cantidad":seriescantidadeseetniaresumen
                     });

                    var optionsresumenetnia = {
                     series: pro_json_ratiodeseretniaresumen[0].cantidad,
                      chart: {
                          width: 700,
                      type: 'pie'
                    },
                    labels:pro_json_ratiodeseretniaresumen[0].raza,
                    responsive: [{
                      breakpoint: 480,
                      options: {
                        chart: {
                          width: 200
                        },
                        legend: {
                          position: 'bottom'
                        }
                      }
                    }]
                    };

                    chartderesumenetnia = new ApexCharts(document.querySelector("#chartdesercionetniaresumen"), optionsresumenetnia);
                    chartderesumenetnia.render();
                    
                    
                    /// grafico por estrato
        
                

                    {% for xlistdesecionporestrato in listdesecionporestrato  %}

                            seriescantidadeseestrato.push(parseInt('{{ xlistdesecionporestrato.cantidad  }}'));
                            categoriadeserestrato.push('{{ xlistdesecionporestrato.estrato  }}');

                    {% endfor %}

                     pro_json_ratiodeserestrato.push({"estrato":categoriadeserestrato,
                         "cantidad":seriescantidadeseestrato
                     });

                     var optionsestrato = {
                     series: pro_json_ratiodeserestrato[0].cantidad,
                      chart: {
                          width: 700,
                      type: 'pie'
                    },
                    labels:pro_json_ratiodeserestrato[0].estrato,
                    responsive: [{
                      breakpoint: 480,
                      options: {
                        chart: {
                          width: 200
                        },
                        legend: {
                          position: 'bottom'
                        }
                      }
                    }]
                    };

                    chartdeestrato = new ApexCharts(document.querySelector("#chartdesercionestracto"), optionsestrato);
                    chartdeestrato.render();
                    
                    
                    
                    /// grafico resumen por estrato
                             

                    {% for xlistdesecionporestratoresumen in listdesecionporestratoresumen  %}

                            seriescantidadeseestratoresumen.push(parseInt('{{ xlistdesecionporestratoresumen.cantidad  }}'));
                            categoriadeserestratoresumen.push('{{ xlistdesecionporestratoresumen.estrato  }}');

                    {% endfor %}


                     pro_json_ratiodeserestratoresumen.push({"estrato":categoriadeserestratoresumen,
                         "cantidad":seriescantidadeseestratoresumen
                     });

                    var optionsresumenestrato = {
                     series: pro_json_ratiodeserestratoresumen[0].cantidad,
                      chart: {
                          width: 700,
                      type: 'pie'
                    },
                    labels:pro_json_ratiodeserestratoresumen[0].estrato,
                    responsive: [{
                      breakpoint: 480,
                      options: {
                        chart: {
                          width: 200
                        },
                        legend: {
                          position: 'bottom'
                        }
                      }
                    }]
                    };

                    chartderesumenestrato = new ApexCharts(document.querySelector("#chartdesercionestractoresumen"), optionsresumenestrato);
                    chartderesumenestrato.render();
                    
                /// grafico de solicitudes atendidas
              
            function makeData() {
                var pro_json_ratiosolicitudes=[]
                {% for xlistacantidadsolicitudes in listacantidadsolicitudes  %}

                          pro_json_ratiosolicitudes.push({"x":'{{ xlistacantidadsolicitudes.ano }}',
                                 "y":parseInt('{{ xlistacantidadsolicitudes.cantidad  }}')
                          });

                {% endfor %}

                return pro_json_ratiosolicitudes
            }

            function makeDataColor() {
                var pro_json_ratiosolicitudescolores=[]
                {% for xlistacantidadsolicitudes in listacantidadsolicitudes  %}

                          pro_json_ratiosolicitudescolores.push('{{ xlistacantidadsolicitudes.color }}');

                {% endfor %}

                return pro_json_ratiosolicitudescolores
            }
             
             function updateQuarterChart(sourceChart, destChartIDToUpdate) {
                var series = [];
                var colores=[];
                if (sourceChart.w.globals.selectedDataPoints[0]) {
                  Loader.open();
                  $.post("/estadisticasadmin", {
                        "action": "buscartrimestre",
                        idselecc: sourceChart.w.globals.selectedDataPoints[0].length>0  ?  JSON.stringify(sourceChart.w.globals.selectedDataPoints[0]): 0

                        }, function (data) {
                            if (data.result == 'ok') {

                               for (var j in data.listapercentiles) {
                                       series.push({"name":data.listapercentiles[j].name,
                                      "data":data.listapercentiles[j].quarters});
                                       colores.push(data.listapercentiles[j].color);

                               }



                            }
                       Loader.close();
                  }, 'json').always(function() {
                        return ApexCharts.exec(destChartIDToUpdate, 'updateOptions', {
                            series: series,
                            colors: colores,
                            fill: {
                                    colors: colores
                            }
                        })
                 });


                }
              }
        
              var options = {
                  series: [{
                   data: makeData()
              }],
              chart: {
              id: 'barYear',
              height: 400,
              width: '100%',
              type: 'bar',
              events: {
                dataPointSelection: function (e, chart, opts) {
                  var quarterChartEl = document.querySelector("#chart-quarter");
                  var yearChartEl = document.querySelector("#chart-year");
                  if (opts.selectedDataPoints[0].length === 1) {
                    if (quarterChartEl.classList.contains("active")) {
                      updateQuarterChart(chart, 'barQuarter')
                    } else {
                      yearChartEl.classList.add("chart-quarter-activated")
                      quarterChartEl.classList.add("active");
                      updateQuarterChart(chart, 'barQuarter')
                    }
                  } else {
                    updateQuarterChart(chart, 'barQuarter')
                  }
            
                  if (opts.selectedDataPoints[0].length === 0) {
                    yearChartEl.classList.remove("chart-quarter-activated")
                    quarterChartEl.classList.remove("active");
                  }
            
                },
                updated:  function (chart) {
                  updateQuarterChart(chart, 'barQuarter')
                }
              }
            },
            plotOptions: {
              bar: {
                distributed: true,
                horizontal: true,
                barHeight: '75%',
                dataLabels: {
                  position: 'bottom'
                }
              }
            },
            dataLabels: {
              enabled: true,
              textAnchor: 'start',
              style: {
                colors: ['#fff']
              },
              formatter: function (val, opt) {
                return opt.w.globals.labels[opt.dataPointIndex]
              },
              offsetX: 0,
              dropShadow: {
                enabled: true
              }
            },
            
           colors:makeDataColor(),
            
            states: {
              normal: {
                filter: {
                  type: 'desaturate'
                }
              },
              active: {
                allowMultipleDataPointsSelection: true,
                filter: {
                  type: 'darken',
                  value: 1
                }
              }
            },
            tooltip: {
              x: {
                show: false
              },
              y: {
                title: {
                  formatter: function (val, opts) {
                    return opts.w.globals.labels[opts.dataPointIndex]
                  }
                }
              }
            },
            title: {
              text: 'Cantidad de Solicitudes por Año',
              offsetX: 15
            },
            subtitle: {
              text: '(Click en la barra para ver el Detalle)',
              offsetX: 15
            },
            yaxis: {
              labels: {
                show: false
              }
            }
            };

        var chart = new ApexCharts(document.querySelector("#chart-year"), options);
        chart.render();
      
        var optionsQuarter = {
          series: [{
          data: []
        }],
          chart: {
          id: 'barQuarter',
          height: 400,
          width: '100%',
          type: 'bar',
          stacked: true
        },
        plotOptions: {
          bar: {
            columnWidth: '50%',
            horizontal: false
          }
        },
        legend: {
          show: false
        },
        grid: {
          yaxis: {
            lines: {
              show: false,
            }
          },
          xaxis: {
            lines: {
              show: true,
            }
          }
        },
        yaxis: {
          labels: {
            show: false
          }
        },
        title: {
          text: 'Detalle de cantidad de solictudes atendidas por trimestre',
          offsetX: 10
        },
        tooltip: {
          x: {
            formatter: function (val, opts) {
              return opts.w.globals.seriesNames[opts.seriesIndex]
            }
          },
          y: {
            title: {
              formatter: function (val, opts) {
                return opts.w.globals.labels[opts.dataPointIndex]
              }
            }
          }
        }
        };

        var chartQuarter = new ApexCharts(document.querySelector("#chart-quarter"), optionsQuarter);
        chartQuarter.render();
        
         chart.addEventListener('dataPointSelection', function (e, chart, opts) {
            var quarterChartEl = document.querySelector("#chart-quarter");
            var yearChartEl = document.querySelector("#chart-year");
            if (opts.selectedDataPoints[0].length === 1) {
              if(quarterChartEl.classList.contains("active")) {
                updateQuarterChart(chart, 'barQuarter')
              }
              else {
                yearChartEl.classList.add("chart-quarter-activated")
                quarterChartEl.classList.add("active");
                updateQuarterChart(chart, 'barQuarter')
              }
            } else {
                updateQuarterChart(chart, 'barQuarter')
            }
          
            if (opts.selectedDataPoints[0].length === 0) {
              yearChartEl.classList.remove("chart-quarter-activated")
              quarterChartEl.classList.remove("active");
                }
          
         })
            
        
        });

       

        function buscarInscMatri(){

            var pro_json_ratios2=[];
            var seriesratiosmatriu2=[];
            var seriesratiosnomatriu2=[];
            var categoriaratios2=[];

            Loader.open();
            $.post("/estadisticasadmin", {
                "action": "buscarInscrMatricu",
                idperiodo:$("#cmbidperiodo").val(),
                idano: $("#cmbano").val(),
                idcarrera: $("#cmbcarreras").val(),
                idgrupo:$("#cmbgrupo").val()
                }, function (data) {
                    if (data.result == 'ok') {

                      for (var j in data.listamatricu) {
                          categoriaratios2.push(data.listamatricu[j].nombrenivel);
                      }

                       for (var x in data.listamatricu) {
                          seriesratiosmatriu2.push(parseInt(data.listamatricu[x].cantidadmatriculado ));
                          seriesratiosnomatriu2.push(parseInt(data.listamatricu[x].cantidadnomatriculado));
                      }


                       pro_json_ratios2.push({"label":categoriaratios2,
                            "data1":seriesratiosmatriu2,"data2":seriesratiosnomatriu2});

                       pro_json_ratios2.sort();

                    chart.updateOptions({
                      series: [{ name: 'Matriculado',data: pro_json_ratios2[0].data1},{ name: 'No Matriculados',data: pro_json_ratios2[0].data2}],
                      xaxis: {
                        categories: pro_json_ratios2[0].label
                      }
                      
                    });

                    }
               Loader.close();
            }, 'json');

        }


        function buscarMatriAsis(){

           var pro_json_ratiosasistencia2=[];
           var seriesratiosmatriuasis2=[];
           var seriesratiosasist2=[];
           var categoriaratiosasistencia2=[];

            Loader.open();
            $.post("/estadisticasadmin", {
                "action": "buscarMatricuAsis",
                idperiodo:$("#cmbidperiodoasis").val(),
                idano: $("#cmbanoasis").val(),
                idcarrera: $("#cmbcarrerasasis").val(),
                idgrupo:$("#cmbgrupoasis").val()
                }, function (data) {
                    if (data.result == 'ok') {

                      for (var j in data.listamatricuasistencia) {
                          categoriaratiosasistencia2.push(data.listamatricuasistencia[j].nombrenivel);
                      }

                       for (var x in data.listamatricuasistencia) {
                          seriesratiosmatriuasis2.push(parseInt(data.listamatricuasistencia[x].cantidadmatriculado ));
                          seriesratiosasist2.push(parseInt(data.listamatricuasistencia[x].cantidadasistencia));
                      }


                        pro_json_ratiosasistencia2.push({"label":categoriaratiosasistencia2,
                             "data1":seriesratiosmatriuasis2,"data2":seriesratiosasist2
                        });



                    chart2.updateOptions({
                      series: [{ name: 'Matriculado',type: 'column',data: pro_json_ratiosasistencia2[0].data1},{ name: 'Asistencia',type: 'line',data: pro_json_ratiosasistencia2[0].data2}],
                      xaxis: {
                        categories: pro_json_ratiosasistencia2[0].label
                      }

                    });

                    }
               Loader.close();
            }, 'json');

        }
        
        function buscarDesrcionprograma(){

            var pro_json_ratiodeseracademico2=[];
            var seriescantidadinscr2=[];
            var seriescantidaretir2=[];
            var categoriadeser2=[];

            Loader.open();
            $.post("/estadisticasadmin", {
                "action": "buscarDesercionprograma",
                idperiodo:$("#cmbidperiododeser").val(),
                idano: $("#cmbanodeser").val(),
                idcarrera: $("#cmbcarreradeser").val()
                }, function (data) {
                    if (data.result == 'ok') {

                      for (var j in data.listdesecionprograma) {
                          categoriadeser2.push(data.listdesecionprograma[j].nombrecarrera);
                      }

                       for (var x in data.listdesecionprograma) {
                          seriescantidadinscr2.push(parseInt(data.listdesecionprograma[x].cantidadinscritos ));
                          seriescantidaretir2.push(parseInt(data.listdesecionprograma[x].cantidadretiro));
                      }


                        pro_json_ratiodeseracademico2.push({"label":categoriadeser2,
                             "data1":seriescantidadinscr2,"data2":seriescantidaretir2
                        });



                    chart3.updateOptions({
                      series: [{  name: 'Estudiantes (Inscritos)',data: pro_json_ratiodeseracademico2[0].data1},{ name: 'Retirados',data: pro_json_ratiodeseracademico2[0].data2}],
                      xaxis: {
                        categories: pro_json_ratiodeseracademico2[0].label
                      }

                    });

                    }
               Loader.close();
            }, 'json');

        }

        function buscarDesrciongenero(){

            var pro_json_ratiodesergenro2=[];
            var seriescantidadesegeneromas2=[];
            var seriescantidadesegenerofemi2=[];
            var categoriadesergenero2=[];

            Loader.open();
            $.post("/estadisticasadmin", {
                "action": "buscarDeserciongenero",
                idperiodo:$("#cmbidperiododesergenero").val(),
                idano: $("#cmbanodesergenero").val(),
                idcarrera: $("#cmbcarreradesergenero").val()
                }, function (data) {
                    if (data.result == 'ok') {

                      for (var j in data.listdesecionporgenero) {
                          categoriadesergenero2.push(data.listdesecionporgenero[j].nombrecarrera);
                      }

                       for (var x in data.listdesecionporgenero) {
                          seriescantidadesegeneromas2.push(parseInt(data.listdesecionporgenero[x].cantidadretiradomas ));
                          seriescantidadesegenerofemi2.push(parseInt(data.listdesecionporgenero[x].cantidadretiradofemi));
                      }


                        pro_json_ratiodesergenro2.push({"label":categoriadesergenero2,
                             "data1":seriescantidadesegeneromas2,"data2":seriescantidadesegenerofemi2
                        });


                    document.getElementById("idtotaldesercionhombre").innerText=parseInt(data.listdesecionporhombres);
                    document.getElementById("idtotaldesercionmujeres").innerText=parseInt(data.listdesecionpormujeres);
                    chartgenero.updateOptions({
                      series: [{  name: 'Masculino',data: pro_json_ratiodesergenro2[0].data1},{ name: 'Femenimo',data: pro_json_ratiodesergenro2[0].data2}],
                      xaxis: {
                        categories: pro_json_ratiodesergenro2[0].label
                      }

                    });

                    }
               Loader.close();
            }, 'json');

        }

        function buscarDesrcionetnia(){

            var pro_json_ratiodeseretnia2=[];
            var seriescantidadeseetnia2=[];
            var categoriadeseretnia2=[];

            Loader.open();
            $.post("/estadisticasadmin", {
                "action": "buscarDesercionetnia",
                idperiodo:$("#cmbidperiododeseretina").val(),
                idano: $("#cmbanodeseretnia").val(),
                idcarrera: $("#cmbcarreradeseretnia").val()
                }, function (data) {
                    if (data.result == 'ok') {

                      for (var j in data.listdesecionporetnia) {
                          seriescantidadeseetnia2.push(parseInt(data.listdesecionporetnia[j].cantidad  ));
                            categoriadeseretnia2.push(data.listdesecionporetnia[j].raza);
                      }



                     pro_json_ratiodeseretnia2.push({"raza":categoriadeseretnia2,
                         "cantidad":seriescantidadeseetnia2
                     });

                      chartdeetnia.updateOptions({
                          series: pro_json_ratiodeseretnia2[0].cantidad,
                          labels:pro_json_ratiodeseretnia2[0].raza
                      });

                    }
               Loader.close();
            }, 'json');

        }
        
        
        function buscarDesrcionestrato(){

            var pro_json_ratiodeserestrato2=[];
            var seriescantidadeseestrato2=[];
            var categoriadeserestrato2=[];

            Loader.open();
            $.post("/estadisticasadmin", {
                "action": "buscarDesercionestrato",
                idperiodo:$("#cmbidperiododeserestracto").val(),
                idano: $("#cmbanodeserestracto").val(),
                idcarrera: $("#cmbcarreradeserestracto").val()
                }, function (data) {
                    if (data.result == 'ok') {

                      for (var j in data.listdesecionporestrato) {
                          seriescantidadeseestrato2.push(parseInt(data.listdesecionporestrato[j].cantidad  ));
                            categoriadeserestrato2.push(data.listdesecionporestrato[j].estrato);
                      }



                     pro_json_ratiodeserestrato2.push({"estrato":categoriadeserestrato2,
                         "cantidad":seriescantidadeseestrato2
                     });

                      chartdeestrato.updateOptions({
                          series: pro_json_ratiodeserestrato2[0].cantidad,
                          labels:pro_json_ratiodeserestrato2[0].estrato
                      });

                    }
               Loader.close();
            }, 'json');

        }

        $("#btnbuscardasboardratios").click(function() {
          buscarInscMatri();
        });

        $("#btnbuscarmatasis").click(function() {
          buscarMatriAsis();
        });
        
        $("#btnbuscarmatadeser").click(function() {
          buscarDesrcionprograma();
        });

        $("#btnbuscarmatadesergenero").click(function() {
          buscarDesrciongenero();
        });

        $("#btnbuscarmatadeseretnia").click(function() {
          buscarDesrcionetnia();
        });
        
         $("#btnbuscarmatadeserestracto").click(function() {
          buscarDesrcionestrato();
        });
        
        
        


        
        $("#cmbano").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarperiodoano",
             idano: $("#cmbano").val()
         }, function (data) {
             var periodtxt = '';
             var carreratxt='';
             var grupotxt='';
             if (data.result == 'ok') {

                 for (var x in data.listPeriodo) {
                     periodtxt = periodtxt + '<option  value="' + data.listPeriodo[x].id + '"> ' + data.listPeriodo[x].nombre + '</option>';
                 }
                 
                 for (var c in data.listCarrera) {
                     carreratxt = carreratxt + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }
                 
                  for (var d in data.listGrupo) {
                     grupotxt = grupotxt + '<option  value="' + data.listGrupo[d].id + '"> ' + data.listGrupo[d].nombre + '</option>';
                 }
                 
                 $("#cmbidperiodo").html(periodtxt);
                 $("#cmbcarreras").html(carreratxt);
                 $("#cmbgrupo").html(grupotxt);

             } else {
                 $("#cmbidperiodo").html(periodtxt);
                 $("#cmbcarreras").html(carreratxt);
                 $("#cmbgrupo").html(grupotxt);
             }

         }, 'json');
            
            
        });
        
        $("#cmbidperiodo").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarcarreraperiodo",
             idperiodo: $("#cmbidperiodo").val(),
             idano: $("#cmbano").val()    
         }, function (data) {
           
             var carreratxt='';
             var grupotxt='';
             if (data.result == 'ok') {

           
                 for (var c in data.listCarrera) {
                     carreratxt = carreratxt + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }
                 
                  for (var d in data.listGrupo) {
                     grupotxt = grupotxt + '<option  value="' + data.listGrupo[d].id + '"> ' + data.listGrupo[d].nombre + '</option>';
                 }
                 
                
                 $("#cmbcarreras").html(carreratxt);
                 $("#cmbgrupo").html(grupotxt);

             } else {
                
                 $("#cmbcarreras").html(carreratxt);
                 $("#cmbgrupo").html(grupotxt);
             }

         }, 'json');
            
            
        });
        
        $("#cmbcarreras").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscargrupo",
             idano: $("#cmbano").val(),     
             idcarrera: $("#cmbcarreras").val()
         }, function (data) {
             var grupotxt='';
             if (data.result == 'ok') {

                
                  for (var d in data.listGrupo) {
                     grupotxt = grupotxt + '<option  value="' + data.listGrupo[d].id + '"> ' + data.listGrupo[d].nombre + '</option>';
                 }
                 
               
                 $("#cmbgrupo").html(grupotxt);

             } else {
                
                 $("#cmbgrupo").html(grupotxt);
             }

         }, 'json');
            
            
        });



        $("#cmbanoasis").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarperiodoano",
             idano: $("#cmbanoasis").val()
         }, function (data) {
             var periodtxtasis = '';
             var carreratxtasis='';
             var grupotxtasis='';
             if (data.result == 'ok') {

                 for (var x in data.listPeriodo) {
                     periodtxtasis = periodtxtasis + '<option  value="' + data.listPeriodo[x].id + '"> ' + data.listPeriodo[x].nombre + '</option>';
                 }

                 for (var c in data.listCarrera) {
                     carreratxtasis = carreratxtasis + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }

                  for (var d in data.listGrupo) {
                     grupotxtasis = grupotxtasis + '<option  value="' + data.listGrupo[d].id + '"> ' + data.listGrupo[d].nombre + '</option>';
                 }

                 $("#cmbidperiodoasis").html(periodtxtasis);
                 $("#cmbcarrerasasis").html(carreratxtasis);
                 $("#cmbgrupoasis").html(grupotxtasis);

             } else {
                 $("#cmbidperiodoasis").html(periodtxtasis);
                 $("#cmbcarrerasasis").html(carreratxtasis);
                 $("#cmbgrupoasis").html(grupotxtasis);
             }

         }, 'json');


        });

        $("#cmbidperiodoasis").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarcarreraperiodo",
             idperiodo: $("#cmbidperiodoasis").val(),
             idano: $("#cmbanoasis").val()
         }, function (data) {

             var carreratxtasis='';
             var grupotxtasis='';
             if (data.result == 'ok') {


                 for (var c in data.listCarrera) {
                     carreratxtasis = carreratxtasis + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }

                  for (var d in data.listGrupo) {
                     grupotxtasis = grupotxtasis + '<option  value="' + data.listGrupo[d].id + '"> ' + data.listGrupo[d].nombre + '</option>';
                 }


                 $("#cmbcarrerasasis").html(carreratxtasis);
                 $("#cmbgrupoasis").html(grupotxtasis);

             } else {

                 $("#cmbcarrerasasis").html(carreratxtasis);
                 $("#cmbgrupoasis").html(grupotxtasis);
             }

         }, 'json');


        });

        $("#cmbcarrerasasis").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscargrupo",
             idano: $("#cmbanoasis").val(),
             idcarrera: $("#cmbcarrerasasis").val()
         }, function (data) {
             var grupotxtasis='';
             if (data.result == 'ok') {


                  for (var d in data.listGrupo) {
                     grupotxtasis = grupotxtasis + '<option  value="' + data.listGrupo[d].id + '"> ' + data.listGrupo[d].nombre + '</option>';
                 }


                 $("#cmbgrupoasis").html(grupotxtasis);

             } else {

                 $("#cmbgrupoasis").html(grupotxtasis);
             }

         }, 'json');


        });
        
        
        $("#cmbanodeser").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarperiodoano",
             idano: $("#cmbanodeser").val()
         }, function (data) {
             var periodtxtdeser = '';
             var carreratxtdeser='';
             
             if (data.result == 'ok') {

                 for (var x in data.listPeriodo) {
                     periodtxtdeser = periodtxtdeser + '<option  value="' + data.listPeriodo[x].id + '"> ' + data.listPeriodo[x].nombre + '</option>';
                 }

                 for (var c in data.listCarrera) {
                     carreratxtdeser = carreratxtdeser + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }

                

                 $("#cmbidperiododeser").html(periodtxtdeser);
                 $("#cmbcarreradeser").html(carreratxtdeser);
                 

             } else {
                 $("#cmbidperiododeser").html(periodtxtdeser);
                 $("#cmbcarreradeser").html(carreratxtdeser);
                 
             }

         }, 'json');


        });

        $("#cmbidperiododeser").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarcarreraperiodo",
             idperiodo: $("#cmbidperiododeser").val(),
             idano: $("#cmbanoadeser").val()
         }, function (data) {

             var carreratxtdeser='';
             
             if (data.result == 'ok') {


                 for (var c in data.listCarrera) {
                     carreratxtdeser = carreratxtdeser + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }

                


                 $("#cmbcarrerasdeser").html(carreratxtdeser);
                 

             } else {

                 $("#cmbcarrerasdeser").html(carreratxtdeser);
                 
             }

         }, 'json');


        });


        $("#cmbanodesergenero").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarperiodoano",
             idano: $("#cmbanodesergenero").val()
         }, function (data) {
             var periodtxtdesergenero = '';
             var carreratxtdesergenero='';

             if (data.result == 'ok') {

                 for (var x in data.listPeriodo) {
                     periodtxtdesergenero = periodtxtdesergenero + '<option  value="' + data.listPeriodo[x].id + '"> ' + data.listPeriodo[x].nombre + '</option>';
                 }

                 for (var c in data.listCarrera) {
                     carreratxtdesergenero = carreratxtdesergenero + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }



                 $("#cmbidperiododesergenero").html(periodtxtdesergenero);
                 $("#cmbcarreradesergenero").html(carreratxtdesergenero);


             } else {
                 $("#cmbidperiododesergenero").html(periodtxtdesergenero);
                 $("#cmbcarreradesergenero").html(carreratxtdesergenero);

             }

         }, 'json');


        });

        $("#cmbidperiododesergenero").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarcarreraperiodo",
             idperiodo: $("#cmbidperiododesergenero").val(),
             idano: $("#cmbidperiododesergenero").val()
         }, function (data) {

             var carreratxtdesergenero='';

             if (data.result == 'ok') {


                 for (var c in data.listCarrera) {
                     carreratxtdesergenero = carreratxtdesergenero + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }




                 $("#cmbcarreradesergenero").html(carreratxtdesergenero);


             } else {

                 $("#cmbcarreradesergenero").html(carreratxtdesergenero);

             }

         }, 'json');


        });


        $("#cmbanodeseretnia").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarperiodoano",
             idano: $("#cmbanodeseretnia").val()
         }, function (data) {
             var periodtxtdeseretnia = '';
             var carreratxtdeseretnia='';

             if (data.result == 'ok') {

                 for (var x in data.listPeriodo) {
                     periodtxtdeseretnia = periodtxtdeseretnia + '<option  value="' + data.listPeriodo[x].id + '"> ' + data.listPeriodo[x].nombre + '</option>';
                 }

                 for (var c in data.listCarrera) {
                     carreratxtdeseretnia = carreratxtdeseretnia + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }



                 $("#cmbidperiododeseretina").html(periodtxtdeseretnia);
                 $("#cmbcarreradeseretnia").html(carreratxtdeseretnia);


             } else {
                 $("#cmbidperiododeseretina").html(periodtxtdeseretnia);
                 $("#cmbcarreradeseretnia").html(carreratxtdeseretnia);

             }

         }, 'json');


        });

        $("#cmbidperiododeseretina").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarcarreraperiodo",
             idperiodo: $("#cmbidperiododeseretina").val(),
             idano: $("#cmbanodeseretnia").val()
         }, function (data) {

             var carreratxtdeseretnia='';

             if (data.result == 'ok') {


                 for (var c in data.listCarrera) {
                     carreratxtdeseretnia = carreratxtdeseretnia + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }




                 $("#cmbcarreradeseretnia").html(carreratxtdeseretnia);


             } else {

                 $("#cmbcarreradeseretnia").html(carreratxtdeseretnia);

             }

         }, 'json');


        });
        
        $("#cmbanodeserestracto").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarperiodoano",
             idano: $("#cmbanodeserestracto").val()
         }, function (data) {
             var periodtxtdeserestrato = '';
             var carreratxtdeserestrato='';

             if (data.result == 'ok') {

                 for (var x in data.listPeriodo) {
                     periodtxtdeserestrato = periodtxtdeserestrato + '<option  value="' + data.listPeriodo[x].id + '"> ' + data.listPeriodo[x].nombre + '</option>';
                 }

                 for (var c in data.listCarrera) {
                     carreratxtdeserestrato = carreratxtdeserestrato + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }



                 $("#cmbidperiododeserestracto").html(periodtxtdeserestrato);
                 $("#cmbcarreradeserestracto").html(carreratxtdeserestrato);


             } else {
                 $("#cmbidperiododeseretina").html(periodtxtdeserestrato);
                 $("#cmbcarreradeserestracto").html(carreratxtdeserestrato);

             }

         }, 'json');


        });

        $("#cmbidperiododeserestracto").change(function() {
             $.post("/estadisticasadmin", {
             "action": "buscarcarreraperiodo",
             idperiodo: $("#cmbidperiododeserestracto").val(),
             idano: $("#cmbanodeserestracto").val()
         }, function (data) {

             var carreratxtdeserestrato='';

             if (data.result == 'ok') {


                 for (var c in data.listCarrera) {
                     carreratxtdeserestrato = carreratxtdeserestrato + '<option  value="' + data.listCarrera[c].id + '"> ' + data.listCarrera[c].nombre + '</option>';
                 }




                 $("#cmbcarreradeserestracto").html(carreratxtdeserestrato);


             } else {

                 $("#cmbcarreradeserestracto").html(carreratxtdeserestrato);

             }

         }, 'json');


        });

        function buscarSolicitudesDesercion(){
            
        }



 });


</script>



{% endblock %}
{% block canvas %}
      <div class="main-container">

         <div class="xs-pd-20-10 pd-ltr-20">
                <div class="page-header">
                    <div class="row">
                        <div class="col-md-10 col-sm-12">
                            <div class="title">
                                <h4>Dashboard Ratios</h4>
                            </div>
                        </div>
                         <div class="col-lg-2 col-md-2 col-sm-2">
                            <div class="title">
                                <a href="/estadisticasadmin" style="float: right;color: white;background: #0b132b" class="btn" data-bgcolor="#184679" data-color="#ffffff"><i class="icon-copy ion-arrow-left-a "></i> Atrás</a>
                            </div>
                         </div>
                    </div>
                </div>

                <div class="row clearfix" >
                          
                    <div class="col-md-12 mb-30" >
                        <div class="pd-20 card-box height-100-p">
                            <h4 class="h4 text-blue">Tasa de Retención de Cohortes</h4>
                            <div class="row">
                            
                                <div class="col-md-2 col-sm-2">
                                    <div class="form-group">
                                        <label >Año :</label>
                                        <select id="cmbano" style="width: 100%"  class="custom-select2 form-control">
                                            {% for xlistano in listano %}
                                              <option value={{ xlistano.anograduacion }}>{{ xlistano.anograduacion }}</option>
                                            {% endfor %}
                                           
                                        </select>
                                    </div>    
                                </div>
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Periodos :</label>
                                        <select id="cmbidperiodo" style="width: 100%" class="custom-select2 form-control">
                                             <option value="0">TODOS</option>
                                            {% for periodo2 in listperiodo %}
                                              <option value={{ periodo2.id }}>{{ periodo2 }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>                         
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Carreras :</label>
                                        <select id="cmbcarreras" style="width: 100%" class="custom-select2 form-control">
                                            <option value="0">TODOS</option>
                                            {% for xliscarrera in listcarrera %}
                                              <option value={{ xliscarrera.id }}>{{ xliscarrera.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                 </div>
    
    
                                <div class="col-md-2" style="margin-top: 5px">
                                    <label > <a style="color: #d92550"></a></label>
                                    <div class="form-group">
                                        <button type="button" id="btnbuscardasboardratios" class="btn" title="Buscar" data-bgcolor="#184679" data-color="#ffffff"><i class="icon-copy ti-search"></i> Buscar</button>
                                        <button type="button" id="btnlistadoratiosinsmatr" style="margin-left: 5px" class="btn" title="Descargar Inscritos/Matriculado" data-bgcolor="#184679" data-color="#ffffff" ><span class="icon-copy ti-import"></span></button>                                   
                                    </div>
                                </div>
                            </div>      
                            <div class="row">
                                <div class="col-md-2 col-sm-2">
                                    <div class="form-group">
                                        <label >Grupo :</label>
                                        <select id="cmbgrupo" style="width: 100%"  class="custom-select2 form-control">
                                             <option value="0">TODOS</option>
                                            {% for xlistgrupo in listgrupo %}
                                              <option value={{ xlistgrupo.id }}>{{ xlistgrupo.nombre }}</option>
                                            {% endfor %}
                                           
                                        </select>
                                    </div>    
                                </div>
                                
                            </div>
                            <div id="chartmatirunomatripornivel" ></div>
                        </div>
                    </div>

                </div>

                <div class="row clearfix" >

                    <div class="col-md-12 mb-30" >
                        <div class="pd-20 card-box height-100-p">
                            <h4 class="h4 text-blue">Tasa de Retiro Temprano</h4>
                             <div class="row">

                                <div class="col-md-2 col-sm-2">
                                    <div class="form-group">
                                        <label >Año :</label>
                                        <select id="cmbanoasis" style="width: 100%"  class="custom-select2 form-control">
                                            {% for xlistano in listano %}
                                              <option value={{ xlistano.anograduacion }}>{{ xlistano.anograduacion }}</option>
                                            {% endfor %}

                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Periodos :</label>
                                        <select id="cmbidperiodoasis" style="width: 100%" class="custom-select2 form-control">
                                             <option value="0">TODOS</option>
                                            {% for periodo2 in listperiodo %}
                                              <option value={{ periodo2.id }}>{{ periodo2 }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Carreras :</label>
                                        <select id="cmbcarrerasasis" style="width: 100%" class="custom-select2 form-control">
                                            <option value="0">TODOS</option>
                                            {% for xliscarrera in listcarrera %}
                                              <option value={{ xliscarrera.id }}>{{ xliscarrera.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                 </div>


                                <div class="col-md-2" style="margin-top: 5px">
                                    <label > <a style="color: #d92550"></a></label>
                                    <div class="form-group">
                                        <button type="button" id="btnbuscarmatasis" class="btn" title="Buscar" data-bgcolor="#184679" data-color="#ffffff"><i class="icon-copy ti-search"></i> Buscar</button>
                                        <button type="button" id="btnlistadoratiosinsmatr" style="margin-left: 5px" class="btn" title="Descargar Inscritos/Matriculado" data-bgcolor="#184679" data-color="#ffffff" ><span class="icon-copy ti-import"></span></button>
                                    </div>
                                </div>
                            </div>
                             <div class="row">
                                <div class="col-md-2 col-sm-2">
                                    <div class="form-group">
                                        <label >Grupo :</label>
                                        <select id="cmbgrupoasis" style="width: 100%"  class="custom-select2 form-control">
                                             <option value="0">TODOS</option>
                                            {% for xlistgrupo in listgrupo %}
                                              <option value={{ xlistgrupo.id }}>{{ xlistgrupo.nombre }}</option>
                                            {% endfor %}

                                        </select>
                                    </div>
                                </div>

                            </div>
                            <div id="chartmatriculadoasistencia" ></div>
                        </div>
                    </div>

                </div>
         
                <div class="row clearfix" >

                    <div class="col-md-12 mb-30" >
                        <div class="pd-20 card-box height-100-p">
                            <h4 class="h4 text-blue">Deserción por Programa Académico</h4>
                             <div class="row">

                                <div class="col-md-2 col-sm-2">
                                    <div class="form-group">
                                        <label >Año :</label>
                                        <select id="cmbanodeser" style="width: 100%"   class="custom-select2 form-control">
                                             <option value=0>TODOS</option>
                                            {% for xlistano in listano %}
                                              <option value={{ xlistano.anograduacion }}>{{ xlistano.anograduacion }}</option>
                                            {% endfor %}

                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Periodos :</label>
                                        <select id="cmbidperiododeser" style="width: 100%" class="custom-select2 form-control">
                                             <option value="0">TODOS</option>
                                            {% for periodo2 in listperiodo %}
                                              <option value={{ periodo2.id }}>{{ periodo2 }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Carreras :</label>
                                        <select id="cmbcarreradeser" style="width: 100%" class="custom-select2 form-control">
                                            <option value="0">TODOS</option>
                                            {% for xliscarrera in listcarrera %}
                                              <option value={{ xliscarrera.id }}>{{ xliscarrera.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                 </div>


                                <div class="col-md-2" style="margin-top: 5px">
                                    <label > <a style="color: #d92550"></a></label>
                                    <div class="form-group">
                                        <button type="button" id="btnbuscarmatadeser" class="btn" title="Buscar" data-bgcolor="#184679" data-color="#ffffff"><i class="icon-copy ti-search"></i> Buscar</button>
                                        <button type="button" id="btnlistadodeser" style="margin-left: 5px" class="btn" title="Descargar Deserción académico" data-bgcolor="#184679" data-color="#ffffff" ><span class="icon-copy ti-import"></span></button>
                                    </div>
                                </div>
                            </div>                         
                            <div id="chartdesercioncarrera" ></div>
                        </div>
                    </div>

                </div>
         
                <h1 class="h1"> <strong>Solicitud por retiro </strong></h1>
         
                <div class="row clearfix" >

                    <div class="col-md-12 mb-30" >
                        <div class="pd-20 card-box height-100-p">
                            <div class="row">
                                <div class="col-md-4 col-sm-4">
                                    <h4 class="h4 text-blue">Solictud Bandeja de Atención (Retiro Matricula)</h4>
                                </div>    
                                <div class="col-md-4 col-sm-4">
                                    <h4 class="h4 text-blue">Total Solicitudes: <label id="idtotalsolicitudes">{{ totalsolicitudesatendidas }}</label> </h4>
                                </div>                                    
                                
                            </div>
                            
                             <div class="row">

                                <div class="col-md-2 col-sm-2">
                                    <div class="form-group">
                                        <label >Año :</label>
                                        <select id="cmbasolicitud" style="width: 100%"   class="custom-select2 form-control">
                                             <option value=0>TODOS</option>
                                            {% for xlistano in listano %}
                                              <option value={{ xlistano.anograduacion }}>{{ xlistano.anograduacion }}</option>
                                            {% endfor %}

                                        </select>
                                    </div>
                                </div>
                               
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Carreras :</label>
                                        <select id="cmbcarreradeserbandeja" style="width: 100%" class="custom-select2 form-control">
                                            <option value="0">TODOS</option>
                                            {% for xlistcarrerasolicitud in listcarrerasolicitud %}
                                              <option value={{ xlistcarrerasolicitud.id }}>{{ xlistcarrerasolicitud.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                 </div>


                                <div class="col-md-2" style="margin-top: 5px">
                                    <label > <a style="color: #d92550"></a></label>
                                    <div class="form-group">
                                        <button type="button" id="btnbuscarmatadeserbandeja" class="btn" title="Buscar" data-bgcolor="#184679" data-color="#ffffff"><i class="icon-copy ti-search"></i> Buscar</button>
                                        <button type="button" id="btnlistadodeserbandeja" style="margin-left: 5px" class="btn" title="Descargar Deserción genero" data-bgcolor="#184679" data-color="#ffffff" ><span class="icon-copy ti-import"></span></button>
                                    </div>
                                </div>
                            </div>
                            <div id="chart-year" ></div>
                            <div id="chart-quarter" ></div>
                        </div>
                    </div>
                 

                </div>
                
                <h1 class="h1"> <strong>Datos de retiros efectivos</strong></h1>
         
                <div class="row clearfix" >

                    <div class="col-md-8 mb-30" >
                        <div class="pd-20 card-box height-100-p">
                            <div class="row">
                                <div class="col-md-4 col-sm-4">
                                    <h4 class="h4 text-blue">Deserción por Género</h4>
                                </div>    
                                <div class="col-md-4 col-sm-4">
                                    <h4 class="h4 text-blue">Total Hombres: <label id="idtotaldesercionhombre">{{ listdesecionporhombres }}</label> </h4>
                                </div>   
                                <div class="col-md-4 col-sm-4">
                                    <h4 class="h4 text-blue">Total Mujeres: <label id="idtotaldesercionmujeres"> {{ listdesecionpormujeres }} </label></h4>
                                </div>   
                                
                            </div>
                            
                             <div class="row">

                                <div class="col-md-2 col-sm-2">
                                    <div class="form-group">
                                        <label >Año :</label>
                                        <select id="cmbanodesergenero" style="width: 100%"   class="custom-select2 form-control">
                                             <option value=0>TODOS</option>
                                            {% for xlistano in listano %}
                                              <option value={{ xlistano.anograduacion }}>{{ xlistano.anograduacion }}</option>
                                            {% endfor %}

                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Periodos :</label>
                                        <select id="cmbidperiododesergenero" style="width: 100%" class="custom-select2 form-control">
                                             <option value="0">TODOS</option>
                                            {% for periodo2 in listperiodo %}
                                              <option value={{ periodo2.id }}>{{ periodo2 }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Carreras :</label>
                                        <select id="cmbcarreradesergenero" style="width: 100%" class="custom-select2 form-control">
                                            <option value="0">TODOS</option>
                                            {% for xliscarrera in listcarrera %}
                                              <option value={{ xliscarrera.id }}>{{ xliscarrera.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                 </div>


                                <div class="col-md-2" style="margin-top: 5px">
                                    <label > <a style="color: #d92550"></a></label>
                                    <div class="form-group">
                                        <button type="button" id="btnbuscarmatadesergenero" class="btn" title="Buscar" data-bgcolor="#184679" data-color="#ffffff"><i class="icon-copy ti-search"></i> Buscar</button>
                                        <button type="button" id="btnlistadodesergenero" style="margin-left: 5px" class="btn" title="Descargar Deserción genero" data-bgcolor="#184679" data-color="#ffffff" ><span class="icon-copy ti-import"></span></button>
                                    </div>
                                </div>
                            </div>
                            <div id="chartdeserciongenero" ></div>
                        </div>
                    </div>

                    <div class="col-md-4 mb-30" >
                        <div class="pd-20 card-box height-100-p">
                            <h4 class="h4 text-blue">Deserción por Género Resumen</h4>
                            <div id="chartdeserciongeneroresumen" ></div>
                        </div>
                    </div>

                </div>

                <div class="row clearfix" >

                    <div class="col-md-8 mb-30" >
                        <div class="pd-20 card-box height-100-p">
                            <h4 class="h4 text-blue">Deserción por Etnia</h4>
                             <div class="row">

                                <div class="col-md-2 col-sm-2">
                                    <div class="form-group">
                                        <label >Año :</label>
                                        <select id="cmbanodeseretnia" style="width: 100%"   class="custom-select2 form-control">
                                             <option value=0>TODOS</option>
                                            {% for xlistano in listano %}
                                              <option value={{ xlistano.anograduacion }}>{{ xlistano.anograduacion }}</option>
                                            {% endfor %}

                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Periodos :</label>
                                        <select id="cmbidperiododeseretina" style="width: 100%" class="custom-select2 form-control">
                                             <option value="0">TODOS</option>
                                            {% for periodo2 in listperiodo %}
                                              <option value={{ periodo2.id }}>{{ periodo2 }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Carreras :</label>
                                        <select id="cmbcarreradeseretnia" style="width: 100%" class="custom-select2 form-control">
                                            <option value="0">TODOS</option>
                                            {% for xliscarrera in listcarrera %}
                                              <option value={{ xliscarrera.id }}>{{ xliscarrera.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                 </div>


                                <div class="col-md-2" style="margin-top: 5px">
                                    <label > <a style="color: #d92550"></a></label>
                                    <div class="form-group">
                                        <button type="button" id="btnbuscarmatadeseretnia" class="btn" title="Buscar" data-bgcolor="#184679" data-color="#ffffff"><i class="icon-copy ti-search"></i> Buscar</button>
                                        <button type="button" id="btnlistadodeseretnia" style="margin-left: 5px" class="btn" title="Descargar Deserción etnia" data-bgcolor="#184679" data-color="#ffffff" ><span class="icon-copy ti-import"></span></button>
                                    </div>
                                </div>
                            </div>
                            <div id="chartdesercionetnia" ></div>
                        </div>
                    </div>

                    <div class="col-md-4 mb-30 " >
                        <div class="pd-20 card-box height-100-p ">
                            <h4 class="h4 text-blue">Deserción por Etnia Resumen</h4>
                            <div id="chartdesercionetniaresumen" ></div>
                        </div>
                    </div>

                </div>
         
                <div class="row clearfix" >

                    <div class="col-md-8 mb-30" >
                        <div class="pd-20 card-box height-100-p">
                            <h4 class="h4 text-blue">Deserción por Estracto Social</h4>
                             <div class="row">

                                <div class="col-md-2 col-sm-2">
                                    <div class="form-group">
                                        <label >Año :</label>
                                        <select id="cmbanodeserestracto" style="width: 100%"   class="custom-select2 form-control">
                                             <option value=0>TODOS</option>
                                            {% for xlistano in listano %}
                                              <option value={{ xlistano.anograduacion }}>{{ xlistano.anograduacion }}</option>
                                            {% endfor %}

                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Periodos :</label>
                                        <select id="cmbidperiododeserestracto" style="width: 100%" class="custom-select2 form-control">
                                             <option value="0">TODOS</option>
                                            {% for periodo2 in listperiodo %}
                                              <option value={{ periodo2.id }}>{{ periodo2 }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4">
                                    <div class="form-group">
                                        <label >Carreras :</label>
                                        <select id="cmbcarreradeserestracto" style="width: 100%" class="custom-select2 form-control">
                                            <option value="0">TODOS</option>
                                            {% for xliscarrera in listcarrera %}
                                              <option value={{ xliscarrera.id }}>{{ xliscarrera.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                 </div>


                                <div class="col-md-2" style="margin-top: 5px">
                                    <label > <a style="color: #d92550"></a></label>
                                    <div class="form-group">
                                        <button type="button" id="btnbuscarmatadeserestracto" class="btn" title="Buscar" data-bgcolor="#184679" data-color="#ffffff"><i class="icon-copy ti-search"></i> Buscar</button>
                                        <button type="button" id="btnlistadodeserestracto" style="margin-left: 5px" class="btn" title="Descargar Deserción Estracto Social" data-bgcolor="#184679" data-color="#ffffff" ><span class="icon-copy ti-import"></span></button>
                                    </div>
                                </div>
                            </div>
                            <div id="chartdesercionestracto" ></div>
                        </div>
                    </div>

                    <div class="col-md-4 mb-30 " >
                        <div class="pd-20 card-box height-100-p ">
                            <h4 class="h4 text-blue">Deserción por Estracto Social Resumen</h4>
                            <div id="chartdesercionestractoresumen" ></div>
                        </div>
                    </div>

                </div>


         </div>

      </div>


{% endblock %}