{% if conduccion or centro_externo %}
    <td><input {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda or  suspension %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n1 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n1 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n1'/></td>
    <td><input {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda or  suspension %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n2 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n2 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n2'/></td>
    <td><input {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda or  suspension %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n3 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n3 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n3'/></td>
    <td><input {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda or  suspension %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n4 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n4 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n4'/></td>
    <td><input {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda or  suspension %} disabled="disabled"{% endif %}{% if validarasistencia and asignadomateria.porciento_asistencia < asistenciaparaaprobar %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if asignadomateria.evaluacion.examen %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.examen }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='examen'/></td>
    <td><input {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda or  suspension %} disabled="disabled"{% endif %}type="text" class="nota input-mini bigger" style="{% if evaluacion.recuperacion %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.recuperacion }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='recuperacion'/></td>
    <td><b class="bigger" id='materiaasignada{{ asignadomateria.id }}'>{{ notafinal }}</b></td>
{% else %}
{# OCastillo 23-10-2019 este codigo es con las validaciones   #}
{#     <td><input id='nota1{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda or  suspension or evaluacion.proximo_cierre == "0" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n1 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n1 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n1'/></td>#}
{#     <input onblur="verifica({{ asignadomateria.id }})" id='nota4{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda or  suspension or evaluacion.proximo_cierre_ejecutivo == "0" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n4 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n4 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n4'/>#}

{# OCastillo 20-11-2019 validacion por las multas que asumen los docentes 24 horas #}
    {% if not asignadomateria.materia.cerrado %}
        {% if not asignadomateria.materia.activaciondocente %}
             {% if asignadomateria.materia.activacioncierremateria %}
                <td><input id='nota1{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda and not asignadomateria.materia.asignatura.asistencia %}disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n1 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n1 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n1'/></td>
                <td><input id='nota2{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda and not asignadomateria.materia.asignatura.asistencia %}disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n2 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n2 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n2'/></td>
                <td><input id='nota3{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda and not asignadomateria.materia.asignatura.asistencia %}disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n3 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n3 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n3'/></td>
                <td><input onblur="verifica({{ asignadomateria.id }})" id='nota4{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda and not asignadomateria.materia.asignatura.asistencia %}disabled="disabled"{% endif %}type="text" class="nota input-mini bigger" style="{% if evaluacion.n4 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n4 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n4'/>
                    <span id='lblnota4{{ asignadomateria.id }}'>  </span>
                </td>
                {# OCastillo 2-07-2020 se quita validacion de deuda para subir nota dee examen por emergencia covid #}
                {# <td><input onblur="verifica({{ asignadomateria.id }})" id='examen{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeudatmp and not asignadomateria.materia.asignatura.asistencia or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %} disabled="disabled" {% endif %}{% if  asignadomateria.porciento_asistencia < 75 and not asignadomateria.materia.asignatura.asistencia and evaluacion.nota_parcial_nueva == "examen" %} disabled="disabled" {% endif %} type="text" class="nota input-mini bigger" style="{% if asignadomateria.evaluacion.examen %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.examen }}" asi='{{  asignadomateria.porciento_asistencia  }}' maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='examen'/>#}
                <td><input onblur="verifica({{ asignadomateria.id }})" id='examen{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda and not asignadomateria.materia.asignatura.asistencia or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %} disabled="disabled" {% endif %}{% if  asignadomateria.porciento_asistencia < asistenciaparaaprobar and not asignadomateria.materia.asignatura.asistencia and evaluacion.nota_parcial_nueva == "examen" %} disabled="disabled" {% endif %} type="text" class="nota input-mini bigger" style="{% if asignadomateria.evaluacion.examen %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.examen }}" asi='{{  asignadomateria.porciento_asistencia  }}' maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='examen'/>
                    <span id='lblexamen{{ asignadomateria.id }}'> </span>
                </td>
                <td><b class='bigger'id='materiaasignada{{ asignadomateria.id }}parcial'>{% if evaluacion.examen >= min_exa %}{{ notaparcial }} {% endif %} </b></td>
                <td><input onblur="verifica({{ asignadomateria.id }})" id='recupera{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda or  suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "aprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.recuperacion %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.recuperacion }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='recuperacion'/>
                    <span id='lblrecupera{{ asignadomateria.id }}'>  </span>
                </td>
             {% else %}
                <td><input id='nota1{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and not regnota and not espnota or  suspension or evaluacion.proximo_cierre == "0" or evaluacion.finasignacionteoria %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n1 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n1 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n1'/></td>
                <td><input id='nota2{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and not regnota and not espnota or  suspension or evaluacion.proximo_cierre == "0" or evaluacion.finasignacionteoria %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n2 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n2 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n2'/></td>
                <td><input id='nota3{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and not regnota and not espnota or  suspension or evaluacion.proximo_cierre == "0" or evaluacion.finasignacionteoria %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n3 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n3 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n3'/></td>
                <td><input onblur="verifica({{ asignadomateria.id }})" id='nota4{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and not regnota and not espnota or  suspension or evaluacion.proximo_cierre == "0" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n4 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n4 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n4'/>
                    <span id='lblnota4{{ asignadomateria.id }}'>  </span>
                </td>
                {# OCastillo 2-07-2020 se quita validacion de deuda para subir nota dee examen por emergencia covid #}
                {# <td><input onblur="verifica({{ asignadomateria.id }})" id='examen{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda and not asignadomateria.materia.asignatura.asistencia %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and not asignadomateria.materia.asignatura.asistencia or  suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %} disabled="disabled"{% endif %} {% if  asignadomateria.porciento_asistencia < 75 and not asignadomateria.materia.asignatura.asistencia %} disabled="disabled" {% endif %} type="text" class="nota input-mini bigger" style="{% if asignadomateria.evaluacion.examen %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.examen }}" asi='{{  asignadomateria.porciento_asistencia  }}' maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='examen'/>#}
                <td>
                    {# OCastillo 11-05-2022 se agrega validacion de deuda para subir nota de examen #}
                    {% if not tienedeudatmp %}
                        <input onblur="verifica({{ asignadomateria.id }})" id='examen{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeudatmp and not asignadomateria.materia.asignatura.asistencia and validarasistencia%}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeudatmp and not asignadomateria.materia.asignatura.asistencia or  suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %} disabled="disabled"{% endif %} {% if  asignadomateria.porciento_asistencia < asistenciaparaaprobar and not asignadomateria.materia.asignatura.asistencia %} disabled="disabled" {% endif %} type="text" class="nota input-mini bigger" style="{% if asignadomateria.evaluacion.examen %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.examen }}" asi='{{  asignadomateria.porciento_asistencia  }}' maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='examen'/>
                        <span id='lblexamen{{ asignadomateria.id }}'> </span>
                    {% else %}
                        <input {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeudatmp and not asignadomateria.materia.asignatura.asistencia %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeudatmp and not asignadomateria.materia.asignatura.asistencia and validarasistencia or  suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %} disabled="disabled"{% endif %} {% if  asignadomateria.porciento_asistencia < asistenciaparaaprobar and not asignadomateria.materia.asignatura.asistencia and validarasistencia %} disabled="disabled" {% endif %} type="text" class="nota input-mini bigger" style="{% if asignadomateria.evaluacion.examen %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.examen }}" asi='{{  asignadomateria.porciento_asistencia  }}' maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='examen'/>
                    {% endif %}
                </td>
                <td><b class='bigger'id='materiaasignada{{ asignadomateria.id }}parcial'>{% if evaluacion.examen >= min_exa %}{{ notaparcial }} {% endif %} </b></td>
                <td><input onblur="verifica({{ asignadomateria.id }})" id='recupera{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeudatmp %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeudatmp or  suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "examen" or evaluacion.nota_parcial_nueva == "aprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" or evaluacion.proximo_cierre == "0" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.recuperacion %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.recuperacion }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='recuperacion'/>
                    <span id='lblrecupera{{ asignadomateria.id }}'>  </span>
                </td>
            {% endif %}
        {% else %}
            <td><input id='nota1{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %} {% if suspension %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n1 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n1 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n1'/></td>
            <td><input id='nota2{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %} {% if suspension %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n2 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n2 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n2'/></td>
            <td><input id='nota3{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %} {% if suspension %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n3 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n3 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n3'/></td>
            <td><input onblur="verifica({{ asignadomateria.id }})" id='nota4{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if suspension %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n4 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n4 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n4'/>
                <span id='lblnota4{{ asignadomateria.id }}'>  </span>
            </td>
            {# OCastillo 2-07-2020 se quita validacion de deuda para subir nota dee examen por emergencia covid #}
            {# <td><input onblur="verifica({{ asignadomateria.id }})" id='examen{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeudatmp and not asignadomateria.materia.asignatura.asistencia %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeudatmp and not asignadomateria.materia.asignatura.asistencia or suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %} disabled="disabled" {% endif %}{% if  asignadomateria.porciento_asistencia < 75 and not asignadomateria.materia.asignatura.asistencia %} disabled="disabled" {% endif %} type="text" class="nota input-mini bigger" style="{% if asignadomateria.evaluacion.examen %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.examen }}" asi='{{  asignadomateria.porciento_asistencia  }}' maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='examen'/>#}
            <td><input onblur="verifica({{ asignadomateria.id }})" id='examen{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda and not asignadomateria.materia.asignatura.asistencia and validarasistencia %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and not asignadomateria.materia.asignatura.asistencia and validarasistencia or suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %} disabled="disabled" {% endif %}{% if  asignadomateria.porciento_asistencia < asistenciaparaaprobar and not asignadomateria.materia.asignatura.asistencia %} disabled="disabled" {% endif %} type="text" class="nota input-mini bigger" style="{% if asignadomateria.evaluacion.examen %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.examen }}" asi='{{  asignadomateria.porciento_asistencia  }}' maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='examen'/>
                <span id='lblexamen{{ asignadomateria.id }}'> </span>
            </td>
            <td><b class='bigger'id='materiaasignada{{ asignadomateria.id }}parcial'>{% if evaluacion.examen >= min_exa %}{{ notaparcial }} {% endif %} </b></td>
            <td><input onblur="verifica({{ asignadomateria.id }})" id='recupera{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeudatmp %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "aprobado" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" or evaluacion.proximo_cierre == "0" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.recuperacion %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.recuperacion }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='recuperacion'/>
                <span id='lblrecupera{{ asignadomateria.id }}'> </span>
            </td>
        {% endif %}
    {% else %}
{# ok por cerrado       #}
           <td><input id='nota1{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and not regnota and not espnota or  suspension or evaluacion.proximo_cierre == "0" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n1 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n1 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n1'/></td>
           <td><input id='nota2{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and not regnota and not espnota or  suspension or evaluacion.proximo_cierre == "0" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n2 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n2 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n2'/></td>
           <td><input id='nota3{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and not regnota and not espnota or  suspension or evaluacion.proximo_cierre == "0" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n3 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n3 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n3'/></td>
           <td><input onblur="verifica({{ asignadomateria.id }})" id='nota4{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and not regnota and not espnota or  suspension or evaluacion.proximo_cierre == "0" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n4 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n4 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n4'/>
               <span id='lblnota4{{ asignadomateria.id }}'>  </span>
           </td>
           {# OCastillo 2-07-2020 se quita validacion de deuda para subir nota dee examen por emergencia covid #}
           {# <td><input onblur="verifica({{ asignadomateria.id }})" id='examen{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeudatmp and not asignadomateria.materia.asignatura.asistencia %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeudatmp and not asignadomateria.materia.asignatura.asistencia or  suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %} disabled="disabled"{% endif %} {% if  asignadomateria.porciento_asistencia < 75 and not asignadomateria.materia.asignatura.asistencia %} disabled="disabled" {% endif %} type="text" class="nota input-mini bigger" style="{% if asignadomateria.evaluacion.examen %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.examen }}" asi='{{  asignadomateria.porciento_asistencia  }}' maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='examen'/>#}
           <td><input onblur="verifica({{ asignadomateria.id }})" id='examen{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and not espnota and modulofinanzas and tienedeuda and not asignadomateria.materia.asignatura.asistencia and validarasistencia %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda and not asignadomateria.materia.asignatura.asistencia and validarasistencia or  suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion" %} disabled="disabled"{% endif %} {% if  asignadomateria.porciento_asistencia < asistenciaparaaprobar and not asignadomateria.materia.asignatura.asistencia and validarasistencia %} disabled="disabled" {% endif %} type="text" class="nota input-mini bigger" style="{% if asignadomateria.evaluacion.examen %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.examen }}" asi='{{  asignadomateria.porciento_asistencia  }}' maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='examen'/>
               <span id='lblexamen{{ asignadomateria.id }}'> </span>
           </td>
           <td><b class='bigger'id='materiaasignada{{ asignadomateria.id }}parcial'>{% if evaluacion.examen >= min_exa %}{{ notaparcial }} {% endif %} </b></td>
           <td><input onblur="verifica({{ asignadomateria.id }})" id='recupera{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeudatmp %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeudatmp or  suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "examen" or evaluacion.nota_parcial_nueva == "aprobado" or evaluacion.nota_parcial_nueva == "curso" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.proximo_cierre == "0" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.recuperacion %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.recuperacion }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='recuperacion'/>
               <span id='lblrecupera{{ asignadomateria.id }}'>  </span>
           </td>
    {% endif %}

{# hasta aqui con validaciones#}

{# este coddigo es cuando se quitan las validaciones    #}
{#     <td><input id='nota1{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n1 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n1 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n1'/></td>#}
{#     <td><input id='nota2{{ asigna    domateria.id }}' {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n2 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n2 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n2'/></td>#}
{#     <td><input id='nota3{{ asignadomateria.id }}' {% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n3 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n3 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n3'/></td>#}
{#     <td>#}
{#         <input onblur="verifica({{ asignadomateria.id }})" id='nota4{{ asignadomateria.id }}' {% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.n4 %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.n4 }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='n4'/>#}
{#         <span id='lblnota4{{ asignadomateria.id }}'>  </span>#}
{#     </td>#}
{#     <td>#}
{#         <input onblur="verifica({{ asignadomateria.id }})" id='examen{{ asignadomateria.id }}' {% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "noexamen" or evaluacion.nota_parcial_nueva == "recuperacion"%} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if asignadomateria.evaluacion.examen %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.examen }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='examen'/>#}
{#         <span id='lblexamen{{ asignadomateria.id }}'>  </span>#}
{#     </td>#}
{#     <td><b class='bigger'id='materiaasignada{{ asignadomateria.id }}parcial'>{% if evaluacion.examen >= min_exa %}{{ notaparcial }} {% endif %} </b></td>#}
{#     <td>#}
{#         <input onblur="verifica({{ asignadomateria.id }})" id='recupera{{ asignadomateria.id }}' {% if valida_deuda_exam_asist and not regnota and modulofinanzas and tienedeuda %}disabled="disabled"{% endif %}{% if asignadomateria.materia.cerrado %}disabled="disabled"{% endif %}{% if modulofinanzas and validardeuda and tienedeuda or  suspension or evaluacion.nota_parcial_nueva == "reprobado" or evaluacion.nota_parcial_nueva == "noexamen" %} disabled="disabled"{% endif %} type="text" class="nota input-mini bigger" style="{% if evaluacion.recuperacion %}background: yellow; font-weight: bold;{% endif %}" value="{{ evaluacion.recuperacion }}" maid='{{ asignadomateria.id }}' name='{{ asignadomateria.id }}' sel='recuperacion'/>#}
{#         <span id='lblrecupera{{ asignadomateria.id }}'>  </span>#}
{#     </td>#}
{# hasta aquiiii sin validaciones    #}

{#     <td><b class="bigger" id='materiaasignada{{ asignadomateria.id }}final'>{% if evaluacion.examen >= min_exa %}{{ notafinal }}{% endif %}</b></td>#}
     <td><b class="bigger" id='materiaasignada{{ asignadomateria.id }}final'>{{ notafinal }}</b></td>

{% endif %}

<script type="text/javascript">
    var min_aproba ={{ min_aproba }};
    var max_aproba ={{ max_aproba }};
    var min_recupera = {{ min_recupera }};
    var max_recupera = {{ max_recupera }};
    var min_exa = {{ min_exa }};
    var max_exa = {{ max_exa }};
    var min_exarecupera = {{ min_exarecupera }};
    var nota_aprobar = {{nota_para_aprobar }};

   function verifica(id){
       var exam=  parseInt($("#examen"+id).val());
       var recupera = parseInt($("#recupera"+id).val());
       var nota1= $("#nota1"+id).val();
       var nota2= $("#nota2"+id).val();
       var nota3= $("#nota3"+id).val();
       var nota4= $("#nota4"+id).val();
       var total=(parseInt(nota1)+parseInt(nota2)+parseInt(nota3)+parseInt(nota4));
       var total2=(parseInt(nota1)+parseInt(nota2)+parseInt(nota3)+parseInt(nota4)+exam);

       if ((total) == 0){
        $("#lblnota4"+id).html("<i class='icon-eye-open' title='En Curso'></i>");
       }else{
           if (total >= min_aproba ){
                $("#recupera"+id).attr("disabled","disabled");
                $("#examen"+id).removeAttr("disabled");
                $("#lblnota4"+id).html("<i class='icon-check' title='Dar Examen'></i>");
                if (total2 >= nota_aprobar ){
                     console.log('examen');
                     $("#lblexamen"+id).html("<i class='icon-check' title='Aprobado'></i>");
                     $("#recupera"+id).attr("disabled","disabled");
                }else{
                    $("#recupera"+id).attr("disabled","disabled");
                    $("#examen"+id).removeAttr("disabled","disabled");
                    $("#lblexamen"+id).html("<i class='icon-eye-open' title='Pasa a Recuperacion'></i>");
                }
           }else{
                 if (total2 >= min_recupera){
                    $("#examen"+id).removeAttr("disabled","disabled");
                    $("#recupera"+id).attr("disabled","disabled");
                    $("#lblnota4"+id).html("<i class='icon-eye-open' title='Pasa a Recuperacion'></i>");
                    console.log('recupera ' + total );
                 }else{
                     console.log('otro');
                     $("#examen"+id).removeAttr("disabled","disabled");
                     $("#recupera"+id).attr("disabled","disabled");
                     $("#lblnota4"+id).html("<i class='icon-asterisk' title='Reprobado'></i>");
                 }
           }
       }
{#       if ((recupera > 0) && (recupera < min_exarecupera)){#}
{#            $("#recupera"+id).val(0);#}
{#            $("#lblrecupera"+id).html("<i class='icon-pencil' title='Nota minima es 70'></i>");#}
{#            console.log($('recuperacion ' + recupera ));#}
{#       }#}
{#       else{#}
{#            $("#lblrecupera"+id).html("");#}
{#       }#}
{#    console.log($("#examen"+id).val())#}
    }
</script>
