{% extends 'basebs.html' %}
{% load sga_extras%}
{% block heading %}
    <link type='text/css' rel='stylesheet' href="/static/css/datepicker.css"/>
    <script src="/static/js/bootstrap-datepicker.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(function(){
            calcularhoralabor = function(validacalchor){
                var feinici =  new Date($("#feciniciopr").val().split('-')[0],parseInt($("#feciniciopr").val().split('-')[1])-1,$("#feciniciopr").val().split('-')[2]);
                var fefin =  new Date($("#fecfinpr").val().split('-')[0],parseInt($("#fecfinpr").val().split('-')[1])-1,$("#fecfinpr").val().split('-')[2]);
                if(feinici < fefin && $.trim($('#horiniprac').val()) != ''&& $.trim($('#horfinprac').val()) != ''){
                    if(parseFloat($("#horiniprac").val().replace(':','.')) < parseFloat($("#horfinprac").val().replace(':','.'))){
                        var diasdif= fefin.getTime()-feinici.getTime();
                        var dias = Math.round(diasdif/(1000*60*60*24));
                        var days = [ 'domingo','lunes','martes','miercoles', 'jueves', 'viernes', 'sabado'];
                        var conteo = 0;
                        var horas = calculardiferencia('#horiniprac','#horfinprac');
                        var segundos = (parseInt(horas.split(':')[0]) * 3600) + (parseInt(horas.split(':')[1]) * 60);
                        for (let x = 0; x < dias+1; x++) {
                            var dia = days[feinici.getUTCDay()];
                            if($("#"+dia).is(':checked')){
                                conteo = conteo + 1;
                            }
                            feinici.setDate(feinici.getDate() + 1);
                        }
                        if(conteo > 0){
                            segundos = segundos * conteo;
                            horas = transfhoras(segundos);
                            if(validacalchor){
                                var horprac1 = parseFloat('{{ HORAS_MIN_PRACTICAS }}');
                                var horprac2 = parseFloat('{{ HORAS_MIN_PRACTICAS }}') * 2;
                                var horprac3 = parseFloat('{{ HORAS_MIN_PRACTICAS }}') * 3;
                                var cantpract = parseInt('{{ escenariopractica.numero_practica }}');
                                if( parseFloat(horas.replace(':','.')) >=  horprac1 &&  parseFloat(horas.replace(':','.')) < horprac2 ){
                                    if(cantpract == 1){
                                        $("#pract1").show();
                                        $("#numprac1").attr('disabled',false);
                                        $("#numprac1").attr('checked',false);
                                        $("#pract2").hide();
                                        $("#numprac2").attr('disabled',true);
                                        $("#numprac2").attr('checked',false);
                                        $("#pract3").hide();
                                        $("#numprac3").attr('disabled',true);
                                        $("#numprac3").attr('checked',false);
                                    }
                                    else if(cantpract == 2){
                                        $("#pract1").hide();
                                        $("#numprac1").attr('disabled',true);
                                        $("#numprac1").attr('checked',false);
                                        $("#pract2").show();
                                        $("#numprac2").attr('disabled',false);
                                        $("#numprac2").attr('checked',false);
                                        $("#pract3").hide();
                                        $("#numprac3").attr('disabled',true);
                                        $("#numprac3").attr('checked',false);
                                    }else {
                                        $("#pract1").hide();
                                        $("#numprac1").attr('disabled',true);
                                        $("#numprac1").attr('checked',false);
                                        $("#pract2").hide();
                                        $("#numprac2").attr('disabled',true);
                                        $("#numprac2").attr('checked',false);
                                        $("#pract3").show();
                                        $("#numprac3").attr('disabled',false);
                                        $("#numprac3").attr('checked',false);
                                    }

                                }
                                else if(parseFloat(horas.replace(':','.')) >= horprac2 && parseFloat(horas.replace(':','.')) < horprac3 ){
                                    if(cantpract == 1){
                                        $("#pract1").show();
                                        $("#numprac1").attr('disabled',false);
                                        $("#numprac1").attr('checked',false);
                                        $("#pract2").show();
                                        $("#numprac2").attr('disabled',false);
                                        $("#numprac2").attr('checked',false);
                                        $("#pract3").hide();
                                        $("#numprac3").attr('disabled',true);
                                        $("#numprac3").attr('checked',false);
                                    }
                                    else if(cantpract == 2){
                                        $("#pract1").hide();
                                        $("#numprac1").attr('disabled',true);
                                        $("#numprac1").attr('checked',false);
                                        $("#pract2").show();
                                        $("#numprac2").attr('disabled',false);
                                        $("#numprac2").attr('checked',false);
                                        $("#pract3").show();
                                        $("#numprac3").attr('disabled',false);
                                        $("#numprac3").attr('checked',false);
                                    }else{
                                        $("#pract1").hide();
                                        $("#numprac1").attr('disabled',true);
                                        $("#numprac1").attr('checked',false);
                                        $("#pract2").hide();
                                        $("#numprac2").attr('disabled',true);
                                        $("#numprac2").attr('checked',false);
                                        $("#pract3").show();
                                        $("#numprac3").attr('disabled',false);
                                        $("#numprac3").attr('checked',false);
                                    }

                                }else  if(parseFloat(horas.replace(':','.')) >= horprac3){
                                    if(cantpract == 1){
                                        $("#pract1").show();
                                        $("#numprac1").attr('disabled',false);
                                        $("#numprac1").attr('checked',false);
                                        $("#pract2").show();
                                        $("#numprac2").attr('disabled',false);
                                        $("#numprac2").attr('checked',false);
                                        $("#pract3").show();
                                        $("#numprac3").attr('disabled',false);
                                        $("#numprac3").attr('checked',false);
                                    }
                                    else if(cantpract == 2){
                                        $("#pract1").hide();
                                        $("#numprac1").attr('disabled',true);
                                        $("#numprac1").attr('checked',false);
                                        $("#pract2").show();
                                        $("#numprac2").attr('disabled',false);
                                        $("#numprac2").attr('checked',false);
                                        $("#pract3").show();
                                        $("#numprac3").attr('disabled',false);
                                        $("#numprac3").attr('checked',false);
                                    }else{
                                        $("#pract1").hide();
                                        $("#numprac1").attr('disabled',true);
                                        $("#numprac1").attr('checked',false);
                                        $("#pract2").hide();
                                        $("#numprac2").attr('disabled',true);
                                        $("#numprac2").attr('checked',false);
                                        $("#pract3").show();
                                        $("#numprac3").attr('disabled',false);
                                        $("#numprac3").attr('checked',false);
                                    }

                                }else{
                                    cantpractfun1();
                                }
                            }
                            $("#horlabprac").val(horas);
                        }
                        else{
                            cantpractfun1();
                            $("#horlabprac").val('00:00');
                        }
                    }else{
                        cantpractfun1();
                        $("#horlabprac").val('00:00');
                    }
                }else{
                    cantpractfun1();
                    $("#horlabprac").val('00:00');
                }
            };
            add_row = function() {
                vali = 0;
                $("#ExpeLabAddForm tr").each(function (index) {
                    if ($(this).attr('con') > 0) {
                        if(parseInt($('#lugar' + $(this).attr('con')).attr('myval')) == 0 || $('#tiempo' + $(this).attr('con')).val() == '' || $('#funcion' + $(this).attr('con')).val() == '')
                            vali = 1;
                    }
                });
                if (vali == 0 ){
                    var newid = 0;
                    $.each($("#tab_logic #ExpeLabAddForm tr"), function () {
                        if (parseInt($(this).data("id")) > newid) {
                            newid = parseInt($(this).data("id"));
                        }
                    });
                    newid++;

                    var tr = $("<tr></tr>", {
                        id: "addr" + newid,
                        con: newid,
                        "data-id": newid
                    });
                    var col=0;
                    $.each($("#ExpeLabAddForm tr:nth(0) td"), function () {
                        var cur_td = $(this);
                        var children = cur_td.children();
                        // Añade el nuevo Elemento en la tabla.

                        if ($(this).data("name") != undefined) {
                            col++;
                            if(col>5) {
                                var td = $("<td></td>", {
                                    "data-name": $(cur_td).data("name"),
                                    "class": 'hidden'
                                });
                            }else{
                                var td = $("<td></td>", {
                                    "data-name": $(cur_td).data("name")
                                });
                            }



                            var c = '';
                            for(var x = 0;x < $(children).length;x++)
                            {
                                c = $(cur_td).find($(children[x]).prop('tagName')).clone().val("");
                                if($(children[x]).prop('tagName') != 'BR')
                                {
                                    c.attr("name", $(cur_td).data("name") + newid);
                                    c.attr("id", $(cur_td).data("name") + newid);
                                    c.attr("alt",newid);
                                }
                                c.appendTo($(td));
                                td.appendTo($(tr));
                            }


                        }else{
                            var td = $("<td></td>", {
                                'text': $('#ExpeLabAddForm tr').length
                            }).appendTo($(tr));
                        }
                    });

                    // Añade la nueva fila.
                    $(tr).appendTo($('#ExpeLabAddForm'));



                }
                else{
                    smoke.alert("Ingresar Valores antes de agregar fila");
                }
                $(tr).find("td button.row-remove").on("click", function (){
                    $(this).closest("tr").remove();
                    var c = 0;
                    $("#ExpeLabAddForm tr").each(function (index) {
                        c = c +1;
                    });
                    if (c <2)
                        add_row();

                });
            }


            add_rowreg = function() {
                vali = 0;
                $("#RegActivAddForm tr").each(function (index) {
                    if ($(this).attr('con') > 0) {
                        if($('#fechregact' + $(this).attr('con')).val() == '' || $('#actividadreg' + $(this).attr('con')).val() == '' || $('#hinicioreg' + $(this).attr('con')).val() == '' || $('#hfinreg' + $(this).attr('con')).val() == '')
                            vali = 1;
                    }
                });
                if (vali == 0 ){
                    var newid = 0;
                    $.each($("#tab_logic #RegActivAddForm tr"), function () {
                        if (parseInt($(this).data("id")) > newid) {
                            newid = parseInt($(this).data("id"));
                        }
                    });
                    newid++;

                    var tr = $("<tr></tr>", {
                        id: "addr" + newid,
                        con: newid,
                        "data-id": newid
                    });
                    var col=0;
                    $.each($("#RegActivAddForm tr:nth(0) td"), function () {
                        var cur_td = $(this);
                        var children = cur_td.children();
                        // Añade el nuevo Elemento en la tabla.

                        if ($(this).data("name") != undefined) {
                            col++;
                            if(col>6) {
                                var td = $("<td></td>", {
                                    "data-name": $(cur_td).data("name"),
                                    "class": 'hidden'
                                });
                            }else{
                                var td = $("<td></td>", {
                                    "data-name": $(cur_td).data("name")
                                });
                            }



                            var c = '';
                            for(var x = 0;x < $(children).length;x++)
                            {
                                c = $(cur_td).find($(children[x]).prop('tagName')).clone().val("");
                                if($(children[x]).prop('tagName') != 'BR')
                                {
                                    if($(cur_td).data("name")=='fechregact'){
                                        c.attr("value", '{{ fechahoy|date:"Y-m-d" }}');
                                    }
                                    c.attr("name", $(cur_td).data("name") + newid);
                                    c.attr("id", $(cur_td).data("name") + newid);
                                    c.attr("alt",newid);
                                }
                                c.appendTo($(td));
                                td.appendTo($(tr));
                            }


                        }else{
                            var td = $("<td></td>", {
                                'text': $('#RegActivAddForm tr').length
                            }).appendTo($(tr));
                        }
                    });

                    // Añade la nueva fila.
                    $(tr).appendTo($('#RegActivAddForm'));
                    $("#fechregact"+newid).datepicker({format:"yyyy-mm-dd"}).mask("9999-99-99").removeClass('input-small');


                }
                else{
                    smoke.alert("Ingresar Valores antes de agregar fila");
                }
                $(tr).find("td button.row-remove").on("click", function (){
                    $(this).closest("tr").remove();
                    var c = 0;
                    $("#RegActivAddForm tr").each(function (index) {
                        c = c +1;
                    });
                    if (c <2)
                        add_rowreg();

                });
            };




            var numerosdec="0123456789.";

            function solo_numerosdec(texto){
               var num = 0;
               for(i=0; i<texto.length; i++){
                  if (numerosdec.indexOf(texto.charAt(i),0)!=-1){
                      num = num +1;
                  }
               }
               return num;
            }

            valida_numerosdec = function(varobje){
                var num = $(varobje).val();
                if(num){
                    if (solo_numerosdec(num) != num.length){
                        smoke.alert('Ingrese solo numeros');
                        $(varobje).val('');
                        $(varobje).blur();
                    }
                }

            };

            var numeros="0123456789";

            function solo_numeros(texto){
               var num = 0;
               for(i=0; i<texto.length; i++){
                  if (numeros.indexOf(texto.charAt(i),0)!=-1){
                      num = num +1;
                  }
               }
               return num;
            }
            transformfecha = function(eval){
                var dd = eval.getDate();
                dd = (dd+'').padStart(2, "0");
                var mm = eval.getMonth()+1;
                mm = (mm+'').padStart(2, "0");
                var yyyy = eval.getFullYear();
                return yyyy + '-' + mm + '-' + dd;
            }
            nuevafecha = function(eval){
                return new Date(parseInt(eval.split('-')[0]),parseInt(eval.split('-')[1])-1,parseInt(eval.split('-')[2]))
            }
            valida_numeros = function(varobje){
                var num = $(varobje).val();
                if(num){
                    if (solo_numeros(num) != num.length){
                        if($(varobje).attr('id') == 'numdocumento')
                            smoke.alert('la cedula debe contener solo n&uacute;meros');
                        else
                            smoke.alert('Ingrese solo n&uacute;meros');
                        $(varobje).val('');
                        $(varobje).blur();
                    }
                }

            };

            function validate_fechaMayorQue(fechaInicial,fechaFinal)
            {
                valuesStart=fechaInicial.split("-");
                valuesEnd=fechaFinal.split("-");

                // Verificamos que la fecha no sea posterior a la actual
                var dateStart=new Date(valuesStart[0],(valuesStart[1]-1),valuesStart[2]);
                var dateEnd=new Date(valuesEnd[0],(valuesEnd[1]-1),valuesEnd[2]);
                if(dateStart>dateEnd)
                {
                    return true;
                }
                else
                    return false;
            }
            function esNumero(strNumber) {
                if (strNumber == null) return false;
                if (strNumber == undefined) return false;
                if (typeof strNumber === "number" && !isNaN(strNumber)) return true;
                if (strNumber == "") return false;
                if (strNumber === "") return false;
                var psInt, psFloat;
                psInt = parseInt(strNumber);
                psFloat = parseFloat(strNumber);
                return !isNaN(strNumber) && !isNaN(psFloat);
            }
{#            ///////////////////////////////////TYPEAHEAD///////////////////////////#}
{#            ///////////////////////////////////TYPEAHEAD///////////////////////////#}


            function validarEmail( email,idinema ) {
                expr = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                var cant = email.split(';').length;
                for (i=0;i<=cant-1;i++) {
                    if ( !expr.test(email.split(';')[i]) ){
                        $(idinema).val('');
                        smoke.alert("Error: La dirección de correo " + email.split(';')[i] + " es incorrecta.");
                        return false;
                    }else{
                        return true;
                    }
                }
            }

            $("#email").blur(function(){
                if($("#email").val())
                    validarEmail($("#email").val(),"#email")
            });
            var validos = " abcdefghijklmnopqrstuvwxyz0123456789-";

            function soloLetrasYNum(campo) {
               var letra;
               var bien = true;
               for (var i=0; i<campo.length; i++) {
                letra=campo.charAt(i).toLowerCase()
                if (validos.indexOf(letra) == -1){bien=false;};
               }
               if (!bien) {
                return 1;

               }else{
                 return 0;
               }
            }
            function readURL(input) {
              if (input.files && input.files[0]) { //Revisamos que el input tenga contenido
                var reader = new FileReader(); //Leemos el contenido

                reader.onload = function(e) { //Al cargar el contenido lo pasamos como atributo de la imagen de arriba
                  $('#prefotogen').attr('src', e.target.result);
                };

                reader.readAsDataURL(input.files[0]);
              }
            }
            $("#fotogen").change(function(){
                var prefotogen = document.querySelector("#prefotogen");
                $("#guardafotogen").hide();
                var x = document.getElementById("fotogen");
                var fileExt = x.value;
                var validExts = new Array(".png",".jpg");
                var fileExt1 = fileExt.substring(fileExt.lastIndexOf('.'));
                var nombre= fileExt.substring(fileExt.indexOf(x.files[0].name),fileExt.lastIndexOf('.'));
                if (parseInt(soloLetrasYNum(nombre))==1){
                    $("#fotogen").val('');
                    $($("#fotogen").get(0).parentNode).find(".help-text").html("<h6 style='color:red' >El Nombre del Archivo contiene Tilde, espacios en blanco o Caracteres Especiales</h6>");
                }else if (validExts.indexOf(fileExt1) < 0){
                    $("#fotogen").val('');
                    $($("#fotogen").get(0).parentNode).find(".help-text").html("<h6 style='color:red' >El formato del archivo solo debe ser png o jpg</h6>");
                }else{
                    readURL(this);
                    $("#guardafotogen").show();
                    $($("#fotogen").get(0).parentNode).find(".help-text").html("");
                }
            });
            var idsoliprac = 0;
            {% if solicitudpractica %}
                idsoliprac = '{{ solicitudpractica.id }}';

                var newid = 0;
                {% for ex  in solicitudpractica.experienciaslabo %}
                    add_row();
                    $("#lugar"+'{{ forloop.counter }}').attr('idexplab','{{ ex.id }}');

                    {% if ex.convenio %}
                        $('#convenio'+'{{ forloop.counter }}').attr('checked',true);
                        $('#lugar'+'{{ forloop.counter }}').val('{{ ex.convenio.flexbox_alias }}');
                        $('#lugar'+'{{ forloop.counter }}').attr('myval','{{ ex.convenio.id }}');
                    {% else %}
                        $('#convenio'+'{{ forloop.counter }}').attr('checked',false);
                        $('#lugar'+'{{ forloop.counter }}').val('{{ ex.sinconvenio.flexbox_alias }}');
                        $('#lugar'+'{{ forloop.counter }}').attr('myval','{{ ex.sinconvenio.id }}');
                    {% endif %}
                    $('#tiempo'+'{{ forloop.counter }}').val('{{ ex.tiempo }}');
                    $('#funcion'+'{{ forloop.counter }}').val('{{ ex.funcion }}');


                {% endfor %}

                {% for re  in solicitudpractica.regactividad %}
                    add_rowreg();
                    $("#fechregact"+'{{ forloop.counter }}').attr('myval','{{ re.id }}');
                    $("#fechregact"+'{{ forloop.counter }}').val('{{ re.fecha|date:'Y-m-d' }}');

                    $('#actividadreg'+'{{ forloop.counter }}').val('{{ re.actividad }}');
                    $('#observacionreg'+'{{ forloop.counter }}').val('{{ re.observacion }}');
                    $('#hinicioreg'+'{{ forloop.counter }}').val('{{ re.inicio|time:'H:i' }}');
                    $('#hfinreg'+'{{ forloop.counter }}').val('{{ re.fin|time:'H:i' }}');
                    var hlaborreg = calculardiferencia('#hinicioreg'+'{{ forloop.counter }}','#hfinreg'+'{{ forloop.counter }}');
                    $('#hlaborreg'+'{{ forloop.counter }}').val(hlaborreg);
                {% endfor %}


            {% else %}
                add_row();
                add_rowreg();
            {% endif %}
            $("#guardafotogen").click(function(){
                inputFileImage = document.getElementById("fotogen");
                file = inputFileImage.files[0];
                var data = new FormData();

                data.append('archivo',file);
                data.append('action','guardararchiv');
                data.append('idins','{{ inscripcion.id }}');
                data.append('idsoliprac',idsoliprac);
                data.append('idesc','{{ escenariopractica.id }}');
                var url = "/solicitud_practicasadm";
                showWaiting("Guardando informacion","Espere unos segundos por favor...");
                $.ajax({
                url:url,
                type:"POST",
                contentType:false,
                data:data,
                processData:false,
                cache:false,
                success: function(data)
                   {
                    if(data.result=="ok"){
                        smoke.alert(data.mensaje);
                        setInterval(function(){
                            $.unblockUI();
                            location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}&idsol='+data.idsoli;
                        }, 1800);
                    }
                    else{
                        smoke.alert(data.mensaje);
                    }
                    hideWaiting();
                   }
                })
            });

{#            ///////////////////////////////Guardar empresa ///////////////////////////////////////////#}
{#            //////////////////////////////////////////////////////////////////////////#}
            $("#agregaempresa").click(function(){
                $("#empresapanel").modal({backdrop: 'static', keyboard: 'false', width: "617px", maxHeight: ($(window).height()*3)/4 });
                $("#empresapanel").modal("show");
            });
            $(".btn-cerrarpanel").click(function(){
                $("#empresapanel").modal("hide");
            });
{#            ///////////////////////////GUARDRA ADDROW //////////////#}
{#            ///////////////////////////GUARDRA ADDROW //////////////#}




            buscar_provinciaempr = function(query, process) {
                $.get("/reportes", {'action':'datafilt', 'model': 'Provincia',
                                    'p': 1, 'q': query, 's': 10}, function(data) {
                    if (data.results.length > 0) {
                        $("#provinciaempre").get(0).results = data.results;
                        listing = [];
                        for (var i in data.results) {
                            var dato = data.results[i];
                            listing.push(dato.alias);
                        }
                        process(listing);
                    }
                    else{
                         $("#provinciaempre").attr("myval",0);
                         $("#provinciaempre").val("");
                         $("#ciudadempres").attr("myval","");
                         $("#ciudadempres").val("");
                         $("#ciudadempres").attr("readonly",true);
                         $("#provinciaempre").get(0).results = "";
                         listing = [];
                         process(listing);
                    }
                }, 'json');
            };

            $('#provinciaempre').typeahead({source: buscar_provinciaempr, updater: function(item) {
                var results = $("#provinciaempre").get(0).results;
                for (var i in results) {
                    var datos = results[i];
                    if (item==datos.alias) {
                        $("#provinciaempre").attr("myval",datos.id);
                        $("#ciudadempres").attr("readonly",false);
                    }
                }
                return item;
            }});

            buscar_ciudadempr = function(query, process) {
                $.get("/reportes", {'action':'datafilt', 'model': 'Canton:provincia__id='+$("#provinciaempre").attr("myval"),
                                    'p': 1, 'q': query, 's': 10}, function(data) {
                    if (data.results.length > 0) {
                        $("#ciudadempres").get(0).results = data.results;
                        listing = [];
                        for (var i in data.results) {
                            var dato = data.results[i];
                            listing.push(dato.alias);
                        }
                        process(listing);
                    }
                    else{
                         $("#ciudadempres").attr("myval","0");
                         $("#ciudadempres").get(0).results = "";
                         listing = [];
                         process(listing);
                    }
                }, 'json');
            };

            $('#ciudadempres').typeahead({source: buscar_ciudadempr, updater: function(item) {
                var results = $("#ciudadempres").get(0).results;
                for (var i in results) {
                    var datos = results[i];
                    if (item==datos.alias) {
                        $("#ciudadempres").attr("myval",datos.id);
                    }
                }
                return item;
            }});

            $('.btn-guardarempr').click(function() {
                $("#etiquetap").html("").removeClass("alert alert-danger");
                var valido = true;
                if($.trim($("#empresasin").val()) == ''){
                    valido = false;
                }
                else if($.trim($("#empresasin").val()) == ''){
                    valido = false;
                }
                else if($.trim($("#activempres").val()) == ''){
                    valido = false;
                }
                else if($.trim($("#direcciempres").val()) == ''){
                    valido = false;
                }
                else if(parseInt($("#provinciaempre").attr("myval")) == 0){
                    valido = false;
                }
                else if(parseInt($("#ciudadempres").attr("myval")) == 0){
                    valido = false;
                }
                if(valido){
                    $("#empresapanel").modal("hide");
                    var idciudaemp = $("#ciudadempres").attr("myval");
                    var direcemp = $("#direcciempres").val();
                    var actempre = $("#activempres").val();
                    var nomempres = $("#empresasin").val();
                    var rucempr = $("#rucempre").val();
                    showWaiting("Guardando información", "espere un momento por favor...");
                    $.post("/solicitud_practicasadm", {"action":'guardarempresa', "ruc": rucempr, "nomempres": nomempres, "actempre": actempre, "direcemp": direcemp, "idciudaemp": idciudaemp}, function(data) {
                        hideWaiting();
                        if (data.result=='ok') {
                            smoke.alert("Registro Ingresado");
                            setInterval(function(){
                                $.unblockUI();
                                if(idsoliprac > 0)
                                    location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}&idsol='+idsoliprac;
                                else
                                    location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}';
                            }, 1800);
                        }else{

                            $("#empresapanel").modal({backdrop: 'static', keyboard: 'false', width: "617px", maxHeight: ($(window).height()*3)/4 });
                            $("#empresapanel").modal("show");
                            $("#etiquetap").html(data.mensaje).addClass("alert alert-danger");
                        }

                    }, "json");

                }else{
                    $("#etiquetap").html("Faltan datos por ingresar, debe llenar todos los campos").addClass("alert alert-danger");
                }
            });



{#            /////////////////////////////////////////////////////////////////////////////////#}
{#            /////////////////////////////////////////////////////////////////////////////////#}

            buscar_provinciaemprrec = function(query, process) {
                $.get("/reportes", {'action':'datafilt', 'model': 'Provincia',
                                    'p': 1, 'q': query, 's': 10}, function(data) {
                    if (data.results.length > 0) {
                        $("#provinciarec").get(0).results = data.results;
                        listing = [];
                        for (var i in data.results) {
                            var dato = data.results[i];
                            listing.push(dato.alias);
                        }
                        process(listing);
                    }
                    else{
                         $("#provinciarec").attr("myval",0);
                         $("#provinciarec").val("");
                         $("#ciudadrec").attr("myval","");
                         $("#ciudadrec").val("");
                         $("#ciudadrec").attr("readonly",true);
                         $("#provinciarec").get(0).results = "";
                         listing = [];
                         process(listing);
                    }
                }, 'json');
            };

            $('#provinciarec').typeahead({source: buscar_provinciaemprrec, updater: function(item) {
                var results = $("#provinciarec").get(0).results;
                for (var i in results) {
                    var datos = results[i];
                    if (item==datos.alias) {
                        $("#provinciarec").attr("myval",datos.id);
                        $("#ciudadrec").attr("readonly",false);
                    }
                }
                return item;
            }});

            buscar_ciudademprrec = function(query, process) {
                $.get("/reportes", {'action':'datafilt', 'model': 'Canton:provincia__id='+$("#provinciarec").attr("myval"),
                                    'p': 1, 'q': query, 's': 10}, function(data) {
                    if (data.results.length > 0) {
                        $("#ciudadrec").get(0).results = data.results;
                        listing = [];
                        for (var i in data.results) {
                            var dato = data.results[i];
                            listing.push(dato.alias);
                        }
                        process(listing);
                    }
                    else{
                         $("#ciudadrec").attr("myval","0");
                         $("#ciudadrec").get(0).results = "";
                         listing = [];
                         process(listing);
                    }
                }, 'json');
            };

            $('#ciudadrec').typeahead({source: buscar_ciudademprrec, updater: function(item) {
                var results = $("#ciudadrec").get(0).results;
                for (var i in results) {
                    var datos = results[i];
                    if (item==datos.alias) {
                        $("#ciudadrec").attr("myval",datos.id);
                    }
                }
                return item;
            }});
            var emprsinconval = false;
            $('#rucent').blur(function() {
                emprsinconval = false;
                $("#advruc").html("").removeClass("alert alert-danger");
                if($('#rucent').val()!=''){
                    showWaiting("Buscando información", "espere un momento por favor...");
                    $.post("/solicitud_practicasadm", {"action":'buscarempresa', "ruc": $('#rucent').val()}, function(data) {
                        hideWaiting();
                        if (data.result=='ok') {
                            $("#entidadrec").val(data.mensaje);
                            $("#rucent").attr("myval",data.idempresacon);
                            $("#actividaent").val(data.actividad);
                            $("#provinciarec").attr("myval",data.idprov);
                            $("#provinciarec").val(data.provincia);
                            $("#direccionent").val(data.direccion);
                            $("#ciudadrec").attr("myval",data.idciu);
                            $("#ciudadrec").val(data.ciudad);
                            $("#entidadrec").attr("disabled",true);
                            $("#actividaent").attr("disabled",true);
                            $("#provinciarec").attr("disabled",true);
                            $("#direccionent").attr("disabled",true);
                            $("#ciudadrec").attr("disabled",true);
                        }else{
                            if(data.result=='existe'){
                                $("#advruc").html("ADVERTENCIA: El ruc ingresado ya se encuentra como empresa sin convenio, al guardar la ficha la empresa tambien se guardara como empresa con convenio").addClass("alert alert-danger");
                                emprsinconval = true;
                                $("#entidadrec").val(data.mensaje);
                                $("#rucent").attr("myval",0);
                                $("#actividaent").val(data.actividad);
                                $("#provinciarec").attr("myval",data.idprov);
                                $("#provinciarec").val(data.provincia);
                                $("#direccionent").val(data.direccion);
                                $("#ciudadrec").attr("myval",data.idciu);
                                $("#ciudadrec").val(data.ciudad);
                                $("#entidadrec").attr("disabled",false);
                                $("#actividaent").attr("disabled",false);
                                $("#provinciarec").attr("disabled",false);
                                $("#direccionent").attr("disabled",false);
                                $("#ciudadrec").attr("disabled",false);
                            }else{
                                $("#entidadrec").val("");
                                $("#entidadrec").attr("disabled",false);
                                $("#actividaent").val("");
                                $("#actividaent").attr("disabled",false);
                                $("#rucent").attr("myval",0);
                                $("#provinciarec").attr("myval",0);
                                $("#provinciarec").attr("disabled",false);
                                $("#provinciarec").val("");
                                $("#direccionent").val("");
                                $("#direccionent").attr("disabled",false);
                                $("#ciudadrec").attr("myval",0);
                                $("#ciudadrec").val("");
                                $("#ciudadrec").attr("disabled",false);
                            }
                        }

                    }, "json");
                }
            });

            var numeroshor="0123456789:";

            function tiene_numeros(texto){
               var num = 0;
               for(i=0; i<texto.length; i++){
                  if (numeroshor.indexOf(texto.charAt(i),0)!=-1){
                      num = num +1;
                  }
               }
               return num;
            }

            $("#horiniprac").blur(function(){
                var v = $("#horiniprac").val();
                var p = tiene_numeros(v);
                if(v!=''){
                    if (v.split(':').length == 2 ){
                        if (p != v.length | v.split(':')[0].length < 2 | v.split(':')[1].length < 2 | v.split(':').length > 2 | parseInt(v.split(':')[1])> 59)
                        {
                          $("#phoriniprac").html("Ingresar solo  Numeros, Recuerde el formato es 00:00 y los minutos deben ser  menor a 60");
                          $("#horiniprac").focus();
                          $("#horiniprac").val("");
                        }
                        else{
                            if($("#horfinprac").val() != ''){
                                if(parseFloat($("#horiniprac").val().replace(':','.')) >= parseFloat($("#horfinprac").val().replace(':','.'))){
                                    $("#phoriniprac").html("Las horas de inicio debe ser menor a las del fin de la practica ");
                                    $("#horiniprac").val('');
                                    $("#horiniprac").focus();
                                }else{
                                    $("#phoriniprac").html("");
                                    var horas = calculardiferencia('#horiniprac','#horfinprac');
                                    if(parseFloat('{{ HORAS_MAX_LABORA }}'.replace(':','.')) < parseFloat(horas.replace(':','.'))){
                                        $("#phorfinprac").html("Las horas a laborar debe ser menores a {{ HORAS_MAX_LABORA }}");
                                        $("#horfinprac").val('');
                                        $("#horfinprac").focus();
                                    }

                                }
                            }else{
                                $("#phoriniprac").html("");
                            }

                        }
                    }
                    else{
                          $("#phoriniprac").html("Ingresar solo  Numeros, Recuerde el formato es 00:00 y los minutos deben ser  menor a 60");
                          $("#horiniprac").focus();
                          $("#horiniprac").val("");
                        }
                }
                else{
                    $("#phoriniprac").html("");
                }
                calcularhoralabor(true);
            });

            $("#horfinprac").blur(function(){
                var v = $("#horfinprac").val();
                var p = tiene_numeros(v);
                if(v!=''){
                    if (v.split(':').length == 2 ){
                        if (p != v.length | v.split(':')[0].length < 2 | v.split(':')[1].length < 2 | v.split(':').length > 2 | parseInt(v.split(':')[1])> 59)
                        {
                          $("#phorfinprac").html("Ingresar solo  Numeros, Recuerde el formato es 00:00 y los minutos deben ser  menor a 60");
                          $("#horfinprac").focus();
                          $("#horfinprac").val("");
                        }
                        else{
                            if($("#horiniprac").val() != ''){
                                if(parseFloat($("#horiniprac").val().replace(':','.')) >= parseFloat($("#horfinprac").val().replace(':','.'))){
                                    $("#phorfinprac").html("Las horas de inicio debe ser menor a las del fin de la practica");
                                    $("#horfinprac").val('');
                                    $("#horfinprac").focus();
                                }else{
                                    $("#phorfinprac").html("");
                                    var horas = calculardiferencia('#horiniprac','#horfinprac');
                                    if(parseFloat('{{ HORAS_MAX_LABORA }}'.replace(':','.')) < parseFloat(horas.replace(':','.'))){
                                        $("#phorfinprac").html("Las horas a laborar debe ser menores a {{ HORAS_MAX_LABORA }}");
                                        $("#horfinprac").val('');
                                        $("#horfinprac").focus();
                                    }
                                }
                            }else{
                                $("#phorfinprac").html("");
                            }
                        }
                    }
                    else{
                          $("#phorfinprac").html("Ingresar solo  Numeros, Recuerde el formato es 00:00 y los minutos deben ser  menor a 60");
                          $("#horfinprac").focus();
                          $("#horfinprac").val("");
                        }
                }
                else{
                    $("#phorfinprac").html("");
                }
                calcularhoralabor(true);
            });
            $("#feciniciopr").datepicker({format:"yyyy-mm-dd"}).mask("9999-99-99");
            $("#fecfinpr").datepicker({format:"yyyy-mm-dd"}).mask("9999-99-99");
            $("#emailtut").blur(function(){
                if($("#emailtut").val())
                    if(validarEmail($("#emailtut").val(),"#emailtut")){
                        $.post("/solicitud_practicasadm", {"action":'buscartutempr',"emailtut":$("#emailtut").val()}, function(data) {
                            hideWaiting();
                            if (data.result=='ok') {
                                $("#nomtutrec").val(data.supervisor);
                                $("#cargorec").val(data.cargo);
                                $("#convenrec").val(data.telefono);
                                $("#extensionrec").val(data.extension);
                                $("#celularrec").val(data.celular);
                            }else{
                                $("#nomtutrec").val("");
                                $("#cargorec").val("");
                                $("#convenrec").val("");
                                $("#extensionrec").val("");
                                $("#celularrec").val("");
                            }
                        }, "json");
                    }else{
                        $("#nomtutrec").val("");
                        $("#cargorec").val("");
                        $("#convenrec").val("");
                        $("#extensionrec").val("");
                        $("#celularrec").val("");
                    }
            });

            function newDate(partes) {
                var date = new Date(0);
                date.setHours(partes[0]);
                date.setMinutes(partes[1]);
                return date;
            }

            function prefijo(num) {
                return num < 10 ? ("0" + num) : num;
            }

            function calculardiferencia(idhorini,idhorfin){
              var dateDesde = newDate($(idhorini).val().split(":"));
              var dateHasta = newDate($(idhorfin).val().split(":"));

              var minutos = (dateHasta - dateDesde)/1000/60;
              var horas = Math.floor(minutos/60);
              minutos = minutos % 60;

              return prefijo(horas) + ':' + prefijo(minutos);
            }


            $("#guardfichrecpt").click(function(){
                $("#guardfichrecpt").hide();
                $("#cancelfichrecpt").hide();
                var datos = {};
                datos.solicitudid = 0;
                datos.idinscripcion = '{{ inscripcion.id }}';
                {% if solicitudpractica %}
                    datos.solicitudid = '{{ solicitudpractica.id }}';
                {% endif %}
                datos.fichrecepid = 0;
                {% if solicitudpractica.fichaentidadrec %}
                    datos.fichrecepid = '{{ solicitudpractica.fichaentidadrec.id }}';
                {% endif %}
                datos.idempresa = $('#rucent').attr("myval");
                $("#pdiasseman").html("");
                $("#pfeciniciopr").html("");
                $("#pfecfinpr").html("");
                $("#phoriniprac").html("");
                $("#phorfinprac").html("");
                $("#pnomtutrec").html("");
                $("#pcargorec").html("");
                $("#pnumprac").html("");
                $("#pconvenrec").html("");
                $("#pcelularrec").html("");
                $("#pemailtut").html("");
                $("#pdiasseman").html("");
                var idempr = $('#rucent').attr("myval");
                var valido = true;
                var diavalid = false;
                var lunes = false;
                var martes = false;
                var miercoles = false;
                var jueves = false;
                var viernes = false;
                var sabado = false;
                var domingo = false;
                if($.trim($('#feciniciopr').val()) == '' ){
                    $('#pfeciniciopr').html("Ingrese la fecha de incio");
                    valido = false;
                }
                if($.trim($('#fecfinpr').val()) == '' ){
                    $('#pfecfinpr').html("Ingrese la fecha de fin");
                    valido = false;
                }
                if($.trim($('#rucent').val()) == '' ){
                    $('#prucent').html("Ingrese el ruc de la empresa");
                    valido = false;
                }else{
                    $('#prucent').html("");
                }
                if($.trim($('#horiniprac').val()) == '' ){
                    $('#phoriniprac').html("Ingrese la hora de inicio");
                    valido = false;
                }
                if($.trim($('#horfinprac').val()) == '' ){
                    $('#phorfinprac').html("Ingrese la hora de fin");
                    valido = false;
                }
                if( parseFloat($("#horlabprac").val().replace(':','.')) <  parseFloat({{ HORAS_MIN_PRACTICAS }}) ){
                    smoke.alert("Las horas a laborar deben ser mayor a {{ HORAS_MIN_PRACTICAS }}");
                    valido = false;
                }
                else if(!$("#numprac1").is(':checked') && !$("#numprac2").is(':checked') && !$("#numprac3").is(':checked') ){
                    valido = false;
                    smoke.alert('debe seleccionar el número de la práctica')
                }
                if($.trim($('#nomtutrec').val()) == '' ){
                    $('#pnomtutrec').html("Ingrese el nombre del tutor");
                    valido = false;
                }
                if($.trim($('#cargorec').val()) == '' ){
                    $('#pcargorec').html("Ingrese el cargo del tutor");
                    valido = false;
                }
{#                if($.trim($('#numprac').val()) == '' ){#}
{#                    $('#pnumprac').html("Ingrese el número de las parcticas");#}
{#                    valido = false;#}
{#                }#}
                if($.trim($('#convenrec').val()) == '' && $.trim($('#celularrec').val()) == ''){
                    $('#pconvenrec').html("Ingrese el télefono convencional");
                    valido = false;
                }
                if($.trim($('#celularrec').val()) == '' && $.trim($('#convenrec').val()) == '' ){
                    $('#pcelularrec').html("Ingrese el celular");
                    valido = false;
                }
                if($.trim($('#emailtut').val()) == '' ){
                    $('#pemailtut').html("Ingrese el email del tutor");
                    valido = false;
                }
                if($.trim($('#entidadrec').val()) == '' ){
                    $('#pentidadrec').html("Ingrese el nombre de empresa");
                    valido = false;
                }else{
                    $('#pentidadrec').html("");
                }
                if($.trim($('#actividaent').val()) == '' ){
                    $('#pactividaent').html("Ingrese la actividad economica principal");
                    valido = false;
                }else{
                    $('#pactividaent').html("");
                }
                if($.trim($('#direccionent').val()) == '' ){
                    $('#pdireccionent').html("Ingrese la dirección de la empresa");
                    valido = false;
                }else{
                    $('#pdireccionent').html("");
                }
                if(parseInt($('#provinciarec').attr("myval")) == 0 ){
                    $('#pprovinciarec').html("Ingrese la provincia de la empresa");
                    valido = false;
                }else{
                    $('#pprovinciarec').html("");
                }
                if(parseInt($('#ciudadrec').attr("myval")) == 0 ){
                    $('#pciudadrec').html("Ingrese la ciudad de la empresa");
                    valido = false;
                }else{
                    $('#pciudadrec').html("");
                }
                if ($("#lunes").is(':checked')) {
                    diavalid = true;
                    lunes = true;
                }
                if ($("#martes").is(':checked')) {
                    diavalid = true;
                    martes = true;
                }
                if ($("#miercoles").is(':checked')) {
                    diavalid = true;
                    miercoles = true;
                }
                if ($("#jueves").is(':checked')) {
                    diavalid = true;
                    jueves = true;
                }
                if ($("#viernes").is(':checked')) {
                    viernes = true;
                    diavalid = true;
                }
                if ($("#sabado").is(':checked')) {
                    sabado = true;
                    diavalid = true;
                }
                if ($("#domingo").is(':checked')) {
                    domingo = true;
                    diavalid = true;
                }
                if(!diavalid){
                    $("#pdiasseman").html("Escoga la jornada laboral");
                }
                if(valido && diavalid){
                    datos.empresa =[];
                    if(parseInt(idempr)==0){
                        datos.empresa.push({'ruc':$('#rucent').val(),'entidadrec':$('#entidadrec').val(),
                            'actividaent':$('#actividaent').val(),'direccionent':$('#direccionent').val(),
                            'ciudadrec':$('#ciudadrec').attr('myval')});
                    }
                    datos.informacion = [];
                    var numprac = '';
                    if($("#numprac1").is(':checked')){
                        if($("#numprac3").is(':checked')){
                            numprac = '1,2,3'
                        }else if($("#numprac2").is(':checked')){
                            numprac = '1,2'
                        }else{
                            numprac = '1'
                        }
                    }else if($("#numprac2").is(':checked')){
                        if($("#numprac3").is(':checked')){
                            numprac = '2,3'
                        }
                        else{
                            numprac = '2'
                        }
                    }
                    else if($("#numprac3").is(':checked')){
                        if($("#numprac1").is(':checked')){
                            numprac = '1,2,3'
                        }else if($("#numprac2").is(':checked')){
                            numprac = '2,3'
                        }else{
                            numprac = '3'
                        }
                    }
                    var horas = calculardiferencia('#horiniprac','#horfinprac');
                    datos.informacion.push({'feinicio':$('#feciniciopr').val(),'fefin':$('#fecfinpr').val(),'horas':horas,'hini':$('#horiniprac').val(),'hfin':$('#horfinprac').val()
                                            ,'nomtutot':$('#nomtutrec').val(),'cargotut':$('#cargorec').val()
                                            ,'numprac':numprac,'convencional':$('#convenrec').val()
                                            ,'extensionrec':$('#extensionrec').val(),'celularrec':$('#celularrec').val(),'emailtut':$('#emailtut').val()});
                    datos.jornadalab = [];
                    datos.jornadalab.push({'lunes':lunes,'martes':martes,'miercoles':miercoles,'jueves':jueves
                                           ,'viernes':viernes,'sabado':sabado,'domingo':domingo});
                    showWaiting("Guardando información", "espere un momento por favor...");
                    $.post("/solicitud_practicasadm", {"action":'guardarfichrecp', "datos": JSON.stringify(datos),'idesc':'{{ escenariopractica.id }}',"idesc":'{{ escenariopractica.id }}'}, function(data) {
                        hideWaiting();
                        if (data.result=='ok') {
                            smoke.alert("Registro Ingresado");
                            var idsolg = data.idsol;
                            setInterval(function(){
                                $.unblockUI();
                                location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}&idsol='+idsolg+'&fire=1';
                            }, 1800);
                        }else{
                            $("#guardfichrecpt").show();
                            $("#cancelfichrecpt").show();
                            smoke.alert("Error al Guardar, intentelo nuevamente");
                        }

                    }, "json").fail(function() {
                                    hideWaiting();
                                    smoke.alert('Error de conexi&oacute;n');
                          });
                }else{
                    $("#guardfichrecpt").show();
                    $("#cancelfichrecpt").show();
                }

            });


            {% if reac %}
                $("#tabregactiv").click();
            {% endif %}
{#            //////////////////////BLOQUEAR FICHA RECEPTORA////////////////////////////////////////////////////////////////#}
{#            //////////////////////////////////////////////////////////////////////////////////////#}

            bloquearfichrecep = function(){
                $("#guardfichrecpt").hide();
                $("#cancelfichrecpt").hide();
                $("#editfichrecpt").show();
                {% if solicitudpractica.fichaentidadrec %}
                    $('#rucent').attr("disabled",true);
                    {% if solicitudpractica.fichaentidadrec.sinconvenio %}
                        $('#rucent').attr("myval",'{{ solicitudpractica.fichaentidadrec.sinconvenio.id }}');
                        $('#rucent').val('{{ solicitudpractica.fichaentidadrec.sinconvenio.ruc  }}');
                        {% if solicitudpractica.fichaentidadrec.sinconvenio.estadoempresa %}
                            $('#estadoemprfich').val('{{ solicitudpractica.fichaentidadrec.sinconvenio.estadoempresa.id  }}');
                            $('#editemestad').show();
                        {% else %}
                            $('#estadoemprfich').attr("disabled",false);
                        {% endif %}
                        $('#entidadrec').val('{{ solicitudpractica.fichaentidadrec.sinconvenio.nombre  }}');
                        $('#actividaent').val('{{ solicitudpractica.fichaentidadrec.sinconvenio.activideconomica  }}');
                        $('#direccionent').val('{{ solicitudpractica.fichaentidadrec.sinconvenio.direccion  }}');
                        $('#provinciarec').attr('myval','{{ solicitudpractica.fichaentidadrec.sinconvenio.ciudad.provincia.id  }}');
                        $('#provinciarec').val('{{ solicitudpractica.fichaentidadrec.sinconvenio.ciudad.provincia.nombre  }}');
                        $('#ciudadrec').attr('myval','{{ solicitudpractica.fichaentidadrec.sinconvenio.ciudad.id  }}');
                        $('#ciudadrec').val('{{ solicitudpractica.fichaentidadrec.sinconvenio.ciudad.nombre  }}');
                    {% else %}
                        $('#rucent').attr("myval",'{{ solicitudpractica.fichaentidadrec.convenio.id }}');
                        $('#rucent').val('{{ solicitudpractica.fichaentidadrec.convenio.ruc  }}');
                        $('#entidadrec').val('{{ solicitudpractica.fichaentidadrec.convenio.nombre  }}');
                        $('#actividaent').val('{{ solicitudpractica.fichaentidadrec.convenio.activideconomica  }}');
                        $('#direccionent').val('{{ solicitudpractica.fichaentidadrec.convenio.direccion  }}');
                        $('#direccionent').val('{{ solicitudpractica.fichaentidadrec.convenio.direccion  }}');
                        $('#provinciarec').attr('myval','{{ solicitudpractica.fichaentidadrec.convenio.ciudad.provincia.id  }}');
                        $('#provinciarec').val('{{ solicitudpractica.fichaentidadrec.convenio.ciudad.provincia.nombre  }}');
                        $('#ciudadrec').attr('myval','{{ solicitudpractica.fichaentidadrec.convenio.ciudad.id  }}');
                        $('#ciudadrec').val('{{ solicitudpractica.fichaentidadrec.convenio.ciudad.nombre  }}');
                    {% endif %}
                    $('#feciniciopr').val('{{ solicitudpractica.fichaentidadrec.inicio|date:'Y-m-d' }}').datepicker('update').removeClass('input-small');
                    $('#feciniciopr').attr("disabled",true);
                    $('#entidadrec').attr("disabled",true);
                    $('#fecfinpr').val('{{ solicitudpractica.fichaentidadrec.fin|date:'Y-m-d' }}').datepicker('update').removeClass('input-small');
                    $('#fecfinpr').attr("disabled",true);
                    $('#horiniprac').val('{{ solicitudpractica.fichaentidadrec.horainicio|time:'H:i' }}');
                    $('#horiniprac').attr("disabled",true);
                    $('#horfinprac').val('{{ solicitudpractica.fichaentidadrec.horafin|time:'H:i' }}');
                    $('#horfinprac').attr("disabled",true);
                    $('#nomtutrec').val('{{ solicitudpractica.fichaentidadrec.supervisor }}');
                    $('#nomtutrec').attr("disabled",true);
                    $('#cargorec').val('{{ solicitudpractica.fichaentidadrec.cargo }}');
                    $('#cargorec').attr("disabled",true);

                    {% if solicitudpractica.fichaentidadrec.telefono  %}
                        $('#convenrec').val('{{ solicitudpractica.fichaentidadrec.telefono }}');
                        $('#convenrec').attr("disabled",true);
                    {% endif %}
                    {% if solicitudpractica.fichaentidadrec.extension  %}
                        $('#extensionrec').val('{{ solicitudpractica.fichaentidadrec.extension }}');
                        $('#extensionrec').attr("disabled",true);
                    {% endif %}
                    {% if solicitudpractica.fichaentidadrec.celular  %}
                        $('#celularrec').val('{{ solicitudpractica.fichaentidadrec.celular }}');
                        $('#celularrec').attr("disabled",true);
                    {% endif %}
                    $('#emailtut').val('{{ solicitudpractica.fichaentidadrec.correo }}');
                    $('#emailtut').attr("disabled",true);

                    $('#lunes').attr("disabled",true);
                    {% if solicitudpractica.fichaentidadrec.lunes  %}
                        $('#lunes').val('{{ solicitudpractica.fichaentidadrec.lunes }}');
                        $('#lunes').attr("checked",true);
                    {% endif %}
                    $('#martes').attr("disabled",true);
                    {% if solicitudpractica.fichaentidadrec.martes  %}
                        $('#martes').val('{{ solicitudpractica.fichaentidadrec.martes }}');
                        $('#martes').attr("checked",true);
                    {% endif %}
                    $('#miercoles').attr("disabled",true);
                    {% if solicitudpractica.fichaentidadrec.miercoles  %}
                        $('#miercoles').val('{{ solicitudpractica.fichaentidadrec.miercoles }}');
                        $('#miercoles').attr("checked",true);
                    {% endif %}
                    $('#jueves').attr("disabled",true);
                    {% if solicitudpractica.fichaentidadrec.jueves  %}
                        $('#jueves').val('{{ solicitudpractica.fichaentidadrec.viernes }}');
                        $('#jueves').attr("checked",true);
                    {% endif %}
                    $('#viernes').attr("disabled",true);
                    {% if solicitudpractica.fichaentidadrec.viernes  %}
                        $('#viernes').val('{{ solicitudpractica.fichaentidadrec.viernes }}');
                        $('#viernes').attr("checked",true);
                    {% endif %}
                    $('#sabado').attr("disabled",true);
                    {% if solicitudpractica.fichaentidadrec.sabado  %}
                        $('#sabado').val('{{ solicitudpractica.fichaentidadrec.sabado }}');
                        $('#sabado').attr("checked",true);
                    {% endif %}
                    $('#domingo').attr("disabled",true);
                    {% if solicitudpractica.fichaentidadrec.domingo  %}
                        $('#domingo').val('{{ solicitudpractica.fichaentidadrec.domingo }}');
                        $('#domingo').attr("checked",true);
                    {% endif %}
                    calcularhoralabor(false);
                    /////////////////horas pract ////////////////////////////////////////
                    var horprac1 = parseFloat('{{ HORAS_MIN_PRACTICAS }}');
                    var horprac2 = parseFloat('{{ HORAS_MIN_PRACTICAS }}') * 2;
                    var horprac3 = parseFloat('{{ HORAS_MIN_PRACTICAS }}') * 3;
                    var horlabprac = parseFloat($("#horlabprac").val());
                    var numpract = '{{ solicitudpractica.fichaentidadrec.cantidad }}';
                    for (let x = 0; x < numpract.split(',').length; x++) {
                        var numpracfor = parseInt(numpract.split(',')[x]);
                        if(numpracfor == 1){
                            $("#numprac1").attr('checked',true);
                            $("#numprac1").attr('disabled',true);
                            if(horlabprac >= horprac1 && horlabprac < horprac2){
                                $("#pract1").show();
                            }
                            if(horlabprac >= horprac2 && horlabprac < horprac3){
                                $("#pract1").show();
                                $("#pract2").show();
                                $("#numprac2").attr('checked',false);
                                $("#numprac2").attr('disabled',true);
                            }
                            if(horlabprac >= horprac3){
                                $("#pract1").show();
                                $("#pract2").show();
                                $("#numprac2").attr('checked',false);
                                $("#numprac2").attr('disabled',true);
                                $("#pract3").show();
                                $("#numprac3").attr('checked',false);
                                $("#numprac3").attr('disabled',true);
                            }
                        }
                        if(numpracfor == 2){
                            $("#numprac2").attr('checked',true);
                            $("#numprac2").attr('disabled',true);
                            if(horlabprac >= horprac2 && horlabprac < horprac3){
                                $("#pract2").show();
                            }
                            if(horlabprac >= horprac3){
                                $("#pract2").show();
                                $("#pract3").show();
                                $("#numprac3").attr('checked',false);
                                $("#numprac3").attr('disabled',true);
                            }
                        }
                        if(numpracfor == 3){
                            $("#numprac3").attr('checked',true);
                            $("#numprac3").attr('disabled',true);
                            if(horlabprac >= horprac3){
                                $("#pract3").show();
                            }
                        }
                    }

                {% endif %}
            };
            desbloquearfichrecep = function(){
                $("#editfichrecpt").hide();
                $("#cancelfichrecpt").show();
                $("#guardfichrecpt").show();
                $('#entidadrec').attr("disabled",false);
                $('#rucent').attr("disabled",false);
                $('#feciniciopr').attr("disabled",false);
                $('#fecfinpr').attr("disabled",false);
                $('#horiniprac').attr("disabled",false);
                $('#horfinprac').attr("disabled",false);
                $('#nomtutrec').attr("disabled",false);
                $('#cargorec').attr("disabled",false);
                var horprac1 = parseFloat('{{ HORAS_MIN_PRACTICAS }}');
                var horprac2 = parseFloat('{{ HORAS_MIN_PRACTICAS }}') * 2;
                var horprac3 = parseFloat('{{ HORAS_MIN_PRACTICAS }}') * 3;
                var horlabprac = parseFloat($("#horlabprac").val());
                var numpract = '{{ solicitudpractica.fichaentidadrec.cantidad }}';
                for (let x = 0; x < numpract.split(',').length; x++) {
                    var numpracfor = numpract.split(',')[x];
                    if(numpracfor == 1){
                        if(horlabprac >= horprac1 && horlabprac < horprac2){
                            $("#pract1").show();
                            $("#numprac1").attr('disabled',false);
                        }
                        if(horlabprac >= horprac2 && horlabprac < horprac3){
                            $("#pract1").show();
                            $("#numprac1").attr('disabled',false);
                            $("#pract2").show();
                            $("#numprac2").attr('disabled',false);
                        }
                        if(horlabprac >= horprac3){
                            $("#pract1").show();
                            $("#numprac1").attr('disabled',false);
                            $("#pract2").show();
                            $("#numprac2").attr('disabled',false);
                            $("#pract3").show();
                            $("#numprac3").attr('disabled',false);
                        }
                    }
                    if(numpracfor == 2){
                        if(horlabprac >= horprac2 && horlabprac < horprac3){
                            $("#pract2").show();
                            $("#numprac2").attr('disabled',false);
                        }
                        if(horlabprac >= horprac3){
                            $("#pract2").show();
                            $("#numprac2").attr('disabled',false);
                            $("#pract3").show();
                            $("#numprac3").attr('disabled',false);
                        }
                    }
                    if(numpracfor == 3){
                        if(horlabprac >= horprac3){
                            $("#pract3").show();
                            $("#numprac3").attr('disabled',false);
                        }
                    }
                }
{#                $('#numprac').attr("disabled",false);#}
                $('#convenrec').attr("disabled",false);
                $('#extensionrec').attr("disabled",false);
                $('#celularrec').attr("disabled",false);
                $('#emailtut').attr("disabled",false);
                $('#lunes').attr("disabled",false);
                $('#martes').attr("disabled",false);
                $('#miercoles').attr("disabled",false);
                $('#jueves').attr("disabled",false);
                $('#viernes').attr("disabled",false);
                $('#sabado').attr("disabled",false);
                $('#domingo').attr("disabled",false);
            };
            {% if solicitudpractica.fichaentidadrec %}
                bloquearfichrecep();
            {% endif %}
            {% if fire %}
                $("#tabficharecep").click();
            {% endif %}
            $("#envsolic").click(function(){
                smoke.confirm("Esta seguro de enviar la solicitud?", function(e){
                if (e){
                    showWaiting("Enviando la solicitud", "espere un momento por favor...");
                    $.post("/solicitud_practicasadm", {"action":'enviarsolicict', "idsoli": '{{ solicitudpractica.id }}'}, function(data) {
                        hideWaiting();
                        if (data.result=='ok') {
                            smoke.alert("Solicitud Enviada");
                            var idsolg = data.idsol;
                            setInterval(function(){
                                $.unblockUI();
                                location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}&idsol={{ solicitudpractica.id }}';
                            }, 1800);
                        }else{

                            smoke.alert("Error al Guardar, intentelo nuevamente");
                        }

                    }, "json");
                }else{
                    }
                    }, {
                    ok: "Si",
                    cancel: "No",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });

            buscar_empresa = function(query, process) {
                var nomodel = 'EmpresaConvenio:estado=True';

                $.get("/reportes", {'action':'datafilt', 'model': nomodel,
                                    'p': 1, 'q': query, 's': 10}, function(data) {
                    if (data.results.length > 0) {
                        $('#entidadrec').get(0).results = data.results;
                        listing = [];
                        for (var i in data.results) {
                            var dato = data.results[i];
                            listing.push(dato.alias);
                        }
                        process(listing);
                    }
                    else{
                         $('#entidadrec').attr("myval","0");
                         $('#entidadrec').get(0).results = "";
                         listing = [];
                         process(listing);
                    }
                }, 'json');
            };

            $('#entidadrec').typeahead({source: buscar_empresa, updater: function(item) {
                $("#advruc").html("").removeClass("alert alert-danger");
                var results = $('#entidadrec').get(0).results;
                var repetido = false;
                for (var i in results) {
                    var datos = results[i];
                    if (item==datos.alias) {
                        $('#entidadrec').attr("myval",datos.id);
                        $.post("/solicitud_practicasadm", {"action":'buscarempresa', "idempcon": datos.id, "ruc": $('#rucent').val()}, function(data) {
                            hideWaiting();
                            if (data.result=='ok') {
                                $("#entidadrec").val(data.mensaje);
                                $("#rucent").attr("myval",data.idempresacon);
                                $("#rucent").val(data.ruc);
                                $("#actividaent").val(data.actividad);
                                $("#provinciarec").attr("myval",data.idprov);
                                $("#provinciarec").val(data.provincia);
                                $("#direccionent").val(data.direccion);
                                $("#ciudadrec").attr("myval",data.idciu);
                                $("#ciudadrec").val(data.ciudad);
                                $("#entidadrec").attr("disabled",false);
                                $("#actividaent").attr("disabled",false);
                                $("#provinciarec").attr("disabled",false);
                                $("#direccionent").attr("disabled",false);
                                $("#ciudadrec").attr("disabled",false);
                            }else{
                                if(data.result=='existe'){
                                    $("#advruc").html("ADVERTENCIA: El ruc ingresado ya se encuentra como empresa sin convenio, al guardar la ficha la empresa tambien se guardara como empresa con convenio").addClass("alert alert-danger");
                                    emprsinconval = true;
                                    $("#entidadrec").val(data.mensaje);
                                    $("#rucent").attr("myval",0);
                                    $("#rucent").val(data.ruc);
                                    $("#actividaent").val(data.actividad);
                                    $("#provinciarec").attr("myval",data.idprov);
                                    $("#provinciarec").val(data.provincia);
                                    $("#direccionent").val(data.direccion);
                                    $("#ciudadrec").attr("myval",data.idciu);
                                    $("#ciudadrec").val(data.ciudad);
                                    $("#entidadrec").attr("disabled",false);
                                    $("#actividaent").attr("disabled",false);
                                    $("#provinciarec").attr("disabled",false);
                                    $("#direccionent").attr("disabled",false);
                                    $("#ciudadrec").attr("disabled",false);
                                }else{
                                    $("#entidadrec").val("");
                                    $("#entidadrec").attr("disabled",false);
                                    $("#actividaent").val("");
                                    $("#actividaent").attr("disabled",false);
                                    $("#rucent").attr("myval",0);
                                    $("#provinciarec").attr("myval",0);
                                    $("#provinciarec").attr("disabled",false);
                                    $("#provinciarec").val("");
                                    $("#direccionent").val("");
                                    $("#direccionent").attr("disabled",false);
                                    $("#ciudadrec").attr("myval",0);
                                    $("#ciudadrec").val("");
                                    $("#ciudadrec").attr("disabled",false);
                                }
                            }

                        }, "json");
                    }
                }
                return item;
            }});

{#            //////////////////////////////////////////////////////#}
{#            //////////////////////////////////////////////////////#}
            $(".aprobarsol").click(function(){
                {% if solicitudpractica.fichaentidadrec.sinconvenio.estadoempresa %}
                    $("#aprobado").attr('checked',false);
                    $("#paneltitleaprob").html("APROBACION DE SOLICITUD "+$(this).attr("nombre"));
                    $("#aprobapanel").modal({backdrop: 'static', keyboard: 'false', width: "617px", maxHeight: ($(window).height()*3)/4 });
                    $("#aprobapanel").modal("show");
                {% else %}
                    smoke.alert("Debe escoger el estado de la empresa.")
                {% endif %}
            });
            $(".btn-cerrarpanelapro").click(function(){
                $("#observacion").val("");
                $("#aprobado").attr('checked',false);
                $("#aprobapanel").modal("hide");
            });
            $(".btn-guardarapro").click(function(){
                $("#etiquetap").html("").removeClass("alert alert-danger");
                var aprobado = false;
                var valida = true;
                var mensaje = 'no aprobar';
                if ($("#aprobado").is(':checked')) {
                    aprobado = true;
                    mensaje = 'aprobar';
                    {% if not reportcartcompro or not reportcartasigna %}
                        valida = false;
                        smoke.alert("Para aprobar la solicitud los archivos <b style='color:red'> CARTA DE COMPROMISO Y ASIGNACIÓN </b> deben estar revisados.");
                        $("#aprobapanel").modal("hide");
                        $("#tabdocument").click();
                    {% endif %}
                }
                if(valida){
                    if ($.trim($("#observacion").val()) != '') {
                        $("#aprobapanel").modal("hide");
                        smoke.confirm("Esta seguro de "+mensaje+" la solicitud?", function(e){
                            if (e){
                                showWaiting("Ingresando informacion", "espere un momento por favor...");
                                $.post("/solicitud_practicasadm", {"action":'aprobarsolici', "idsoli": '{{ solicitudpractica.id }}', "aprobado": aprobado, "observacion": $("#observacion").val() }, function(data) {
                                    hideWaiting();
                                    if (data.result=='ok') {
                                        smoke.alert("Solicitud "+data.mens);
                                        setInterval(function(){
                                            $.unblockUI();
                                            location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}&idsol={{ solicitudpractica.id }}';
                                        }, 1200);
                                    }else{

                                        smoke.alert("Error al Guardar, intentelo nuevamente");
                                    }

                                }, "json");
                            }else{
                                $("#aprobapanel").modal({backdrop: 'static', keyboard: 'false', width: "617px", maxHeight: ($(window).height()*3)/4 });
                                $("#aprobapanel").modal("show");
                            }
                                }, {
                                ok: "Si",
                                cancel: "No",
                                classname: "custom-class",
                                reverseButtons: true
                        });
                    }else{
                        $("#etiquetap").html("Debe ingresar la observacion").addClass("alert alert-danger");
                    }
                }

            });
            $(".btn-enviarsolicit").click(function(){
                {% with procesoselec=solicitudpractica.fichaentidadrec.existe_procesoselec %}
                    smoke.confirm("Esta seguro de enviar la solicitud al estudiante para que acepte?", function(e){
                        if (e){
                            showWaiting("Ingresando informacion", "espere un momento por favor...");
                            $.post("/solicitud_practicasadm", {"action":'aprobarsolici', "idproceselec": '{{ procesoselec.0.id }}', "idsoli": '{{ solicitudpractica.id }}' }, function(data) {
                                hideWaiting();
                                if (data.result=='ok') {
                                    smoke.alert("Solicitud "+data.mens);
                                    setInterval(function(){
                                        $.unblockUI();
                                        location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}&idsol={{ solicitudpractica.id }}';
                                    }, 1200);
                                }else{
                                    smoke.alert(data.mensaje);
                                }

                            }, "json");
                        }else{

                        }
                            }, {
                            ok: "Si",
                            cancel: "No",
                            classname: "custom-class",
                            reverseButtons: true
                    });
                {% endwith %}

            });
            $(".enviarcorreo").click(function(){
                $("#paneltitlecorr").html("ENVIAR CORREO A ESTUDIANTE "+$(this).attr("nombre"));
                $("#contenidocorr").val('');
                $("#correopanel").modal({backdrop: 'static', keyboard: 'false', width: "617px", maxHeight: ($(window).height()*3)/4 });
                $("#correopanel").modal("show");
            });
            $(".btn-cerrarpanelcorr").click(function(){
                $("#correopanel").modal("hide");
            });
            $(".btn-envcorr").click(function(){
                $("#etiquetapcor").html("").removeClass("alert alert-danger");

                if ($.trim($("#contenidocorr").val()) != '') {
                    $("#correopanel").modal("hide");
                    smoke.confirm("Esta seguro de enviar el correo?", function(e){
                        if (e){
                            showWaiting("Ingresando informacion", "espere un momento por favor...");
                            $.post("/solicitud_practicasadm", {"action":'enviarcorreo', "idsoli": '{{ solicitudpractica.id }}', "contenidocorr": $("#contenidocorr").val() }, function(data) {
                                hideWaiting();
                                if (data.result=='ok') {
                                    smoke.alert("El correo se envio exitosamente");


                                }else{
                                    $("#correopanel").modal({backdrop: 'static', keyboard: 'false', width: "617px", maxHeight: ($(window).height()*3)/4 });
                                    $("#correopanel").modal("show");
                                    $("#etiquetapcor").html("Error al Guardar, intentelo nuevamente").addClass("alert alert-danger");
                                }

                            }, "json");
                        }else{
                            $("#correopanel").modal({backdrop: 'static', keyboard: 'false', width: "617px", maxHeight: ($(window).height()*3)/4 });
                            $("#correopanel").modal("show");
                        }
                            }, {
                            ok: "Si",
                            cancel: "No",
                            classname: "custom-class",
                            reverseButtons: true
                    });
                }else{
                    $("#etiquetapcor").html("Debe ingresar la observacion").addClass("alert alert-danger");
                }

            });
            var column = parseInt('{{ puntajeindicador.count }}') + 2;
            {% if solicitudpractica.promedioevasuper %}
                column = column - 1;
            {% endif %}
            $("#tfootform").html('<tr {% if solicitudpractica.promedioevasuper %} class="alert {% if solicitudpractica.promedioevasuper < PUNTAJE_APRUEBA_PRACTICA %}alert-danger{% else %}alert-success{% endif %}" {% endif %}><td colspan="'+column+'">' +
                    '<h3>TOTAL</h3>{% if solicitudpractica.promedioevasuper %}</td><td style="vertical-align: middle;">{% if solicitudpractica.promedioevasuper >= PUNTAJE_APRUEBA_PRACTICA %}<a class="label label-success">APROBADO</a>{% else %}<a class="label label-important">REPROBADO</a>{% endif %}</td> {% else %} </td>{% endif %}<td ><h3 id="totpuntaje" style="text-align:center">0</h3></td></tr>');
            var valor = 0;
            {% for s in segmentoindicadoremp %}
                {% for d in s.segdetaindica %}
                     valor = parseFloat(valor) + parseFloat($('#puntaje'+'{{ d.id }}').val());
                {% endfor %}
            {% endfor %}
            var valor = (valor / parseFloat('{{ numsegdet }}')).toFixed(1);
            $("#totpuntaje").html(valor);

{#            /////////////////////////////////////////////////////////////////////////////////////////// evaluaciones instituto///////////////////////////#}
{#            /////////////////////////////////////////////////////////////////////////////////////////// evaluaciones instituto///////////////////////////#}

            $("#tfootevacade").html('<tr><td><h3>TOTAL</h3></td><td ><h3 id="totcumple" style="text-align:center">0</h3></td><td ><h3 id="totnocumple" style="text-align:center">0</h3></td></tr>');
            var totalcumpl = 0;
            var totalnocumpl = 0;
            $(".cumpleevaca").click(function(){
                totalcumpl = 0;
                totalnocumpl = 0;
                {% for i in indicadoracademico %}
                    if ($("#cumple"+"{{ i.id }}").is(':checked')) {
                        $("#nocumple"+"{{ i.id }}").attr('checked',false);
                        totalcumpl = totalcumpl + 1;
                    }
                    if ($("#nocumple"+"{{ i.id }}").is(':checked')) {
                        totalnocumpl = totalnocumpl + 1;
                    }
                {% endfor %}
                $("#totcumple").html(totalcumpl);
                $("#totnocumple").html(totalnocumpl);
            });
            $(".nocumpleevaca").click(function(){
                totalcumpl = 0;
                totalnocumpl = 0;
                {% for i in indicadoracademico %}
                    if ($("#nocumple"+"{{ i.id }}").is(':checked')) {
                        $("#cumple"+"{{ i.id }}").attr('checked',false)
                        totalnocumpl = totalnocumpl + 1;
                    }
                    if ($("#cumple"+"{{ i.id }}").is(':checked')) {
                        totalcumpl = totalcumpl + 1;
                    }
                {% endfor %}
                $("#totcumple").html(totalcumpl);
                $("#totnocumple").html(totalnocumpl);
            });
            $(".btn-guardarevalinst").click(function(){
                var validaind = true;
                var datos = {};
                datos.indicadores = [];
                var supervisado = false;
                if (!$("#supervisado").is(':checked') && !$("#nosupervisado").is(':checked')) {
                    validaind = false;
                    smoke.alert('Faltan datos, seleccione una de las opciones si el estudiante va a ser supervisado de click en supervisado caso contrario en la casilla de no supervisado..');
                    return false
                }
                if($("#supervisado").is(':checked')){
                    supervisado = true;
                }
                datos.supervisado = supervisado;
                {% for i in indicadoracademico %}
                    var cumple = false;
                    var nocumple = false;

                    if (!$("#nocumple"+"{{ i.id }}").is(':checked') && !$("#cumple"+"{{ i.id }}").is(':checked')) {
                        smoke.alert('Faltan datos, seleccione si cumple o no cumple los indicadores');
                        return false;
                    }
                    if($("#cumple"+"{{ i.id }}").is(':checked')){
                        cumple = true;
                    }
                    datos.indicadores.push({"idindic":"{{ i.id }}","cumple":cumple})

                {% endfor %}
                if($.trim($("#obserevainstit").val())==''){
                    smoke.alert('Faltan datos, Ingrese las observaciones de la evaluacion');
                    return false;
                }
                datos.observacion = $("#obserevainstit").val();
                smoke.confirm("Esta seguro de enviar la evaluación del estudiante?", function(e){
                    if (e){
                        showWaiting("Enviando la evaluación", "espere un momento por favor...");
                        $.post("/solicitud_practicasadm", {"action":'guardarevalinst', "datos":  JSON.stringify(datos),'idsoli':'{{ solicitudpractica.id }}'}, function(data) {
                            hideWaiting();
                            if (data.result=='ok') {
                                smoke.alert("Registro Ingresado");
                                setInterval(function(){
                                    $.unblockUI();
                                    location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}&idsol={{ solicitudpractica.id }}'+'&eval=1';
                                }, 1800);
                            }else{
                                smoke.alert("Error al Guardar, intentelo nuevamente");
                            }

                        }, "json");
                    }else{
                    }
                    }, {
                    ok: "Si",
                    cancel: "No",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            {% if eval %}
                $("#tabevalinstitu").click();
            {% endif %}

            var tipo_supervision = 0;
            $('select#tiposupervision').on('change',function(){
                tipo_supervision = $(this).val();
            });

            $("#tabagregarsupervision").click(function(){
                $("#body_supervision").show();
                $('select#tiposupervision').val(0);
                tipo_supervision = 0;
                $("#tiposupervision").attr('disabled',false);
                $("#num_visitas").html('NUEVA VISITA DOCENTE');
                {% for i in indicadoracademico %}
                    $("#cumpl"+"{{ i.id }}").attr('checked',false);
                    $("#nocumpl"+"{{ i.id }}").attr('checked',false);
                    $("#cumpl"+"{{ i.id }}").attr('disabled',false);
                    $("#nocumpl"+"{{ i.id }}").attr('disabled',false);
                {% endfor %}
                $("#observaciones_supervision").val("");
                $("#observaciones_supervision").attr("placeholder", "Agregue las observaciones que sean pertinentes");
                $("#ejecucion_practica").val("");
                $("#ejecucion_practica").attr("placeholder", "Agregue las actividades que está desarrollando el estudiante que se relacionan con la práctica");
                $("#observaciones_supervision").attr('disabled',false);
                $("#ejecucion_practica").attr('disabled',false);
                $("#tfoot_evacade").show();
                $("#tfoot_evacade2").hide();
                $("#btn-guardar_supervision").show();
                $("#btn-guardar_supervision2").hide();
                $(".btn-editar_supervisiondocente").hide();
            });
            {% if es_supervisor %} $("#num_visitas").html('NUEVA VISITA DOCENTE');{% endif %}
            $("#btn-guardar_supervision2").hide();
            $(".btn-editar_supervisiondocente").hide();

            $(".tabindicadores2").click(function(){
                $("#tiposupervision").attr('disabled',true);
                $("#body_supervision").show();
                $("#btn-guardar_supervision").hide();
                $("#btn-guardar_supervision2").hide();
                $(".btn-editar_supervisiondocente").show();
                var cumple = 0;
                var nocumple = 0;
                var numsupervision = $(this).attr('num_supervision');
                var idsupervision = $(this).attr('id_supervision');
                $("#txtprueba").val(idsupervision);
                $("#num_visitas").html('VISITA #'+numsupervision);
                {% for i in indicadoracademico %}
                    $("#cumpl"+"{{ i.id }}").attr('checked',false);
                    $("#nocumpl"+"{{ i.id }}").attr('checked',false);
                    $("#cumpl"+"{{ i.id }}").attr('disabled',true);
                    $("#nocumpl"+"{{ i.id }}").attr('disabled',true);
                    {% for s in supervisiones_det %}
                        if (('{{ s.indicadoracademico.id }}'=='{{ i.id }}') && ('{{ s.supervision.id }}'==idsupervision)){
                            {% if s.cumple %}
                                $("#cumpl"+"{{ i.id }}").attr('checked',true);
                                cumple = cumple+1;
                            {% else %}
                                $("#nocumpl"+"{{ i.id }}").attr('checked',true);
                                nocumple = nocumple+1;
                            {% endif %}
                            {% if s.supervision.observaciones %}
                                $("#observaciones_supervision").val("{{ s.supervision.observaciones }}");
                            {% else %}
                                $("#observaciones_supervision").val("");
                                $("#observaciones_supervision").attr("placeholder", "");
                            {% endif %}
                            {% if s.supervision.ejecucion %}
                                $("#ejecucion_practica").val("{{ s.supervision.ejecucion }}");
                            {% else %}
                                $("#ejecucion_practica").val("");
                                $("#ejecucion_practica").attr("placeholder", "");
                            {% endif %}
                            {% if s.supervision.tipo.id %}
                                $('select#tiposupervision').val({{ s.supervision.tipo.id }});
                                tipo_supervision = {{ s.supervision.tipo.id }};
                            {% else %}
                                $('select#tiposupervision').val(0);
                                tipo_supervision = 0;
                            {% endif %}
                        }
                    {% endfor %}
                    $("#observaciones_supervision").attr('disabled',true);
                    $("#ejecucion_practica").attr('disabled',true);
                    $("#tfoot_evacade2").html('<tr><td><h3>TOTAL</h3></td><td ><h3 style="text-align:center">'+cumple+'</h3></td><td ><h3 style="text-align:center">'+nocumple+'</h3></td></tr>');
                    $("#tfoot_evacade2").show();
                    $("#tfoot_evacade").hide();
                {% endfor %}
            });

            $(".btn-guardar_supervisiondocente").click(function(){
                var datos = {};
                var editar = $(this).attr('edit_supervision');
                var idsupervision='';
                if (editar=='1'){
                    idsupervision = ($("#txtprueba").val());
                }
                datos.indicadores = [];
                var observacion = $("#observaciones_supervision").val();
                var ejecucion = $("#ejecucion_practica").val();
                {% for i in indicadoracademico %}
                    var cumple = false;
                    var nocumple = false;
                    if (!$("#nocumpl"+"{{ i.id }}").is(':checked') && !$("#cumpl"+"{{ i.id }}").is(':checked')) {
                        smoke.alert('Faltan datos, seleccione si cumple o no cumple los indicadores');
                        return false;
                    }
                    if($("#cumpl"+"{{ i.id }}").is(':checked')){
                        cumple = true;
                    }
                    datos.indicadores.push({"idindic":"{{ i.id }}","cumple":cumple})
                {% endfor %}
                smoke.confirm("Esta seguro de enviar la supervision docente?", function(e){
                    if (e){
                        showWaiting("Guardando supervision", "espere un momento por favor...");
                        $.post("/solicitud_practicasadm", {"action":'guardar_supervisiondocente', "datos":  JSON.stringify(datos),'idsoli':'{{ solicitudpractica.id }}', 'supervisor':'{{ supervisor_practicas.id }}', 'ejecucion':ejecucion, 'observaciones':observacion, 'editar':editar, 'idsupervision':idsupervision, 'tipo_supervision':tipo_supervision }, function(data) {
                            hideWaiting();
                            if (data.result=='ok') {
                                smoke.alert("Registro Ingresado");
                                setInterval(function(){
                                    $.unblockUI();
                                    location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}&idsol={{ solicitudpractica.id }}'+'&eval=1';
                                }, 1800);
                            }else{
                                smoke.alert("Error al Guardar, intentelo nuevamente");
                            }
                        }, "json");
                    }else{
                    }
                    }, {
                    ok: "Si",
                    cancel: "No",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });

            $(".btn-editar_supervisiondocente").click(function(){
                $("#tiposupervision").attr('disabled',false);
                $("#observaciones_supervision").attr("placeholder", "Agregue las observaciones que sean pertinentes");
                $("#ejecucion_practica").attr("placeholder", "Agregue las actividades que está desarrollando el estudiante que se relacionan con la práctica");
                $("#observaciones_supervision").attr('disabled',false);
                $("#ejecucion_practica").attr('disabled',false);
                $("#tfoot_evacade").show();
                $("#tfoot_evacade2").hide();
                $("#btn-guardar_supervision").hide();
                $("#btn-guardar_supervision2").show();
                $(".btn-editar_supervisiondocente").hide();
                {% for i in indicadoracademico %}
                    $("#cumpl"+"{{ i.id }}").attr('disabled',false);
                    $("#nocumpl"+"{{ i.id }}").attr('disabled',false);
                {% endfor %}
            });

            {% if solicitudpractica.evalsuperinstit %}
                totalcumpl = 0;
                totalnocumpl = 0;
                {% for i in solicitudpractica.evalsuperinstit %}
                    {% if i.cumple %}
                        totalcumpl = totalcumpl + 1;
                    {% else %}
                        totalnocumpl = totalnocumpl + 1;
                    {% endif %}
                {% endfor %}
                $("#totcumple").html(totalcumpl);
                $("#totnocumple").html(totalnocumpl);
            {% endif %}

{#            /////////////////////////////////////////////////////////////////////////////////////////// SUPERVISION DOCENTE   ///////////////////////////#}
            $("#tfoot_evacade").html('<tr><td><h3>TOTAL</h3></td><td ><h3 id="tot_cumple" style="text-align:center">0</h3></td><td ><h3 id="tot_nocumple" style="text-align:center">0</h3></td></tr>');
            var totalcumple = 0;
            var totalnocumple = 0;
            $(".cumple_evaca").click(function(){
                totalcumple = 0;
                totalnocumple = 0;
                {% for i in indicadoracademico %}
                    if ($("#cumpl"+"{{ i.id }}").is(':checked')) {
                        $("#nocumpl"+"{{ i.id }}").attr('checked',false);
                        totalcumple = totalcumple + 1;
                    }
                    if ($("#nocumpl"+"{{ i.id }}").is(':checked')) {
                        totalnocumple = totalnocumple + 1;
                    }
                {% endfor %}
                $("#tot_cumple").html(totalcumple);
                $("#tot_nocumple").html(totalnocumple);
            });
            $(".nocumple_evaca").click(function(){
                totalcumple = 0;
                totalnocumple = 0;
                {% for i in indicadoracademico %}
                    if ($("#nocumpl"+"{{ i.id }}").is(':checked')) {
                        $("#cumpl"+"{{ i.id }}").attr('checked',false)
                        totalnocumple = totalnocumple + 1;
                    }
                    if ($("#cumpl"+"{{ i.id }}").is(':checked')) {
                        totalcumple = totalcumple + 1;
                    }
                {% endfor %}
                $("#tot_cumple").html(totalcumple);
                $("#tot_nocumple").html(totalnocumple);
            });
            $(".btn-guardarevalinst").click(function(){
                var validaind = true;
                var datos = {};
                datos.indicadores = [];
                var supervisado = false;
                if (!$("#supervisado").is(':checked') && !$("#nosupervisado").is(':checked')) {
                    validaind = false;
                    smoke.alert('Faltan datos, seleccione una de las opciones si el estudiante va a ser supervisado de click en supervisado caso contrario en la casilla de no supervisado..');
                    return false
                }
                if($("#supervisado").is(':checked')){
                    supervisado = true;
                }
                datos.supervisado = supervisado;
                {% for i in indicadoracademico %}
                    var cumple = false;
                    var nocumple = false;

                    if (!$("#nocumple"+"{{ i.id }}").is(':checked') && !$("#cumple"+"{{ i.id }}").is(':checked')) {
                        smoke.alert('Faltan datos, seleccione si cumple o no cumple los indicadores');
                        return false;
                    }
                    if($("#cumple"+"{{ i.id }}").is(':checked')){
                        cumple = true;
                    }
                    datos.indicadores.push({"idindic":"{{ i.id }}","cumple":cumple})

                {% endfor %}
                if($.trim($("#obserevainstit").val())==''){
                    smoke.alert('Faltan datos, Ingrese las observaciones de la evaluacion');
                    return false;
                }
                datos.observacion = $("#obserevainstit").val();
                smoke.confirm("Esta seguro de enviar la evaluación del estudiante?", function(e){
                    if (e){
                        showWaiting("Enviando la evaluación", "espere un momento por favor...");
                        $.post("/solicitud_practicasadm", {"action":'guardarevalinst', "datos":  JSON.stringify(datos),'idsoli':'{{ solicitudpractica.id }}'}, function(data) {
                            hideWaiting();
                            if (data.result=='ok') {
                                smoke.alert("Registro Ingresado");
                                setInterval(function(){
                                    $.unblockUI();
                                    location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}&idsol={{ solicitudpractica.id }}'+'&eval=1';
                                }, 1800);
                            }else{
                                smoke.alert("Error al Guardar, intentelo nuevamente");
                            }

                        }, "json");
                    }else{
                    }
                    }, {
                    ok: "Si",
                    cancel: "No",
                    classname: "custom-class",
                    reverseButtons: true
                });
            });
            {% if eval %}
                $("#tabevalinstitu").click();
            {% endif %}
            $("#tabsupervision_docente").click();
            {% if solicitudpractica.evalsuperinstit %}
                totalcumple = 0;
                totalnocumpl = 0;
                {% for i in solicitudpractica.evalsuperinstit %}
                    {% if i.cumple %}
                        totalcumple = totalcumple + 1;
                    {% else %}
                        totalnocumpl = totalnocumpl + 1;
                    {% endif %}
                {% endfor %}
                $("#tot_cumple").html(totalcumple);
                $("#tot_nocumple").html(totalnocumple);
            {% endif %}


            /////////////////////////////////////////////////////////////////////////////////COPIAR FICHA RECEPTORA
            var checknivel = false;
            var idcarrfich = 0;
            var idnivefich = 0;
            $("#copificharecp").click(function(){
                $("#etiquetapcopfich").html('').removeClass('alert alert-danger');
                $("#filtnivel").attr('checked',false);
                $("#filtcarrera").attr('checked',false);
                $("#copifichapanel .btn-copificha").show();
                $("#tbodybusestudfich").html("");
                $("#busqueestudiant").show();
                $("#cabecfichrecep").html("Seleccionar &nbsp;&nbsp;&nbsp; Estudiante &nbsp;&nbsp;&nbsp; Fecha");
                $("#copifichapanel").modal({backdrop: 'static', keyboard: 'false', width: "50%", maxHeight: ($(window).height()*3)/4 });
                $("#copifichapanel").modal("show");
            });
            $("#filtcarrera").click(function(){
                if($("#filtcarrera").is(':checked')){
                    $("#tbodybusestudfich").html("");
                    $("#carrerafich").attr('disabled',false);
                }else{
                    $("#carrerafich").attr('disabled',true);
                    $("#carrerafich").val(0);
                    idcarrfich = 0;
                    checknivel  = false;
                    creacombniv();
                }
            });
            $("#filtnivel").click(function(){
                $("#etiquetapcopfich").html('').removeClass('alert alert-danger');
                if($("#filtnivel").is(':checked')){
                    $("#tbodybusestudfich").html("");
                    checknivel  = true;
                }else{
                    checknivel  = false;
                }
                if($("#filtcarrera").is(':checked')){
                    if($("#carrerafich").val()==0){
                        $("#filtnivel").attr('checked',false);
                        checknivel  = false;
                        $("#etiquetapcopfich").html('Seleccione la carrera').addClass('alert alert-danger');
                        idcarrfich = 0;
                    }else{
                        idcarrfich = $("#carrerafich").val();
                    }
                }else{
                    idcarrfich = 0;
                }
                creacombniv();
            });
            creacombniv = function(){
                if(idcarrfich == 0 || checknivel == false){
                    var html = "<option value='0'>-----</option>";
                    {% for n in niveles %}
                        html = html + "<option value='{{ n.id }}' > {{ n.nivelmalla }} - {{ n.paralelo }} - {{ n.carrera }}    </option>";
                    {% endfor %}
                    $("#nivelfich").html(html);
                    $("#nivelfich").val(0);
                    $("#nivelfich").attr('disabled',!checknivel);
                }else{
                    showWaiting("Cargando Información", "espere un momento por favor...");
                    $.post("/solicitud_practicasadm", {"action":'busquenivel', "idcarrfich":  idcarrfich}, function(data) {
                        hideWaiting();
                        if (data.result=='ok') {
                            var html = "<option value='0'>-----</option>";
                            for( n in data.datos ){
                                var dato = data.datos[n];
                                html = html + "<option value='"+ dato.id +"' > "+ dato.descripcion +"</option>";
                            }
                            $("#nivelfich").html(html);
                            $("#nivelfich").val(0);
                            $("#nivelfich").attr('disabled',!checknivel);
                        }else{
                            $("#etiquetapcopfich").html('Error al cargar información, vuelva a intentarlo').addClass('alert alert-danger');
                        }

                    }, "json");
                }

            };

            $("#carrerafich").change(function(){
                if($("#carrerafich").val() == 0){
                    idcarrfich = 0;
                    $("#filtnivel").attr('checked',false);
                    checknivel  = false;
                    creacombniv();
                }
            });

            $("#convenficha").change(function(){
                if($("#convenficha").is(':checked')){
                    $("#sinconvenficha").attr('checked',false);
                }
            });

            $("#sinconvenficha").change(function(){
                if($("#sinconvenficha").is(':checked')){
                    $("#convenficha").attr('checked',false);
                }
            });

            $("#copifichapanel .btn-cerrarcopificha").click(function(){
                $("#copifichapanel .btn-copificha").show();
                $("#copifichapanel").modal("hide");
                $("#cabecfichrecep").html("Seleccionar &nbsp;&nbsp;&nbsp; Estudiante &nbsp;&nbsp;&nbsp; Fecha");
                $("#tbodybusestudfich").html("");
                checknivel  = false;
                creacombniv();
            });

            $("#borrarestudiant").click(function(){
                $("#tbodybusestudfich").html("");
                $("#copifichapanel .btn-copificha").show();
                $("#busqueestudiant").show();
                $("#cabecfichrecep").html("Seleccionar &nbsp;&nbsp;&nbsp; Estudiante &nbsp;&nbsp;&nbsp; Fecha");
                $("#borrarestudiant").hide();
            });

            $("#busqueestudiant").click(function(){
                $("#etiquetapcopfich").html('').removeClass('alert alert-danger');
                var valida = true;
                var convenio = false;
                var sinconvenio = false;
                if($("#convenficha").is(':checked')){
                    convenio = true;
                }
                if($("#sinconvenficha").is(':checked')){
                    sinconvenio = true;
                }
                if($("#filtcarrera").is(':checked')){
                    if($("#carrerafich").val() == 0){
                        valida = false;
                        $("#etiquetapcopfich").html('Debe seleccionar la carrera').addClass('alert alert-danger');
                    }
                }
                if($("#filtnivel").is(':checked')){
                    if($("#nivelfich").val() == 0 ){
                        if(valida){
                            valida = false;
                            $("#etiquetapcopfich").html('Debe seleccionar el nivel').addClass('alert alert-danger');
                        }else{
                            $("#etiquetapcopfich").html('Debe seleccionar la carrera y el nivel').addClass('alert alert-danger');
                        }

                    }

                }
                if(valida){
                    showWaiting("Cargando Información", "espere un momento por favor...");
                    $.post("/solicitud_practicasadm", {"action":'busqueescenario','idsoli':'{{ solicitudpractica.id }}', "idcarrfich":  $("#carrerafich").val(), "idnivelfich":  $("#nivelfich").val(), "convenio":  convenio, "sinconvenio":  sinconvenio}, function(data) {
                        hideWaiting();
                        if (data.result=='ok') {
                            var html = "";
                            for( n in data.datos ){
                                var dato = data.datos[n];
                                html = html + '<tr><td ><input type="checkbox" class="checkselfichest" id="'+ dato.idesc +'" style="width: 8%;height: 3em;"/>&nbsp;&nbsp;&nbsp; '+ dato.nombre +' &nbsp;&nbsp;&nbsp; '+ dato.fecha +' </td><tr/>';
                            }
                            if(html==""){
                                html = html + '<tr><td > NO HAY REGISTROS </td><tr/>';
                            }
                            $("#tbodybusestudfich").html(html);
                            $("#borrarestudiant").show();
                        }else{
                            $("#etiquetapcopfich").html('Error al cargar información, vuelva a intentarlo').addClass('alert alert-danger');
                        }

                    }, "json");
                }
            });


            $("#copifichapanel .btn-copificha").click(function(){
                $("#etiquetapcopfich").html("").removeClass('alert alert-danger');
                var seleccionados = $(".checkselfichest:checked");
                var valido = true;
                if(seleccionados.length==0){
                    $("#etiquetapcopfich").html("No seleccionado ningun estudiante").addClass('alert alert-danger');
                    valido = false;
                }
                if($("#cantprocesficha").val()==0){
                    $("#etiquetapcopfich").html("la cantidad del proceso de seleccion debe ser mayor a 0").addClass('alert alert-danger');
                    valido = false;
                }
                if(parseInt($("#cantprocesficha").val()) <= parseInt($("#cantprocesficha").attr("procesoaceptad")) ){
                    $("#etiquetapcopfich").html("la cantidad del proceso de seleccion debe ser mayor a la cantidad de "+$("#cantprocesficha").attr("procesoaceptad")).addClass('alert alert-danger');
                    valido = false;
                }
                var datos = {};
                datos.fichrecepid = '{{ solicitudpractica.fichaentidadrec.id }}';
                {% with procesoselec=solicitudpractica.fichaentidadrec.existe_procesoselec %}
                    {% if procesoselec %}
                        datos.idproceselec =  '{{ procesoselec.0.id }}';
                    {% endif %}
                {% endwith %}
                datos.cantprocesficha =  $("#cantprocesficha").val();
                datos.opcionenvio =  $("#copifichapanel .btn-copificha").attr('opc');
                datos.idescen = [];
                seleccionados.each(function() {
                    datos.idescen.push({"idesc":$(this).attr('id')});
                });

                if(valido){
                    $("#copifichapanel").modal("hide");
                    smoke.confirm("Esta seguro de copiar y enviar lo ficha receptora?", function(e){
                        if (e){
                            showWaiting("Enviando la evaluación", "espere un momento por favor...");
                            $.post("/solicitud_practicasadm", {"action":'copiarficharecept', "datos":  JSON.stringify(datos)}, function(data) {
                                hideWaiting();
                                if (data.result=='ok') {
                                    var html = "";
                                    $("#copifichapanel").modal({backdrop: 'static', keyboard: 'false', width: "50%", maxHeight: ($(window).height()*3)/4 });
                                    $("#copifichapanel").modal("show");
                                    $("#copifichapanel .btn-copificha").hide();
                                    $("#cabecfichrecep").html("RESULTADO");
                                    $("#tbodybusestudfich").html(data.html);
                                    $("#busqueestudiant").hide();
                                }else{
                                    smoke.alert("Error al Guardar, intentelo nuevamente");
                                }

                            }, "json");
                        }else{
                            $("#copifichapanel").modal({backdrop: 'static', keyboard: 'false', width: "50%", maxHeight: ($(window).height()*3)/4 });
                            $("#copifichapanel").modal("show");
                        }
                        }, {
                        ok: "Si",
                        cancel: "No",
                        classname: "custom-class",
                        reverseButtons: true
                    });
                }
            });



            $("#nuevproceso").click(function(){
                $("#cancproceso").show();
                $("#guarproceso").show();
                $("#nuevproceso").hide();
                $("#editproceso").hide();
                $("#cantproces").attr('readonly',false);
                $("#cantproces").val(0);

            });
            $("#editproceso").click(function(){
                $("#cancproceso").show();
                $("#guarproceso").show();
                $("#editproceso").hide();
                $("#nuevproceso").hide();
                $("#cantproces").attr('readonly',false);

            });

            $("#cancproceso").click(function(){
                location.reload();
            });

            $("#guarproceso").click(function(){
                if($("#cantproces").val() <= 0){
                    smoke.alert("La cantidad de personas para la seleccion debe ser mayor a 0")
                }else{
                    smoke.confirm("Esta seguro de guardar, la informacion?", function(e){
                        if (e){
                            $.post("/solicitud_practicasadm", {"action":'guardarprocselec', 'idcant': $("#cantproces").val() , "idficharecep":  '{{ solicitudpractica.fichaentidadrec.id }}' }, function(data) {
                                hideWaiting();
                                if (data.result=='ok') {
                                    location.reload();
                                }else{
                                    smoke.alert(data.mensaje);
                                }

                            }, "json");

                        }
                        else{}
                    },
                    {
                        ok: "Si",
                        cancel: "No",
                        classname: "custom-class",
                        reverseButtons: true
                    });
                }

            });

            $(".checkrevisado").click(function(){
                var reptsolid = $(this).attr("reptsolid");
                if($(this).is(':checked')){
                    smoke.confirm("Esta seguro de guardar, la informacion del archivo como revisado?", function(e){
                        if (e){
                            $.post("/solicitud_practicasadm", {"action":'checkrevisado', 'reptsolid': reptsolid }, function(data) {
                                hideWaiting();
                                if (data.result=='ok') {
                                    location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}&idsol={{ solicitudpractica.id }}&archpra=1'
                                }else{
                                    smoke.alert(data.mensaje);
                                }

                            }, "json").fail(function() {
                                    hideWaiting();
                                    smoke.alert('Error de conexi&oacute;n');
                            });

                        }
                        else{}
                    },
                    {
                        ok: "Si",
                        cancel: "No",
                        classname: "custom-class",
                        reverseButtons: true
                    });
                }
            });
            /////////////////////////////////////////////ARCHIVO GUARDAR ///////////////////
            ///////////////////////////////////////////////////////////////////////////////

            $(".archsubir").change(function(){
                var idnom = "archestudiant"+$(this).attr("idr");
                var x = document.getElementById(idnom);
                var fileExt = x.value;
                var validExts = new Array(".pdf");
                var fileExt1 = fileExt.substring(fileExt.lastIndexOf('.'));
                var nombre= fileExt.substring(fileExt.indexOf(x.files[0].name),fileExt.lastIndexOf('.'));
                if (parseInt(soloLetrasYNum(nombre))==1){
                    $("#"+idnom).val('');
                    $($("#"+idnom).get(0).parentNode).find(".help-text").html("<h6 style='color:red' >El Nombre del Archivo contiene Tilde, espacios en blanco o Caracteres Especiales</h6>");
                }else if (validExts.indexOf(fileExt1) < 0){
                    $("#"+idnom).val('');
                    $($("#"+idnom).get(0).parentNode).find(".help-text").html("<h6 style='color:red' >El formato del archivo solo debe ser .pdf</h6>");
                }else{
                    readURL(this);
                    $("#aguardarch"+$(this).attr("idr")).show();
                    $("#acancelch"+$(this).attr("idr")).show();
                    $($("#"+idnom).get(0).parentNode).find(".help-text").html("");
                }
            });

            $(".aguardarch").click(function(){
                showWaiting("Guardando archivo", "espere un momento por favor...");
                var idnom = "archestudiant"+$(this).attr("idr");
                var idrep = $(this).attr("idr");
                inputFileImage = document.getElementById(idnom);
                file = inputFileImage.files[0];
                var data = new FormData();
                if(file){
                    data.append('archivo',file);
                    data.append('action','guardarreport');
                    data.append('idrep',idrep);
                    data.append('idsolic','{{ solicitudpractica.id }}');
                    var url = "/solicitud_practicasadm";
                    showWaiting("Guardando informacion","Espere unos segundos por favor...");
                    $.ajax({
                    url:url,
                    type:"POST",
                    contentType:false,
                    data:data,
                    processData:false,
                    cache:false,
                    success: function(data)
                       {
                        hideWaiting();
                        if(data.result=="ok"){
                            location.href='/solicitud_practicasadm?action=solicitud&ides={{ escenariopractica.id }}&idsol={{ solicitudpractica.id }}&archpra=1';
                        }
                        else{
                            smoke.alert("Error vuelva a intentarlo.");
                        }

                       }
                    });
                }else{
                    hideWaiting();
                    smoke.alert("Falta adjuntar archivo.");
                }
            });

            $(".editarch").click(function(){
                $("#adescarch"+$(this).attr("idr")).hide();
                $("#aeditarch"+$(this).attr("idr")).hide();
                $("#aguardarch"+$(this).attr("idr")).show();
                $("#acancelch"+$(this).attr("idr")).show();
                $("#archestudiant"+$(this).attr("idr")).show();
                $($("#archestudiant"+$(this).attr("idr")).get(0).parentNode).find(".help-text").show();
            });
            {% if archpra %}
                $("#tabdocument").click();
            {% endif %}
            ///////////////////////////////////////////////////////////////////////////////
            $("#estadoemprfich").change(function(){
                if($("#estadoemprfich").val() > 0){
                    $("#guardaremestad").show();
                    $("#guardaremestad").attr('href','/solicitud_practicasadm?action=agreestado&idsol={{ solicitudpractica.id }}&idemp={{ solicitudpractica.fichaentidadrec.sinconvenio.id }}&idesem='+$("#estadoemprfich").val());
                    {% if solicitudpractica.fichaentidadrec.sinconvenio.estadoempresa %}
                        $("#cancelemestad").show();
                    {% endif %}
                }else{
                    $("#guardaremestad").hide();
                    $("#guardaremestad").attr('href','');
                    {% if solicitudpractica.fichaentidadrec.sinconvenio.estadoempresa %}
                        $("#cancelemestad").hide();
                    {% endif %}
                }
            });
            $("#editemestad").click(function(){
                $("#editemestad").hide();
                $("#guardaremestad").attr('href','/solicitud_practicasadm?action=agreestado&idsol={{ solicitudpractica.id }}&idemp={{ solicitudpractica.fichaentidadrec.sinconvenio.id }}&idesem='+$("#estadoemprfich").val());
                $("#estadoemprfich").attr('disabled',false);
                $("#guardaremestad").show();
                $("#cancelemestad").show();
            });


            $(".finalizapract").click(function(){
                $("#obserfinal").val('');
                $("#divobserfinal").hide();
                $("#aproprac").attr('checked',false);
                $("#rechapract").attr('checked',false);
                $("#iprac1chek").attr('checked',false);
                $("#iprac2chek").attr('checked',false);
                $("#iprac3chek").attr('checked',false);
                $("#bprac1chek").hide();
                $("#iprac1chek").hide();
                $("#bprac2chek").hide();
                $("#iprac2chek").hide();
                $("#bprac3chek").hide();
                $("#iprac3chek").hide();
                $("#nprac1chek").val('');
                $("#nprac2chek").val('');
                $("#nprac3chek").val('');
                $("#nprac1chek").hide();
                $("#nprac2chek").hide();
                $("#nprac3chek").hide();
                $("#finalizapanel").modal({backdrop: 'static', keyboard: 'false', width: "30%", maxHeight: ($(window).height()*3)/4 });
                $("#finalizapanel").modal("show");
            });


            $(".btn-cerrarfinali").click(function(){
                $("#finalizapanel").modal("hide");
            });
            var horasprafina = 0;
            var segundos = 0;
            {% for re  in solicitudpractica.regactividad %}
                var horalab = $('#hlaborreg'+'{{ forloop.counter }}').val();
                var seglab = 60 * (60 * parseInt(horalab.split(':')[0]));
                segundos = segundos + parseInt(horalab.split(':')[1]) + seglab;
            {% endfor %}
            horasprafina = transfhoras(segundos);
            $("#horalbmod").val(horasprafina);

            $("#aproprac").click(function(){
                $("#etiquetapfinal").html('');
                $("#obserfinal").val('');
                $("#divobserfinal").hide();
                $("#rechapract").attr('checked',false);
                $("#iprac1chek").attr('checked',false);
                $("#iprac2chek").attr('checked',false);
                $("#iprac3chek").attr('checked',false);
                $("#bprac1chek").hide();
                $("#iprac1chek").hide();
                $("#bprac2chek").hide();
                $("#iprac2chek").hide();
                $("#bprac3chek").hide();
                $("#iprac3chek").hide();
                if($("#aproprac").is(':checked')){
                    /////////////////horas pract ////////////////////////////////////////

                    var horprac1 = parseFloat('{{ HORAS_MIN_PRACTICAS }}');
                    var horprac2 = parseFloat('{{ HORAS_MIN_PRACTICAS }}') * 2;
                    var horprac3 = parseFloat('{{ HORAS_MIN_PRACTICAS }}') * 3;
                    $("#divnivelfinal").show();
                    var horas = parseFloat(horasprafina.replace(':','.'));
                    if(parseInt('{{ escenariopractica.numero_practica }}') == 1){
                        $("#bprac1chek").show();
                        $("#iprac1chek").show();
                        if(horas >= horprac1 && horas < horprac2){
                            $("#bprac2chek").hide();
                            $("#iprac2chek").hide();
                            $("#bprac3chek").hide();
                            $("#iprac3chek").hide();
                        }
                        if(horas >= horprac2 && horas < horprac3){
                            $("#bprac2chek").show();
                            $("#iprac2chek").show();
                            $("#bprac3chek").hide();
                            $("#iprac3chek").hide();

                        }
                        if(horas >= horprac3){
                            $("#bprac2chek").show();
                            $("#iprac2chek").show();
                            $("#bprac3chek").show();
                            $("#iprac3chek").show();
                        }
                    }
                    if(parseInt('{{ escenariopractica.numero_practica }}') == 2){
                        $("#bprac2chek").show();
                        $("#iprac2chek").show();
                        if(horas >= horprac2 && horas < horprac3){
                            $("#bprac1chek").hide();
                            $("#iprac1chek").hide();
                            $("#bprac3chek").hide();
                            $("#iprac3chek").hide();
                        }
                        if(horas >= horprac3){
                            $("#bprac1chek").hide();
                            $("#iprac1chek").hide();
                            $("#bprac3chek").show();
                            $("#iprac3chek").show();
                        }
                    }
                    if(parseInt('{{ escenariopractica.numero_practica }}') == 3){
                        $("#bprac3chek").show();
                        $("#iprac3chek").show();
                        if(horas >= horprac3){
                            $("#bprac1chek").hide();
                            $("#iprac1chek").hide();
                            $("#bprac2chek").hide();
                            $("#iprac2chek").hide();
                        }
                    }
                }
            });

            $("#rechapract").click(function(){
                $("#etiquetapfinal").html('');
                $("#obserfinal").val('');
                $("#divobserfinal").hide();
                $("#aproprac").attr('checked',false);
                $("#iprac1chek").attr('checked',false);
                $("#iprac2chek").attr('checked',false);
                $("#iprac3chek").attr('checked',false);
                $("#bprac1chek").hide();
                $("#iprac1chek").hide();
                $("#bprac2chek").hide();
                $("#iprac2chek").hide();
                $("#bprac3chek").hide();
                $("#iprac3chek").hide();
                $("#nprac1chek").val('');
                $("#nprac2chek").val('');
                $("#nprac3chek").val('');
                $("#nprac1chek").hide();
                $("#nprac2chek").hide();
                $("#nprac3chek").hide();
                if($("#rechapract").is(':checked')){
                    $("#divobserfinal").show();
                }
            });

            $(".pracfinalicheck").click(function(){
                $("#etiquetapfinal").html('');
                var num = $(this).attr("num");
                var idch = "#iprac"+num+"chek";
                var idnum = "#nprac"+num+"chek";
                $(idnum).hide();
                $(idnum).val('');
                var contcheck = 0;
                var pracfinalicheck = $(".pracfinalicheck:checked");
                $("#etiquetapfinal").html('');
                var segporpract = parseInt((horasprafina.split(':')[0] * 60) * 60) + parseInt(horasprafina.split(':')[1]);
                segporpract =  (segporpract / pracfinalicheck.length);
                var horaporpract =  transfhoras(segporpract);

                if($("#iprac1chek").is(':checked')){
                    $("#nprac1chek").val(horaporpract)
                }
                if($("#iprac2chek").is(':checked')){
                    $("#nprac2chek").val(horaporpract)
                }
                if($("#iprac3chek").is(':checked')){
                    $("#nprac3chek").val(horaporpract)
                }
                if($(idch).is(':checked')){
                    $(idnum).show();
                    if(num == 2){
                        if(parseInt('{{ escenariopractica.numero_practica }}') == 1){
                            if(!$("#iprac1chek").is(':checked')){
                                $(idnum).hide();
                                $(idch).attr('checked',false);
                                $("#etiquetapfinal").html('<a class="alert alert-danger" >Debe seleccionar la práctica 1</a>');
                            }
                        }

                    }
                    if(num == 3){
                        if(parseInt('{{ escenariopractica.numero_practica }}') == 1){
                            if(!$("#iprac1chek").is(':checked')){
                                $(idnum).hide();
                                $(idch).attr('checked',false);
                                $("#etiquetapfinal").html('<a class="alert alert-danger" >Debe seleccionar la práctica 1</a>');
                            }
                            if(!$("#iprac2chek").is(':checked')){
                                $(idnum).hide();
                                $(idch).attr('checked',false);
                                $("#etiquetapfinal").html('<a class="alert alert-danger" >Debe seleccionar la práctica 2</a>');
                            }
                        }
                        if(parseInt('{{ escenariopractica.numero_practica }}') == 2){
                            if(!$("#iprac2chek").is(':checked')){
                                $(idnum).hide();
                                $(idch).attr('checked',false);
                                $("#etiquetapfinal").html('<a class="alert alert-danger" >Debe seleccionar la práctica 2</a>');
                            }
                        }

                    }
                }else{
                    if(num == 1){
                        if($("#iprac2chek").is(':checked')){
                            $("#nprac2chek").hide();
                            $("#iprac2chek").attr('checked',false);
                        }
                        if($("#iprac3chek").is(':checked')){
                            $("#nprac3chek").hide();
                            $("#iprac3chek").attr('checked',false);
                        }
                    }
                    if(num == 2){
                        if($("#iprac3chek").is(':checked')){
                            $("#nprac3chek").hide();
                            $("#iprac3chek").attr('checked',false);
                        }

                    }
                }
            });

            $(".btn-guardarfinal").click(function(){
                var valida = true;
                var rechazado = false;
                $("#etiquetapfinal").html('');
                if($("#aproprac").is(':checked')){
                    rechazado = false;
                    if(!$("#iprac1chek").is(':checked') && !$("#iprac2chek").is(':checked') && !$("#iprac3chek").is(':checked')){
                        valida = false;
                        $("#etiquetapfinal").html('<a class="alert alert-danger" >Debe seleccionar una práctica </a>');
                    }
                    else if(parseFloat(horasprafina.replace(':',',')) < parseFloat('{{ HORAS_MIN_PRACTICAS }}')){
                        valida = false;
                        $("#etiquetapfinal").html('<a class="alert alert-danger" >las horas para aprobar la practica deber ser mayor a {{ HORAS_MIN_PRACTICAS }} </a>');
                    }
                }
                else if($("#rechapract").is(':checked'))
                {
                    rechazado = true;
                    if($.trim($("#obserfinal").val())==''){
                        $("#etiquetapfinal").html('<a class="alert alert-danger" >Debe ingresar la observación </a>');
                        valida = false;
                    }
                }
                else{
                    valida = false;
                }
                if(valida){

                    var datos = [];

                    if($("#iprac1chek").is(':checked')){
                        datos.push({'pract':1,'horas':$("#nprac2chek").val()});
                    }
                    if($("#iprac2chek").is(':checked')){
                        datos.push({'pract':2,'horas':$("#nprac2chek").val()});
                    }
                    if($("#iprac3chek").is(':checked')){
                        datos.push({'pract':3,'horas':$("#nprac2chek").val()});
                    }
                    $("#finalizapanel").modal("hide");
                    smoke.confirm("Esta seguro de finalizar la practica?", function(e){
                        if (e){
                            showWaiting("Guardando información", "espere un momento por favor...");
                            $.post("/solicitud_practicasadm", {"action":'finalizpract','rechazado':rechazado,"observ": $("#obserfinal").val(),"idsolic":  '{{ solicitudpractica.id }}', "datos": JSON.stringify(datos) }, function(data) {
                                hideWaiting();
                                if (data.result=='ok') {
                                    var URLactual = window.location.href;
                                    URLactual = URLactual.split('//')[1];
                                    location.href = URLactual.split('/')[1];
                                }else{
                                    $("#etiquetapfinal").html('<a class="alert alert-danger" >'+data.mensaje+'</a>');
                                    $("#finalizapanel").modal({backdrop: 'static', keyboard: 'false', width: "30%", maxHeight: ($(window).height()*3)/4 });
                                    $("#finalizapanel").modal("show");
                                }

                            }, "json");

                        }
                        else{
                            $("#finalizapanel").modal({backdrop: 'static', keyboard: 'false', width: "30%", maxHeight: ($(window).height()*3)/4 });
                            $("#finalizapanel").modal("show");
                        }
                    },
                    {
                        ok: "Si",
                        cancel: "No",
                        classname: "custom-class",
                        reverseButtons: true
                    });
                }
            });

{#        ////////////////////////////////////////////CALCULAR HORAS LABORADAS POR FECHA Y DIAS /////////#}
            $("#feciniciopr").on('changeDate', function(){
                var feinici =  new Date($("#feciniciopr").val().split('-')[0],$("#feciniciopr").val().split('-')[1],$("#feciniciopr").val().split('-')[2])
                var fefin =  new Date($("#fecfinpr").val().split('-')[0],$("#fecfinpr").val().split('-')[1],$("#fecfinpr").val().split('-')[2])
                if(feinici >= fefin){
                    smoke.alert("La fecha de inicio de practica debe ser menor a la de fin")
                    $("#feciniciopr").focus();
                }

                calcularhoralabor(true);
            });
            $("#fecfinpr").on('changeDate', function(){
                var feinici =  new Date($("#feciniciopr").val().split('-')[0],$("#feciniciopr").val().split('-')[1],$("#feciniciopr").val().split('-')[2])
                var fefin =  new Date($("#fecfinpr").val().split('-')[0],$("#fecfinpr").val().split('-')[1],$("#fecfinpr").val().split('-')[2])
                if(feinici >= fefin){
                    smoke.alert("La fecha de inicio de practica debe ser menor a la de fin")
                    $("#feciniciopr").focus();
                }
                calcularhoralabor(true);
            });
            $(".classchekdias").click(function(){
                calcularhoralabor(true);
            });
            function transfhoras(seconds) {
                var hour = Math.floor(seconds / 3600);
                hour = (hour < 10)? '0' + hour : hour;
                var minute = Math.floor((seconds / 60) % 60);
                minute = (minute < 10)? '0' + minute : minute;
                var second = seconds % 60;
                second = (second < 10)? '0' + second : second;
                return hour + ':' + minute
            }

            cantpractfun1 = function(){
                var cantpract = parseInt('{{ escenariopractica.numero_practica }}');
                if(cantpract == 1){
                    $("#pract1").show();
                    $("#numprac1").attr('disabled',true);
                    $("#numprac1").attr('checked',false);
                    $("#pract2").hide();
                    $("#numprac2").attr('disabled',true);
                    $("#numprac2").attr('checked',false);
                    $("#pract3").hide();
                    $("#numprac3").attr('disabled',true);
                    $("#numprac3").attr('checked',false);
                }
                else if(cantpract == 2){
                    $("#pract1").hide();
                    $("#numprac1").attr('disabled',true);
                    $("#numprac1").attr('checked',false);
                    $("#pract2").show();
                    $("#numprac2").attr('disabled',true);
                    $("#numprac2").attr('checked',false);
                    $("#pract3").hide();
                    $("#numprac3").attr('disabled',true);
                    $("#numprac3").attr('checked',false);
                }else {
                    $("#pract1").hide();
                    $("#numprac1").attr('disabled',true);
                    $("#numprac1").attr('checked',false);
                    $("#pract2").hide();
                    $("#numprac2").attr('disabled',true);
                    $("#numprac2").attr('checked',false);
                    $("#pract3").show();
                    $("#numprac3").attr('disabled',true);
                    $("#numprac3").attr('checked',false);
                }
            }



            $(".numpraccheck").click(function(){
                var nomcheck = $(this).attr('id');
                var cantpract = parseInt('{{ escenariopractica.numero_practica }}');
                if(nomcheck == 'numprac1'){
                    if(!$("#numprac1").is(':checked')){
                        $("#numprac2").attr("checked",false);
                        $("#numprac3").attr("checked",false);
                    }
                }
                if(nomcheck == 'numprac2'){
                    if($("#numprac2").is(':checked')){
                        if(!$("#numprac1").is(':checked') && cantpract == 1){
                            $("#numprac2").attr("checked",false);
                            $("#numprac3").attr("checked",false);
                            smoke.alert('debe seleccionar la primera practica')
                        }
                    }
                    else{
                        $("#numprac3").attr("checked",false);
                    }
                }
                if(nomcheck == 'numprac3'){
                    if($("#numprac3").is(':checked')){
                        if(!$("#numprac1").is(':checked')  && cantpract == 1){
                            $("#numprac2").attr("checked",false);
                            $("#numprac3").attr("checked",false);
                            smoke.alert('debe seleccionar la primera practica')
                        }
                        else if(!$("#numprac2").is(':checked')  && cantpract == 2){
                            $("#numprac3").attr("checked",false);
                            smoke.alert('debe seleccionar la segunda practica')
                        }
                    }
                }
            });
            var nomreport = '';
            $(".generareport").click(function(){
                nomreport = $(this).attr('nomrep');
                $("#superrep").attr('myval',0);
                $("#coordinrep").attr('myval',0);
                $("#paramreportepanel").modal({backdrop: 'static', keyboard: 'false', width: "30%"});
                $("#paramreportepanel").modal("show");
            });
            var idinpugenrep = '';
            buscar_persona = function(query, process) {
                idinpugenrep = $(this).get(0).$element.get()[0].id;
                $("#"+idinpugenrep).attr('myval',0);
                $.get("/reportes", {'action':'databiblio', 'model': 'Persona:usuario__groups__id__in={{ gruposid }},usuario__is_active=True',
                                    'p': 1, 'q': query, 's': 10}, function(data) {
                    if (data.results.length > 0) {
                        $("#"+idinpugenrep).get(0).results = data.results;
                        listing = [];
                        for (var i in data.results) {
                            var dato = data.results[i];
                            listing.push(dato.name);
                        }
                        process(listing);
                    }
                    else{
                        $("#"+idinpugenrep).get(0).results = "";
                        $("#"+idinpugenrep).attr("myval",0);
                        listing = [];
                        process(listing);
                    }
                }, 'json');
            };

            $('.searchinput').typeahead({source: buscar_persona, updater: function(item) {
                var results = $("#"+idinpugenrep).get(0).results;
                for (var i in results) {
                    var datos = results[i];
                    if (item==datos.name) {
                        $("#"+idinpugenrep).attr('myval',datos.id);
                    }
                }
                return item;
            }});
            $('.btn-cancelgenreport').click(function(){
                $("#paramreportepanel").modal("hide");
            });
            $('.btn-ejectreporte').click(function(){
{#                if(parseInt($("#superrep").attr('myval'))> 0 && parseInt($("#coordinrep").attr('myval')) > 0){#}
                if(parseInt($("#coordinrep").attr('myval'))> 0){
                    $.post("/solicitud_practicasadm", {"action":'add_coordinadorpracticas', "solicitud": '{{ solicitudpractica.id }}', "persona":$("#coordinrep").attr('myval')}, function(data) {
                        if (data.result=='ok') {
                            smoke.alert("Coordinador registrado correctamente");
                        }else{
                            smoke.alert("Ocurrio un error al registrar coordinador")
                        }

                    }, "json");
{#                    window.open('/reportes?action=run&direct=true&n='+nomreport+'&rt=pdf&supervisor='+$("#superrep").attr('myval')+'&solicitud={{ solicitudpractica.id }}&coordinador='+$("#coordinrep").attr('myval'));#}
                    window.open('/reportes?action=run&direct=true&n='+nomreport+'&rt=pdf&supervisor={{ supervisor_practicas.id }}&solicitud={{ solicitudpractica.id }}&coordinador='+$("#coordinrep").attr('myval'));
                    var URLactual = window.location.href;
                    URLactual = URLactual.split('//')[1];
                    location.href = URLactual.split('/')[1];
                }
                else{
                    $("#errorgenerreport").html('<a class="alert alert-danger">Seleccione correctamente el coordinador</a>')
                }
            });


        });
    </script>
    <style type="text/css">
        .classpront{
            color: white;
            background: rgba(91,192,222,0.77);
            background: -moz-linear-gradient(top, rgba(91,192,222,0.77) 0%, rgba(47,150,180,0.65) 54%, rgba(47,150,180,0.55) 100%);
            background: -webkit-gradient(left top, left bottom, color-stop(0%, rgba(91,192,222,0.77)), color-stop(54%, rgba(47,150,180,0.65)), color-stop(100%, rgba(47,150,180,0.55)));
            background: -webkit-linear-gradient(top, rgba(91,192,222,0.77) 0%, rgba(47,150,180,0.65) 54%, rgba(47,150,180,0.55) 100%);
            background: -o-linear-gradient(top, rgba(91,192,222,0.77) 0%, rgba(47,150,180,0.65) 54%, rgba(47,150,180,0.55) 100%);
            background: -ms-linear-gradient(top, rgba(91,192,222,0.77) 0%, rgba(47,150,180,0.65) 54%, rgba(47,150,180,0.55) 100%);
            background: linear-gradient(to bottom, rgba(91,192,222,0.77) 0%, rgba(47,150,180,0.65) 54%, rgba(47,150,180,0.55) 100%);
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#5bc0de', endColorstr='#2f96b4', GradientType=0 );
        }
        .existecan button[ id|='prompt-ok']{
            color: #ffffff;
            background: #161616;
        }
        .existecan button[ id|='prompt-cancel']{
            color: #ffffff;
            background: #b11f1f;
        }
        .existecan input[ id|='dialog-input']{
            text-transform: uppercase;
            text-align: center;
        }
        .derecha .input-xxlarge{
            width:95%;
        }
        .derecha .input-small{
            width:20%;
        }
        .derecha .input-medium{
            width:30%;
        }
        .derecha>.row-fluid>.span2>b{
            width:100%;
        }
        .bordediv{
            border-radius: 10px 10px 10px 10px;
            -moz-border-radius: 10px 10px 10px 10px;
            -webkit-border-radius: 10px 10px 10px 10px;
            border: 2px solid #b3a6b3;
            padding: 1%;
        }
        .agregpat{
            border-radius: 45%;
            background: green;
            color:white;
            font-size: 20px;
            top: 12%;
            float: right;
            cursor: pointer;
        }
        .clsremovepat{
            border-radius: 15%;
            background: #e11b12;
            color:white;
            font-size: 14px;
            cursor: pointer;
            float: right;
        }

        .disabled {
            pointer-events: none;
            cursor: default;
            background: #eeeeee;
            color: #333333;
        }
    </style>
{% endblock %}
{% block canvas %}

    <div class="row-fluid">
        <div class="span11">
            <header style="text-align: center">
                <h2>DATOS DE PRACTICA PRE-PROFESIONALES DE {{ inscripcion }}
                </h2>
            </header>
        </div>
        <div class="span1">
            <a href="/solicitud_practicasadm?action=escenarios&id={{ inscripcion.id }}" class="btn btn-danger" style="float: right"><i class="icon-arrow-left"></i>Atras</a>
        </div>
    </div>
    {% if not es_supervisor %}
        {% if solicitudpractica.fichaentidadrec and solicitudpractica.escenariopractica.convenio %}
            <div class="row-fluid">
                <div class="span3">
                    <table class='table table-bordered table-striped' cellpadding="0" cellspacing="0">
                        <thead>
                            <tr>
                                <th colspan="4"  class="alert alert-success"><b >EMPRESA PROCESO DE SELECCION</b></th>
                            </tr>
                        </thead>
                        <thead>
                            <tr>
                                <th>Empresa</th>
                                <th>Cantidad</th>
                                <th>Aceptados</th>
                                <th>Solic. Envi.</th>
                            </tr>
                        </thead>
                        {% with procesoselec=solicitudpractica.fichaentidadrec.existe_procesoselec %}
                            <tbody >
                                <tr >
                                    {% if procesoselec %}
                                        <td >{{ procesoselec.0.empresa }}</td>
                                        <td style="text-align: center"><input type="number" class="input input-small" id="cantproces" value="{{ procesoselec.0.cantidad }}" readonly/> </td>
                                        <td style="text-align: center">{{ procesoselec.1 }}</td>
                                        <td style="text-align: center">{{ procesoselec.2 }}</td>
                                    {% else %}
                                        <td >{{ solicitudpractica.fichaentidadrec.convenio }}</td>
                                        <td style="text-align: center"><input type="number" class="input input-small" id="cantproces" value="0" readonly/></td>
                                        <td style="text-align: center">0</td>
                                        <td style="text-align: center">0</td>
                                    {% endif %}
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th colspan="4" >
                                        {% if procesoselec %}
                                            <a class="btn btn-info" style="float: left" id="editproceso"> Editar </a>
                                        {% endif %}
                                        <a class="btn btn-success" style="float: right" id="nuevproceso"> Nuevo </a>
                                        <a class="btn btn-warning" style="float: right;display: none" id="guarproceso"> Guardar </a>
                                        <a class="btn btn-danger" style="float: left;display: none" id="cancproceso"> Cancelar </a>
                                    </th>
                                </tr>

                        {% endwith %}
                    </table>
                </div>
            </div>
        {% endif %}
    {% endif %}
    {% if solicitudpractica %}
        <div class='row-fluid'>
            <div class="span12">
                {% if solicitudpractica.fecaprobada and solicitudpractica.fichaentidadrec and not solicitudpractica.enviada and solicitudpractica.escenariopractica.convenio  %}
                    {% with procesoselec=solicitudpractica.fichaentidadrec.existe_procesoselec %}
                        {% if procesoselec %}
                            <a style="cursor:pointer" class="btn btn-success btn-enviarsolicit"  nombre="{{ solicitudpractica.matricula.inscripcion.persona.nombre_completo }}" id="{{ s.id }}"><i class="icon-check"></i> Enviar Solicitud </a>
                        {% endif %}
                    {% endwith %}
                {% endif %}
                {% if not solicitudpractica.fecaprobada and not solicitudpractica.aprobada or solicitudpractica.fecaprobada and solicitudpractica.aprobada %}
                    <a style="cursor: pointer" class="btn btn-info  enviarcorreo" id="{{ solicitudpractica.id }}" nombre="{{ solicitudpractica.matricula.inscripcion.persona.nombre_completo }}"><i class="icon-circle-arrow-right"></i> Enviar Correo </a>
                {% endif %}
                {% if not solicitudpractica.fecaprobada and solicitudpractica.enviada and not solicitudpractica.escenariopractica.convenio   %}
                    <a style="cursor:pointer" class="btn btn-success aprobarsol"  nombre="{{ solicitudpractica.matricula.inscripcion.persona.nombre_completo }}" id="{{ s.id }}"><i class="icon-check"></i> Aprobar Solicitud </a>
                {% endif %}
                {% if solicitudpractica.promedioevasuper and not solicitudpractica.fecfinaliza  and solicitudpractica.fechestudfinal %}
                    <a style="cursor:pointer" class="btn btn-danger finalizapract"  nombre="{{ solicitudpractica.matricula.inscripcion.persona.nombre_completo }}" id="{{ s.id }}"><i class="icon-check"></i> Finalizar Práctica </a>
                {% endif %}
                {% if solicitudpractica.fichaentidadrec and solicitudpractica.fichaentidadrec.convenio and not es_supervisor%}
                    <a style="cursor: pointer;float:right" class="btn btn-warning" id="copificharecp" ><i class="icon-copy"></i> COPIAR FICHA RECEPTORA </a>
                {% endif %}
                {% if solicitudpractica.solicitudsecretariaenvi and not solicitudpractica.solicitudsecretariaenvi.cerrada or  not solicitudpractica.convenio and solicitudpractica.solicitudsecretaria and not solicitudpractica.solicitudsecretaria.cerrada or not solicitudpractica.convenio and solicitudpractica.rubroespecie and not solicitudpractica.rubroespecie.aplicada   %}
                    {% if not solicitudpractica.solicitudsecretaria.cerrada and solicitudpractica.solicitudsecretaria or solicitudpractica.solicitudsecretariaenvi and not solicitudpractica.solicitudsecretariaenvi.cerrada %}
                        <a style="cursor: pointer;float:right" href="/solicitudes" class="btn btn-warning" ><i class="icon-arrow-left"></i> IR A BANDEJA DE ATENCION </a>
                    {% else %}
                        <a style="cursor: pointer;float:right" href="/controlespecies" class="btn btn-warning" ><i class="icon-arrow-left"></i>  IR A BANDEJA DE ATENCION </a>
                    {% endif %}
                {% endif %}
            </div>
        </div>

        {% if solicitudpractica.fecfinaliza %}<br><br>
            <div class="row-fluid">
                <div class="span3">
                    <h3> PRACTICA FINALIZADA </h3>
                    <table class='table table-bordered table-striped' cellpadding="0" cellspacing="0">
                        <thead>
                            <tr>
                                <th> ESTADO PRACTICA</th>
                                <th class="alert {% if solicitudpractica.rechazado %} alert-danger {% else %} alert-success {% endif %}"> {% if solicitudpractica.rechazado %} <a style="color: #b94a48"> RECHAZADA </a>  {% else %}  <a style="color:#468847 "> REALIZADA </a>  {% endif %}</th>
                            </tr>
                            <tr>
                                {% if solicitudpractica.rechazado %}
                                   <th colspan="2" style="text-align: center"> Observación </th>
                                {% else %}
                                    <th> Número de Práctica</th>
                                    <th> Horas </th>
                                {% endif %}
                            </tr>
                        <thead>
                        <tbody>
                            {% if solicitudpractica.rechazado %}
                                <tr>
                                    <td colspan="2"> {{ solicitudpractica.observrechazado }} </td>
                                </tr>

                            {% else %}
                                {% for det in solicitudpractica.detallfinali %}
                                    <tr>
                                        <td> {{ det.practica }} </td>
                                        <td> {{ det.horas }} </td>
                                    </tr>
                                {% endfor %}
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        {% endif %}
    {% endif %}<hr>
    <div class="row-fluid">
        <div class="panel-heading">
            <ul class="nav nav-tabs">
                <li class="active">
                    <a href="#general" data-toggle="tab" id='tabgene'><h4> 1. FICHA ESTUDIANTE </h4> </a>
                </li>
                <li >
                    <a href="#ficharecep" data-toggle="tab" id='tabficharecep' ><h4> 2. FICHA RECEPTORA</h4>
                    </a>
                </li>
                <li >
                    <a href="#regactiv" data-toggle="tab" id='tabregactiv' {% if not solicitudpractica or solicitudpractica and not solicitudpractica.fecaprobada %} class="disabled" {% endif %} ><h4> 3. REGISTRO ACTIVIDADES</h4>
                    </a>
                </li>
                <li >
                    <a href="#documento" data-toggle="tab" id='tabdocument' ><h4> 4. ARCHIVOS DE PRACTICAS </h4>
                    </a>
                </li>
                <li >
                    <a href="#evalempresa" data-toggle="tab" id='tabevalempresa'  {% if not solicitudpractica or solicitudpractica and not solicitudpractica.fecaprobada %} class="disabled" {% endif %}><h4> 5. EVALUACIÓN DE LA EMPRESA </h4>
                    </a>
                </li>
                <li >
                    <a href="#evalinstitu" data-toggle="tab" id='tabevalinstitu'  {% if not solicitudpractica or solicitudpractica and not solicitudpractica.fecaprobada or solicitudpractica and solicitudpractica.fecaprobada and not solicitudpractica.evalsuperempre %} class="disabled" {% endif %} ><h4> 6. EVALUACIÓN DE LA INSTITUCION </h4>
                    </a>
                </li>
                <li >
                    <a href="#supervisiondocente" data-toggle="tab" id='tabsupervisiondocente' {% if not solicitudpractica or solicitudpractica and not solicitudpractica.fecaprobada %} class="disabled" {% endif %} ><h4> 7. VISITA DOCENTE </h4>
                    </a>
                </li>
            </ul>
        </div>
        <div class="panel-body">
            <div class="tab-content">
{#                    ///////////////////////////////////////////GENERAL////////////////////////////////////#}
{#                    ///////////////////////////////////////////GENERAL////////////////////////////////////#}
                <div class="tab-pane fade in active" id="general">
                    <div class="row-fluid" style="text-align: center">
                        <h3>DATOS GENERALES</h3><br><br>
                    </div>
                    <div class="row-fluid">
                        <div class="span9">
                            <section class="derecha">
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span2"><b>Apellidos y Nombres <a style="font-size: 20px;color: #000000">*</a>:</b></div>
                                    <div class="span8"><b>{{ inscripcion.persona.nombre_completo_inverso }} </b> </div>
                                </div><br/>
                                <div class="row-fluid" >
                                    <div class="span1"></div>
                                    <div class="span2"><b>N° de Indentidad:&nbsp;&nbsp; </b></div>
                                    <div class="span8">
                                        <b>{% if inscripcion.persona.cedula %}{{ inscripcion.persona.cedula }}{% else %}{{ inscripcion.persona.pasaporte }}{% endif %}</b>
                                    </div>
                                </div><br/>
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span2"><b>Dirección Principal:</b></div>
                                    <div class="span8">
                                        <textarea type='text' readonly id="direccion1" placeholder="Direcci&oacute;n Principal" style="width:60%;text-transform: uppercase" rows="4" cols="50" >{{ inscripcion.persona.direccion }}</textarea>
                                    </div>
                                </div><br/>
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span2"><b>Dirección Secundaria:</b></div>
                                    <div class="span8">
                                        <textarea type='text' readonly id="direccion2" placeholder="Direcci&oacute;n Secundaria" style="width:60%;text-transform: uppercase" rows="4" cols="50" >{{ inscripcion.persona.direccion2 }}</textarea>
                                    </div>
                                </div><br/>
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span2"><b>N° Domicilio:</b></div>
                                    <div class="span8">
                                        <input type="number" readonly class="form-control input-small"  value="{{ inscripcion.persona.num_direccion }}" id="numdom" autocomplete="off"/>
                                    </div>
                                </div><br/>
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span2"><b>Teléfono conv.:</b></div>
                                    <div class="span8"><input readonly type="text" class="form-control  input-small" id="telefonogen" autocomplete="off" placeholder="9999999999" value="{{ inscripcion.persona.telefono_conv }}" /></div>
                                </div><br/>
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span2"><b>Teléfono Celular:</b></div>
                                    <div class="span8"><input readonly type="text" class="form-control  input-small" id="celulargen" autocomplete="off" placeholder="9999999999" value="{{ inscripcion.persona.telefono }}"  /></div>
                                </div><br/>
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span2"><b>Email:</b></div>
                                    <div class="span8"><input readonly type="text" class="form-control input-xxlarge" autocomplete="off" id="emailgen" value="{{ inscripcion.persona.email }}" placeholder="Email" /></div>
                                </div><br/>

                            </section>
                        </div>
                        <div class="span3">
                            <section class="derecha">

                                <br/>
                                <div class="row-fluid">
                                    <div class="thumbnail" style="height: 270px">
                                        {% if solicitudpractica.foto %}
                                            <img src="{{ solicitudpractica.foto.url }}" id="prefotogen" alt="" style="width: 300px;height: 200px">
                                        {% else %}
                                            {% if inscripcion.persona.sexo_id == 1 %}
                                                <img src="/static/images/nofotofem.jpg" id="prefotogen" alt="" style="height: 200px">
                                            {% else %}
                                                <img src="/static/images/nofotomas.jpg" id="prefotogen" alt="" style="height: 200px">
                                           {% endif %}
                                        {% endif %}
                                    </div>
                                    <a class="btn btn-success" id="guardafotogen" style="display: none"><i class="icon-save"></i> Guardar</a>
                                </div><br/>
                            </section>
                        </div>
                    </div>

                    <div class="row-fluid" style="text-align: center">
                        <h3>DATOS ACADEMICOS</h3><br><br>
                    </div>
                    <div class="row-fluid">
                        <div class="span9">
                            <section class="derecha">
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span2"><b> Carrera:</b></div>
                                    <div class="span9"><b>{{ inscripcion.carrera }} </b> </div>
                                </div><br/>
                            </section>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span9">
                            <section class="derecha">
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span2"><b> Paralelo:</b></div>
                                    <div class="span9"><b>{{ inscripcion.ultima_matricula_pararetiro.nivel.grupo.nombre }} </b> </div>
                                </div><br/>
                            </section>
                        </div>
                    </div>

                    <div class="row-fluid">
                        <div class="span9">
                            <section class="derecha">
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span2"><b> Periodo Académico(Nivel):</b></div>
                                    <div class="span9"><b>{{ inscripcion.ultima_matricula_pararetiro.nivel.nivelmalla }} - {{ inscripcion.ultima_matricula_pararetiro.nivel.periodo }}  </b>
                                        {% if inscripcion.ultima_matricula_pararetiro.nivel.cerrado %}
                                            <a class="label label-important">Cerrado</a>
                                        {% else %}
                                            <a class="label label-success">Abierto</a>
                                        {% endif %}
                                    </div>
                                </div><br/>
                            </section>
                        </div>
                    </div>

                    <div class="row-fluid">
                        <div class="span9">
                            <section class="derecha">
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span2"><b> Promedio:</b></div>
                                    <div class="span9">{{ inscripcion.calculopromedio }}</div>
                                </div><br/>
                            </section>
                        </div>
                    </div>

                    <div class="row-fluid" style="text-align: center">
                        <div class="span9">
                            <h3>EXPERIENCIA LABORAL</h3><br><br>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span9">
                            <section class="derecha">
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span11">

                                        <table class='table' cellpadding="0" cellspacing="0" id="tab_logic">
                                            <thead>
                                                <tr>
                                                    <th style="text-align: center;width: 3%"> Convenio </th>
                                                    <th style="text-align: center;width: 30%"> Últimos lugares donde ha laborado (Nombre de la Empresa) </th>
                                                    <th style="text-align: center;width: 10%"> Periodo de tiempo (meses) </th>
                                                    <th style="text-align: center;width: 60%"> Funciones realizadas </th>
                                                    <th style="text-align: center;width: 7%"></th>
                                                </tr>
                                            </thead>
                                            <tbody id="ExpeLabAddForm">
                                                <tr id='addr0' data-id="0" con="0" class="hidden">
                                                    <td data-name="convenio"><br>
                                                        <input type="checkbox" disabled style="width: 50%;height: 2em" class="input input-xxlarge convenioemcla" id="convenio0" alt="0" name="convenio0"/>
                                                    </td>
                                                    <td data-name="lugar"><br>
                                                        <input type="text" disabled class="input input-xxlarge busempresaexp" id="lugar0" alt="0"  idexplab="0" name="lugar0" myval="0"/>
                                                    </td>
                                                    <td data-name="tiempo"><br>
                                                        <input type="number" disabled class="input input-xxlarge" id="tiempo0" name="tiempo0"/>
                                                    </td>
                                                    <td data-name="funcion">
                                                        <textarea type='text' disabled  id="funcion0" name="funcion0" placeholder="Funciones Realizadas" style="width:90%;text-transform: uppercase" rows="4" cols="50" ></textarea>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
{#                      ///////////////////////////////////////////FICHA ENTIDAD RECEPTORA//////////////////////////////////////#}
{#                      ///////////////////////////////////////////FICHA ENTIDAD RECEPTORA//////////////////////////////////////#}
                <div class="tab-pane fade" id="ficharecep">

                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6" style="text-align: center"><h3>FICHA DE ENTIDAD RECEPTORA</h3></div>

                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6">
                            <div class="span12">
                                <h4 id="advruc"></h4>
                            </div>
                            <div class="span12">
                                {% if escenariopractica.convenio %}
                                    <b>Convenio</b><input type="checkbox"  id="convenio" name="convenio" style="width: 10%;height: 2em" disabled checked/><br>
                                {% endif %}
                            </div>
                            <div class="span5">
                                <b>RUC:</b><br>
                                <input type="text" placeholder="Número de RUC de la entidad" myval="0" class="input input-large" id="rucent" name="rucent"/>
                                <p id="prucent" style="color: red"></p>
                            </div>
                            {% if not escenariopractica.convenio %}
                                <div class="span5">
                                    <b>Estado Empresa:</b>
                                    <br>
                                    <select  id='estadoemprfich'  name='estadoemprfich' class="input-large bigger" style="width: 98%" disabled>
                                        <option value='0'>-----</option>
                                        {% for e in estadoempresa %}
                                            <option value="{{ e.id }}" > {{ e }}  </option>
                                        {% endfor %}
                                    </select><br>
                                    <a style="cursor: pointer;float: right;display: none" id="guardaremestad" class="label label-success"> Guardar </a>
                                    <a style="cursor: pointer;float: right;display: none" id="editemestad" class="label label-info"> Editar </a>
                                    <a style="cursor: pointer;float: left;display: none" id="cancelemestad" class="label label-important" onclick="location.reload();"> Cancelar </a>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6">
                            <b>Nombre de la entidad receptora:</b><br>
                            <input type="text" placeholder="Escriba el Nombre de la entidad Receptora" autocomplete="off" class="input input-xxlarge" style="width: 90%;text-transform: uppercase" id="entidadrec" name="entidadrec" />
                            <p id="pentidadrec" style="color: red"></p>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6">
                            <b>Actividad económica principal:</b><br>
                            <input type="text" placeholder="Escriba la actividad económica de la entidad Receptora"  style="width: 90%;text-transform: uppercase" class="input input-xxlarge" id="actividaent" name="actividaent" disabled/>
                            <p id="pactividaent" style="color: red"></p>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6">
                            <b>Dirección:</b><br>
                            <input type="text" placeholder="Escriba la dirección de la entidad Receptora" class="input input-xxlarge"  style="width: 90%;text-transform: uppercase" id="direccionent" name="direccionent" disabled/>
                            <p id="pdireccionent" style="color: red"></p>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6">
                            <div class="span6">
                                <b>Provincia:</b><br>
                                <input type="text" placeholder="Escriba la Provincia de la entidad Receptora" class="input input-xxlarge" autocomplete="off"  style="width: 90%" id="provinciarec" name="provinciarec" myval="0" disabled/>
                                <p id="pprovinciarec" style="color: red"></p>
                            </div>
                            <div class="span6">
                                <b>Ciudad:</b><br>
                                <input type="text" placeholder="Escriba la Ciudad de la entidad Receptora" class="input input-xxlarge" autocomplete="off"  style="width: 90%" id="ciudadrec" name="ciudadrec" myval="0" disabled/>
                                <p id="pciudadrec" style="color: red"></p>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6"><hr>
                            <h4>INFORMACIÓN DE LA PRACTICA</h4>
                            <hr></div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6">
                            <div class="span6">
                                <b>Fecha de inicio práctica:</b><br>
                                <input type="text" placeholder="Fecha Inicio" class="input input-xxlarge"  style="width: 90%" id="feciniciopr" value="{{ fechahoy|date:'Y-m-d' }}" name="feciniciopr"/>
                                <p id="pfeciniciopr" style="color: red"></p>
                            </div>
                            <div class="span6">
                                <b>Fecha de culminación de la práctica:</b><br>
                                <input type="text" placeholder="Fecha Fin" class="input input-xxlarge"  style="width: 90%" id="fecfinpr"  value="{{ fechahoy|date:'Y-m-d' }}" name="fecfinpr"/>
                                <p id="pfecfinpr" style="color: red"></p>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6">
                            <div class="span6">
                                <b>Hora Inicio Práctica:</b><br>
                                <input type="text" placeholder="Hora inico" class="input input-small" id="horiniprac" name="horiniprac"/>
                                <p id="phoriniprac" style="color: red"></p><br>
                                <b>Hora Fin Práctica:</b><br>
                                <input type="text" placeholder="Hora fin" class="input input-small"  id="horfinprac" name="horfinprac"/>
                                <p id="phorfinprac" style="color: red"></p>
                                <b>Horas a laborar:</b><br>
                                <input type="text" placeholder="Hora fin" class="input input-small"  id="horlabprac" name="horlabprac" value="00:00" readonly/>
                                <p id="phorlabprac" style="color: red"></p>
                            </div>
                            <div class="span6" style="border: 1px rgb(204 204 204) solid;padding: 4px;border-radius: 10px;text-align:center;">
                                <b>Jornada laboral</b>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <b>Lunes:</b><input type="checkbox"  id="lunes" name="convenio" style="width: 25%;height: 2em" class="classchekdias"/><br>
                                    </div>
                                    <div class="span6">
                                        <b>Martes:</b><input type="checkbox"  id="martes" name="convenio" style="width: 25%;height: 2em" class="classchekdias"/><br>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <b>Miercoles:</b><input type="checkbox"  id="miercoles" name="convenio" style="width: 25%;height: 2em" class="classchekdias"/><br>
                                    </div>
                                    <div class="span6">
                                        <b>Jueves:</b><input type="checkbox"  id="jueves" name="convenio" style="width: 25%;height: 2em" class="classchekdias"/><br>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <b>Viernes:</b><input type="checkbox"  id="viernes" name="convenio" style="width: 25%;height: 2em" class="classchekdias"/><br>
                                    </div>
                                    <div class="span6">
                                        <b>Sábado:</b><input type="checkbox"  id="sabado" name="convenio" style="width: 25%;height: 2em" class="classchekdias"/><br>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <b>Domingo:</b><input type="checkbox"  id="domingo" name="convenio" style="width: 25%;height: 2em" class="classchekdias"/><br>
                                    </div>
                                </div>

                                <p id="pdiasseman" style="color: red"></p>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6">
                            <b>Dirección de correo electrónico del tutor de la entidad receptora:</b><br>
                            <input type="text" placeholder="Escriba la dirección de correo electrónico del tutor por parte de la entidad receptora" class="input input-xxlarge"  style="width: 90%" id="emailtut" name="emailtut"/>
                            <p id="pemailtut" style="color: red"></p>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6">
                            <b>Nombres y Apellidos del tutor de la entidad receptora:</b><br>
                            <input type="text" placeholder="Nombres y Apellidos del tutor por parte de la entidad Receptora" class="input input-xxlarge"  style="width: 90%;text-transform: uppercase" id="nomtutrec" name="nomtutrec"/>
                            <p id="pnomtutrec" style="color: red"></p>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6">
                            <div class="span6">
                                <b>Cargo del tutor de la entidad receptora:</b><br>
                                <input type="text" placeholder="Escribir el cargo del tutor por parte de la entidad receptora." class="input input-xxlarge"  style="width: 90%;text-transform: uppercase" id="cargorec" name="cargorec"/>
                                <p id="pcargorec" style="color: red"></p>
                            </div>
                            <div class="span6">
                                <b>Número de prácticas:</b><br>
                                <div class="row-fluid" style="text-align: center">
                                    <div class="span2" id="pract1" {% if escenariopractica.numero_practica != 1 %} style="display: none" {% endif %}>
                                        <b> 1 </b><br/>
{#                                        <input type="number" placeholder="Número de práctica a realizar"  value="{{ escenariopractica.numero_practica }}" class="input input-xxlarge"  style="width: 90%;text-align: center" id="numprac" name="numprac" readonly/>#}
                                        <input type="checkbox" class="input input-xxlarge numpraccheck"  style="width: 90%;height: 2em;text-align: center" id="numprac1" name="numprac1" disabled/>
                                        <p id="pnumprac1" style="color: red"></p>
                                    </div> &nbsp; &nbsp; &nbsp; &nbsp;
                                    <div class="span2" id="pract2" {% if escenariopractica.numero_practica != 2 %} style="display: none" {% endif %}>
                                        <b> 2 </b><br/>
{#                                        <input type="number" placeholder="Número de práctica a realizar"  value="{{ escenariopractica.numero_practica }}" class="input input-xxlarge"  style="width: 90%;text-align: center" id="numprac" name="numprac" readonly/>#}
                                        <input type="checkbox" class="input input-xxlarge numpraccheck"  style="width: 90%;height: 2em;text-align: center" id="numprac2" name="numprac2" disabled/>
                                        <p id="pnumprac2" style="color: red"></p>
                                    </div> &nbsp; &nbsp; &nbsp; &nbsp;
                                    <div class="span2" id="pract3" {% if escenariopractica.numero_practica != 3 %} style="display: none" {% endif %}>
                                        <b> 3 </b><br/>
{#                                        <input type="number" placeholder="Número de práctica a realizar"  value="{{ escenariopractica.numero_practica }}" class="input input-xxlarge"  style="width: 90%;text-align: center" id="numprac" name="numprac" readonly/>#}
                                        <input type="checkbox" class="input input-xxlarge numpraccheck"  style="width: 90%;height: 2em;text-align: center" id="numprac3" name="numprac3" disabled/>
                                        <p id="pnumprac3" style="color: red"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span2"></div>
                        <div class="span6">
                            <div class="span6">
                                <b>Número de teléfono institucional:</b><br>
                                <input type="number" placeholder="Escriba el número de teléfono" class="input input-xxlarge"  style="width: 90%" id="convenrec" name="convenrec"/>
                                <p id="pconvenrec" style="color: red"></p>
                                <b>Extension:</b><br>
                                <input type="number" placeholder="Escriba la extension" class="input input-xxlarge"  style="width: 90%" id="extensionrec" name="extensionrec"/>
                                <p id="pextensionrec" style="color: red"></p>
                            </div>
                            <div class="span6">
                                <b>Número de teléfono celular:</b><br>
                                <input type="number" placeholder="Escriba el número de teléfono" class="input input-xxlarge"  style="width: 90%" id="celularrec" name="celularrec"/>
                                <p id="pcelularrec" style="color: red"></p>
                            </div>
                        </div>
                    </div>
                    {% if not es_supervisor %}
                        <div class="row-fluid ">
                            <div class="span2"></div>
                            <div class="span6"><br><br>
                                {% if not solicitudpractica and escenariopractica.convenio or solicitudpractica and solicitudpractica.fecaprobada and escenariopractica.convenio%}
                                    <a class="btn btn-success" style="float: right;" id="guardfichrecpt"><i class="icon-save"></i> Guardar</a>
                                {% endif %}
                                {% if solicitudpractica and escenariopractica.convenio%}
                                    <a class="btn btn-info" style="float: right;" id="editfichrecpt" onclick="desbloquearfichrecep()"><i class="icon-edit"></i> Editar</a>
                                    <a class="btn btn-success" style="float: right;display: none" id="guardfichrecpt"><i class="icon-save"></i> Guardar</a>
                                {% endif %}
                                <a class="btn btn-danger" style="float: right;display: none" id="cancelfichrecpt" onclick="bloquearfichrecep();"><i class="icon-remove"></i> Cancelar</a>
                            </div>
                        </div>
                    {% endif %}
                </div>
{#                      ///////////////////////////////////////////REGISTRO ACTIVIDADES//////////////////////////////////////#}
{#                      ///////////////////////////////////////////REGISTRO ACTIVIDADES//////////////////////////////////////#}
                <div class="tab-pane fade" id="regactiv">

                    <div class="row-fluid">
                        <div class="span12">
                            <section class="derecha">
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span10">
                                        <table class='table' cellpadding="0" cellspacing="0" id="tab_logic">
                                            <thead>
                                                <tr>

                                                    <th style="text-align: center;width: 15%">Fecha</th>
                                                    <th style="text-align: center;width: 35%">Actividad</th>
                                                    <th style="text-align: center;width: 35%">Observación</th>
                                                    <th style="text-align: center;width: 5%">H. inicio</th>
                                                    <th style="text-align: center;width: 5%">H. fin</th>
                                                    <th style="text-align: center;width: 5%">H. Laboradas</th>
                                                </tr>
                                            </thead>
                                            <tbody id="RegActivAddForm">
                                                <tr id='addr0' data-id="0" con="0" class="hidden">
                                                    <td data-name="fechregact"><br>
                                                        <input disabled type="text" class="input input-large" id="fechregact0" name="fechregact0" myval='0'/>
                                                    </td>
                                                    <td data-name="actividadreg"><br>
                                                        <textarea disabled type='text'  id="actividadreg0" name="actividadreg0" placeholder="Actividades Realizadas" style="width:90%;text-transform: uppercase" rows="4" cols="50" ></textarea>
                                                    </td>
                                                    <td data-name="observacionreg"><br>
                                                        <textarea disabled type='text'  id="observacionreg0" name="observacionreg0" placeholder="Observacion" style="width:90%;text-transform: uppercase" rows="4" cols="50" ></textarea>
                                                    </td>
                                                    <td data-name="hinicioreg"><br>
                                                        <input disabled type="time" class="input input-xxlarge" id="hinicioreg0" name="hinicioreg0"/>
                                                    </td>
                                                    <td data-name="hfinreg"><br>
                                                        <input disabled type="time" class="input input-xxlarge" id="hfinreg0" name="hfinreg0"/>
                                                    </td>
                                                    <td data-name="hlaborreg"><br>
                                                        <input disabled type="time" class="input input-xxlarge" id="hlaborreg0" name="hlaborreg0"/>
                                                    </td>
                                                </tr>
                                            </tbody>

                                        </table>

                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>

                </div>
{#                      ///////////////////////////////////////////REPORTES PRACTICAS//////////////////////////////////////#}
{#                      ///////////////////////////////////////////REPORTES PRACTICAS//////////////////////////////////////#}
                <div class="tab-pane fade" id="documento">
                    <div class="row-fluid">
                        <div class="span12">
                            <div class="row-fluid">
                                <div class="span1"></div>
                                <div class="span8" style="text-align: center">
                                    <h3>Archivos de Practicas</h3>
                                    <table class='table' cellpadding="0" cellspacing="0" id="tab_logic">
                                        <thead>
                                            <tr>
                                                <th ><h3> Nombre </h3></th>
                                                <th ><h3> Reporte  </h3></th>
                                                <th ><h3> Archivo Subido  </h3></th>
                                                <th ><h3> Acciones </h3> </th>
                                                <th ><h3> Revisado </h3></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for r in reportepracticas %}
                                                {% if solicitudpractica %}
                                                    {% with reportsoli=r|args:solicitudpractica.id|call:"reportepractsolic_existe" %}
                                                        <tr>
                                                            <td> {{ r.nombre }} </td>
                                                            <td>
                                                                {% if r.reporte and not r.estudiante %}<a {% if ID_REPORTE_CARTA_ASIGNAC == r.nombre.id %} style="cursor:pointer;text-align: center" nomrep="{{ r.reporte }}" class="btn btn-success generareport" {% else %}  class="btn btn-success"  style="text-align: center"{% endif %} > Generar  </a> {% endif %} </td>
                                                            <td style="text-align: center" >
                                                                {% if reportsoli %}
                                                                    <div class="row-fluid" >
                                                                        <input type="file" value=""  class="archsubir" idr="{{ r.id }}"  name="archestudiant{{ r.id }}" id="archestudiant{{ r.id }}" style="display: none">
                                                                        <p class="help-text" style="display: none">Tamano Maximo permitido 40Mb, en formato pdf. </p>
                                                                    </div>
                                                                    <a id="adescarch{{ r.id }}"  href="{{ reportsoli.archivo.url }}" target="_blank" style="text-align: center" class="btn btn-success"> Descargar  </a>
                                                                {% else %}
                                                                    {% if not r.estudiante and solicitudpractica.fecaprobada and solicitudpractica.aprobada or not r.estudiante and not solicitudpractica.fecaprobada %}
                                                                        <div class="row-fluid">
                                                                            <input type="file" value="" idr="{{ r.id }}" class="archsubir" name="archestudiant{{ r.id }}" id="archestudiant{{ r.id }}" >
                                                                            <p class="help-text">Tamano Maximo permitido 40Mb, en formato pdf. </p>
                                                                        </div>
                                                                    {% endif %}
                                                                {% endif %}

                                                            </td>
                                                            <td>
                                                                {% if reportsoli and not reportsoli.revisado and not r.estudiante and solicitudpractica.fecaprobada and solicitudpractica.aprobada or reportsoli and not reportsoli.revisado and not r.estudiante and not solicitudpractica.fecaprobada   %}
                                                                    <a id="aeditarch{{ r.id }}" idr="{{ r.id }}" reptsolid="{{ reportsoli.id }}" style="text-align: center" class="btn btn-info editarch"> Editar  </a>
                                                                {% endif %}
                                                                <a id="aguardarch{{ r.id }}" idr="{{ r.id }}" reptsolid="{{ r.id }}" style="float: right;display: none" class="btn btn-warning aguardarch"> Guardar  </a>
                                                                <a id="acancelch{{ r.id }}" onclick="location.reload();" idr="{{ r.id }}" reptsolid="{{ r.id }}" style="float: left;display: none" class="btn btn-danger"> Cancelar  </a>
                                                            </td>
                                                            <td>
                                                                {% if reportsoli and solicitudpractica.fecaprobada and solicitudpractica.aprobada or reportsoli and not solicitudpractica.fecaprobada  %}
                                                                    <input type="checkbox" class="input-medium checkrevisado" reptsolid="{{ reportsoli.id }}" style="width: 95%;height: 2em" {% if reportsoli.revisado  %} disabled checked  {% endif %}/>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                    {% endwith %}
                                                {% else %}
                                                    <tr>
                                                        <td> {{ r.nombre }} </td>
                                                        <td><a href="" class="btn btn-success"> Descargar  </a> </td>
                                                        <td>
                                                            {% if not r.estudiante and solicitudpractica.fecaprobada and solicitudpractica.aprobada or not r.estudiante and not solicitudpractica.fecaprobada %}
                                                                <div class="row-fluid">
                                                                    <input type="file" idr="{{ r.id }}" class="archsubir" value="" name="archestudiant{{ r.id }}" id="archestudiant{{ r.id }}" >
                                                                    <p class="help-text">Tamano Maximo permitido 40Mb, en formato pdf. </p>
                                                                </div>
                                                            {% endif %}
                                                        </td>
                                                        <td>
                                                            <a id="aguardarch{{ r.id }}" idr="{{ r.id }}" reptsolid="{{ r.id }}" style="float: right;display: none" class="btn btn-warning aguardarch"> Guardar  </a>
                                                            <a id="acancelch{{ r.id }}" onclick="location.reload();" idr="{{ r.id }}" reptsolid="{{ r.id }}" style="float: left;display: none" class="btn btn-success"> Cancelar  </a>
                                                        </td>
                                                        <td></td>
                                                    </tr>
                                                {% endif %}
                                            {% endfor %}
                                            {% if not reportepracticas %}
                                                <tr><td colspan="2"><h4>NO HAY REPORTES </h4></td></tr>
                                            {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div><br/>

                </div>
{#                      ///////////////////////////////////////////EVALUACION EMPRESA//////////////////////////////////////#}
{#                      ///////////////////////////////////////////EVALUACION EMPRESA//////////////////////////////////////#}
                <div class="tab-pane fade" id="evalempresa">
                    <div class="row-fluid">
                        <div class="span12">
                            <div class="row-fluid">
                                <div class="span1"></div>
                                <div class="span6" style="text-align: center">
                                    <h3>Evaluación de las practicas</h3>
                                    <h4>Iendique dando click en la evaluación que usted considere adecuada, basada en el desempeño del estudiante durante la Práctica Pre-profesional laboral, y tenindo en cuenta la siguiente escala:   </h4>
                                    <h6>
                                        {% for p in puntajeindicador %}
                                            {{ p.puntos }}.- {{ p.descripcion }}&nbsp;&nbsp;&nbsp;&nbsp;
                                        {% endfor %}
                                    </h6>
                                    <table  class='table' cellpadding="0" cellspacing="0" id="tab_logic">
                                        <thead>
                                            <tr >
                                                <th colspan="2"><h4 style="text-align: center">INDICADORES:</h4> </th>
                                                {% for p in puntajeindicador %}
                                                    <th> {{ p.puntos }}</th>
                                                {% endfor %}
                                                <th>Puntaje</th>
                                            </tr>
                                        </thead>
                                        <tbody id="bodyformulario">
                                            {% for s in segmentoindicadoremp %}
                                                <tr alt="{{ forloop.counter }}" segid="{{ s.id }}" idin="0">
                                                    <th rowspan="{{ s.numsegspan }}" style="vertical-align : middle;text-align:center;"> {{ s.descripcion }}</th>
                                                </tr>
                                                {% for d in s.segdetaindica %}
                                                    {% if solicitudpractica %}
                                                        {% with evalsuperemp=d|args:solicitudpractica.id|call:"existe_evalsuperemp" %}
                                                            <tr alt="{{ forloop.counter }}" segid="{{ s.id }}" idin="0">
                                                                <td> {{ d.descripcion }}</td>
                                                                {% for p in puntajeindicador %}
                                                                    <td><input type="checkbox" {% if evalsuperemp.puntajeindicador == p %} checked  {% endif %} disabled class="input input-xxlarge indicador" id="indicador{{ d.id }}{{ p.id }}" idin="{{ p.id }}" idsegdet="{{ d.id }}" /></td>
                                                                {% endfor %}
                                                                <td><input type="number" value="{% if evalsuperemp %}{{ evalsuperemp.puntajeindicador.puntos }}{% else %}0{% endif %}" id="puntaje{{ d.id }}" style="text-align: center;font-size: 1.5em;font-weight: bold" class="input input-small" disabled/></td>
                                                            </tr>
                                                        {% endwith %}
                                                    {% else %}
                                                        <tr alt="{{ forloop.counter }}" segid="{{ s.id }}" idin="0">
                                                            <td> {{ d.descripcion }}</td>
                                                            {% for p in puntajeindicador %}
                                                                <td><input type="checkbox"  disabled class="input input-xxlarge indicador" id="indicador{{ d.id }}{{ p.id }}" idin="{{ p.id }}" idsegdet="{{ d.id }}" /></td>
                                                            {% endfor %}
                                                            <td><input type="number" value="0" id="puntaje{{ d.id }}" style="text-align: center;font-size: 1.5em;font-weight: bold" class="input input-small" disabled/></td>
                                                        </tr>
                                                    {% endif %}
                                                {% endfor %}
                                            {% endfor %}
                                        </tbody>
                                        <tfoot id="tfootform">

                                        </tfoot>
                                    </table>
                                </div>
                                <div class="span3" style="text-align: center">
                                    {% if solicitudpractica.evalsuperempre %}
                                        <a href="{{ solicitudpractica.archsupervempresa.url }}" class="btn btn-info"> <i class="icon-download"></i> Descargar Archivo </a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div><br/>

                </div>
{#                      ///////////////////////////////////////////EVALUACION INSTITUCION//////////////////////////////////////#}
{#                      ///////////////////////////////////////////EVALUACION INSTITUCION//////////////////////////////////////#}
                <div class="tab-pane fade" id="evalinstitu">
                    <div class="row-fluid">
                        <div class="span12">
                            <div class="row-fluid">
                                <div class="span3"></div>
                                <div class="span6" style="text-align: center">
                                    <div class="row-fluid">
                                        <div class="span12">
                                            <h3>SUPERVISIÓN DE LA PRÁCTICA PRE-PROFESIONAL LABORAL </h3>
                                            <h3 style="font-weight: normal"> (SOLO PARA USO DEL SUPERVISOR ACADÉMICO) </h3>
                                        </div>
                                    </div>
                                    <div class="row-fluid">
                                        <h3>
                                            <b> Supervisado </b> <input type="checkbox" id="supervisado" {% if solicitudpractica.supervisado %} checked disabled {% endif %} style="width: 4%;height: 3em;"/>&nbsp;&nbsp;&nbsp;
                                            <b> No supervisado </b> <input type="checkbox" id="nosupervisado" {% if not solicitudpractica.supervisado and solicitudpractica.fechasupervis %} checked disabled {% endif %}{% if solicitudpractica.fechasupervis %} disabled {% endif %} style="width: 4%;height: 3em;"/>
                                        </h3>
                                    </div>
                                    <h4>Indique dando click en la evaluación que usted considere adecuada, en el momento de la supervisión durante la Práctica Pre-profesional laboral, teniendo en cuenta el cumplimiento de los siguientes indicadores:   </h4>

                                    <table  class='table' cellpadding="0" cellspacing="0" id="tab_logic">
                                        <thead>
                                            <tr >
                                                <th ><h4 style="text-align: center">INDICADORES:</h4> </th>
                                                <th> <h4>Cumple</h4></th>
                                                <th><h4>No cumple</h4></th>
                                            </tr>
                                        </thead>
                                        <tbody >
                                            {% if exiteevalacadem %}
                                                {% for i in solicitudpractica.evalsuperinstit %}
                                                    <tr >
                                                        <th > {{ i.indicadoracademico.descripcion }}</th>
                                                        <th style="text-align: center"><a ><input {% if i.cumple %} checked {% endif %} type="checkbox" disabled/></a></th>
                                                        <th style="text-align: center"><a ><input {% if not i.cumple %} checked {% endif %} type="checkbox"  disabled  /> </a></th>
                                                    </tr>

                                                {% endfor %}
                                            {% else %}
                                                {% for i in indicadoracademico %}
                                                    <tr >
                                                        <th > {{ i.descripcion }}</th>
                                                        <th style="text-align: center"><a ><input type="checkbox" id="cumple{{ i.id }}" alt="{{ i.id }}" class="cumpleevaca" /></a></th>
                                                        <th style="text-align: center"><a ><input type="checkbox" id="nocumple{{ i.id }}" alt="{{ i.id }}" class="nocumpleevaca"  /> </a></th>
                                                    </tr>

                                                {% endfor %}
                                            {% endif %}
                                        </tbody>
                                        <tfoot id="tfootevacade">

                                        </tfoot>
                                    </table>
                                    <div class="row-fluid">
                                        <hr><b style="font-size: 1.5em">OBSERVACIONES</b><br/>
                                        <textarea name="obserevainstit" id="obserevainstit" cols="60" rows="5" style="float: left;width: 99%" {% if solicitudpractica.observacionevalaca %} readonly {% endif %}>{% if solicitudpractica.observacionevalaca %} {{  solicitudpractica.observacionevalaca }} {% endif %}</textarea>
                                    </div>
                                    {% if not solicitudpractica.evalsuperinstit %}
                                        <div class="row-fluid">
                                            <a style="cursor: pointer;float: right" class="btn btn-success btn-guardarevalinst"> <b> Guardar</b></a>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div><br/>
                </div>

{#                      ///////////////////////////////////////////SUPERVISION DOCENTE//////////////////////////////////////#}
{#                      ///////////////////////////////////////////SUPERVISION DOCENTE//////////////////////////////////////#}
                <div class="tab-pane fade" id="supervisiondocente">
                    <div class="row-fluid ">
                        <div class="span3"></div>
                        <div class="span6">
                            <input type="text" id="txtprueba" name="txtprueba" class="hidden"/>
                            <h3 style="text-align: right;" id='num_visitas'></h3>
                        </div>
                    </div>

                    <div class="row-fluid ">
                        <div class="span3"></div>
                        <div class="span6">
                            <div class="panel-heading">
                                <ul class="nav nav-tabs">
                                    {% for s in supervisiones %}
                                        <li>
                                            <a href="#agregar_supervision" num_supervision="{{ s.numsupervision }}" id_supervision="{{ s.id }}" data-toggle="tab" class="tabindicadores2"><h4>{{ s.numsupervision }}</h4> </a>
                                        </li>
                                    {% endfor %}
                                    {% if es_supervisor %}
                                        <li class="active">
                                            <a href="#agregar_supervision" class="btn btn-success" style="cursor: pointer" data-toggle="tab" id='tabagregarsupervision' {% if false %} class="disabled" {% endif %}><i class="icon-plus icon-white"></i><h4></h4> </a>
                                        </li>
                                    {% endif %}
                                </ul>
                            </div>

{#                            <div class="panel-body">#}
                            <div class="row-fluid" hidden id="body_supervision">
{#                                <div class="tab-content">#}
{#                                    <div class="tab-pane fade" id="supervisionindicadores">#}
{#                                        <div class="row-fluid ">#}
{#                                            <h3>SUPERVISIONES</h3><br>#}
{#                                        </div>#}
{#                                    </div>#}

{#                                    <div class="tab-pane fade" id="agregar_supervision">#}
                                    {% if not es_supervisor and not supervisiones %}
                                        <h3>NO SE HAN REGISTRADO SUPERVISIONES</h3>
                                    {% else %}
                                        <div class="row-fluid ">
{#                                            <div class="span3"></div>#}
                                            <div class="span12" style="text-align: center"><h3>DATOS DEL SUPERVISOR ACADEMICO</h3></div>
                                        </div>
                                        <div class="row-fluid ">
{#                                            <div class="span3"></div>#}
                                            <div class="span12">
                                                <b>Apellidos y Nombres:</b><br>
                                                <input type="text" autocomplete="off" class="input input-xxlarge" style="width: 100%;text-transform: uppercase" id="nombresupervisor" name="nombresupervisor" disabled value="{{ solicitudpractica.supervisorpracticas.profesormateria.profesor.persona.nombre_completo_inverso }}"/>
                                            </div>
                                        </div>
                                        <div class="row-fluid ">
{#                                            <div class="span3"></div>#}
                                            <div class="span12">
                                                <b>Cédula de identidad:</b><br>
                                                <input type="text" style="width: 100%;text-transform: uppercase" class="input input-xxlarge" id="cedulasupervisor" name="cedulasupervisor" disabled value="{% if solicitudpractica.supervisorpracticas.profesormateria.profesor.persona.cedula %}{{ solicitudpractica.supervisorpracticas.profesormateria.profesor.persona.cedula }} {% else %} {{ solicitudpractica.supervisorpracticas.profesormateria.profesor.persona.pasaporte }}{% endif %}"/>
                                            </div>
                                        </div>
                                        <div class="row-fluid ">
{#                                            <div class="span3"></div>#}
                                            <div class="span6">
                                                <b>Teléfono convencional:</b><br>
                                                <input type="text" class="input input-xxlarge"  style="width: 100%;text-transform: uppercase" id="telefonosupervisor" name="telefonosupervisor" disabled value="{{ solicitudpractica.supervisorpracticas.profesormateria.profesor.persona.telefonoconv }}"/>
                                            </div>
                                            <div class="span6">
                                                <b>Teléfono celular:</b><br>
                                                <input type="text" class="input input-xxlarge"  style="width: 100%;text-transform: uppercase" id="celularsupervisor" name="celularsupervisor" disabled value="{{ solicitudpractica.supervisorpracticas.profesormateria.profesor.persona.telefono }}"/>
                                            </div>
                                        </div>
                                        <div class="row-fluid ">
{#                                            <div class="span3"></div>#}
                                            <div class="span12">
                                                <b>Correo electrónico:</b><br>
                                                <input type="text" class="input input-xxlarge"  style="width: 100%" id="correosupervisor" name="correosupervisor" disabled value="{{ solicitudpractica.supervisorpracticas.profesormateria.profesor.persona.emailinst }}"/>
                                            </div>
                                        </div>
                                        <div class="row-fluid ">
{#                                            <div class="span3"></div>#}
                                            <div class="span6">
                                                <b>Tipo de supervisión:</b><br>
                                                <select  id='tiposupervision'  name='tiposupervision' class="input-large bigger" style="width: 100%" disabled>
                                                    <option value='0'>-----</option>
                                                    {% for t in tipo_supervision %}
                                                        <option value="{{ t.id }}"> {{ t.nombre }}  </option>
                                                    {% endfor %}
                                                </select>
                                                <p id="ptiposupervision" style="color: red"></p>
                                            </div>
                                        </div>
                                        <div class="row-fluid ">
                                            <h3>EVALUACIÓN DEL ESTUDIANTE DURANTE EL DESARROLLO DE SU PROCESO DE PRACTICAS LABORALES</h3><br>
                                            <h4 style="text-align: left">Indique con una “X” la evaluación que usted considere adecuada, en el momento de la supervisión durante la Práctica Pre-profesional laboral, teniendo en cuenta el cumplimiento de los siguientes indicadores:  </h4><br>
                                            <div class="12"></div>
                                            <table  class='table' cellpadding="0" cellspacing="0" id="tab_logic">
                                                <thead>
                                                    <tr >
                                                        <th ><h4 style="text-align: center">INDICADORES:</h4> </th>
                                                        <th> <h4>Cumple</h4></th>
                                                        <th><h4>No cumple</h4></th>
                                                    </tr>
                                                </thead>
                                                <tbody >
                                                        {% for i in indicadoracademico %}
                                                            <tr >
                                                                <th > {{ i.descripcion }}</th>
                                                                <th style="text-align: center"><a ><input type="checkbox" id="cumpl{{ i.id }}" alt="{{ i.id }}" class="cumple_evaca" /></a></th>
                                                                <th style="text-align: center"><a ><input type="checkbox" id="nocumpl{{ i.id }}" alt="{{ i.id }}" class="nocumple_evaca"  /> </a></th>
                                                            </tr>

                                                        {% endfor %}
                                                </tbody>
                                                <tfoot id="tfoot_evacade">
                                                </tfoot>
                                                <tfoot id="tfoot_evacade2">
                                                </tfoot>
                                            </table>
                                            <div class="row-fluid">
                                                <hr><b style="font-size: 1.5em">EJECUCION DE LA PRACTICA</b><br/>
                                                <textarea name="ejecucion_practica" id="ejecucion_practica" cols="60" rows="5" style="float: left;width: 99%" {% if solicitudpractica.observacionevalaca %} readonly {% endif %}>{% if solicitudpractica.observacionevalaca %}{{ solicitudpractica.observacionevalaca }}{% endif %}</textarea>
                                            </div>
                                            <div class="row-fluid">
                                                <hr><b style="font-size: 1.5em">OBSERVACIONES</b><br/>
                                                <textarea name="obserevainstit" id="observaciones_supervision" cols="60" rows="5" style="float: left;width: 99%" {% if solicitudpractica.observacionevalaca %} readonly {% endif %}>{% if solicitudpractica.observacionevalaca %}{{ solicitudpractica.observacionevalaca }}{% endif %}</textarea>
                                            </div>
                                            {% if not solicitudpractica.evalsuperinstit and es_supervisor%}
                                                <div class="row-fluid">
                                                    <a style="cursor: pointer;float: right" class="btn btn-success btn-guardar_supervisiondocente" id="btn-guardar_supervision" edit_supervision='0'> <b> Guardar</b></a>
                                                    <a style="cursor: pointer;float: right" class="btn btn-success btn-guardar_supervisiondocente" id="btn-guardar_supervision2" edit_supervision='1'> <b> Guardar</b></a>
                                                    <a style="cursor: pointer;float: right" class="btn btn-success btn-editar_supervisiondocente"> <b> Editar</b></a>
                                                </div>
                                            {% endif %}
                                        </div>
                                    {% endif %}
                                    </div>

                                </div>
                            </div>
{#                        </div>#}
{#                    </div>#}
                </div>

            </div>
        </div>

    </div>

{% endblock %}
{% block moreblock %}
    <div class="modal fade static" id="aprobapanel" style="width: 20px;">
            <div class="modal-header">
                <h4 id="paneltitleaprob">APROBACION DE SOLICITUD</h4>
            </div>
            <div class="modal-body">
                <div id="panelbody">
                    <div class="row-fluid ">
                        <div class="span12">
                            <p id="etiquetap"></p>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span12">
                            <b>Aprobado?:</b>
                            <input type="checkbox" style="width: 25%;height: 2em" class="input input-xxlarge convenioemcla" id="aprobado" alt="0" name="aprobado"/>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span12">
                            <b>Observación:</b><br>
                            <textarea type='text' id="observacion" name="observacion" placeholder="Agregue las observaciones que sean pertinentes"
                                      style="width:90%;text-transform: uppercase" rows="4" cols="50" ></textarea>
                        </div>
                    </div>

                    <br/>
                </div>
            </div>
            <div class="modal-footer">
                <a style="cursor: pointer" class="btn btn-success btn-guardarapro"> <b> Guardar</b></a>
                <a style="cursor: pointer" class="btn btn-info btn-cerrarpanelapro">Salir</a>

            </div>
    </div>
    <div class="modal fade static" id="correopanel" style="width: 20px;">
            <div class="modal-header">
                <h4 id="paneltitlecorr">ENVIAR CORREO A ESTUDIANTE</h4>
            </div>
            <div class="modal-body">
                <div id="panelbody">
                    <div class="row-fluid ">
                        <div class="span12">
                            <p id="etiquetapcor"></p>
                        </div>
                    </div>
                    <div class="row-fluid ">
                        <div class="span12">
                            <b>Contenido:</b><br>
                            <textarea type='text'   id="contenidocorr" name="contenidocorr" placeholder="Escriba el contenido del correo"
                                      style="width:90%;text-transform: uppercase" rows="4" cols="50" ></textarea>
                        </div>
                    </div>

                    <br/>
                </div>
            </div>
            <div class="modal-footer">
                <a style="cursor: pointer" class="btn btn-success btn-envcorr"> <b> Enviar</b></a>
                <a style="cursor: pointer" class="btn btn-info btn-cerrarpanelcorr">Salir</a>

            </div>
    </div>
    <div class="modal fade static" id="copifichapanel" style="width: 20px;">
        <div class="modal-header">
            <h4 id="paneltitlecorr">COPIAR FICHA RECEPTORA</h4>
        </div>
        <div class="modal-body">
            <div id="panelbody">
                <div class="row-fluid ">
                    <div class="span12">
                        <div class="row-fluid">
                            <div class="span3">
                                <table class='table table-bordered table-striped' cellpadding="0" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th colspan="4"  class="alert alert-success"><b >EMPRESA PROCESO DE SELECCION</b></th>
                                        </tr>
                                    </thead>
                                    <thead>
                                        <tr>
                                            <th>Empresa</th>
                                            <th>Cantidad</th>
                                            <th>Aceptados</th>
                                            <th>Solic. Envi.</th>
                                        </tr>
                                    </thead>
                                    {% with procesoselec=solicitudpractica.fichaentidadrec.existe_procesoselec %}
                                        <tbody >
                                            <tr >
                                                {% if procesoselec %}
                                                    <td >{{ procesoselec.0.empresa }}</td>
                                                    <td style="text-align: center"><input type="number" class="input input-small" id="cantprocesficha" procesoaceptad="{{ procesoselec.1 }}" value="{{ procesoselec.0.cantidad }}" /> </td>
                                                    <td style="text-align: center">{{ procesoselec.1 }}</td>
                                                    <td style="text-align: center">{{ procesoselec.2 }}</td>
                                                {% else %}
                                                    <td >{{ solicitudpractica.fichaentidadrec.convenio }}</td>
                                                    <td style="text-align: center"><input type="number" class="input input-small" id="cantprocesficha"  procesoaceptad="0" value="0" /></td>
                                                    <td style="text-align: center">0</td>
                                                    <td style="text-align: center">0</td>
                                                {% endif %}
                                            </tr>
                                        </tbody>
                                    {% endwith %}
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-body">
            <div id="panelbody">
                <div class="row-fluid ">
                    <div class="span12">
                        <p id="etiquetapcopfich"></p>
                    </div>
                </div>
                <div class="row-fluid ">
                    <div class="span12">
                        <div class="row-fluid">
                            <div class="span6">
                                <b>Carrera:</b>
                            </div>
                            <div class="span5" >
                                <b style="float: right">Filtrar</b> <input id="filtcarrera" type="checkbox" style="width: 8%;float: right"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <select  id='carrerafich'  name='carrerafich' class="input-large bigger" style="width: 98%" disabled>
                                <option value='0'>-----</option>
                                {% for c in carreras %}
                                    <option value="{{ c.id }}" > {{ c }}  </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row-fluid ">
                    <div class="span12">
                        <div class="row-fluid">
                            <div class="span6">
                                <b>Nivel:</b>
                            </div>
                            <div class="span5" >
                                <b style="float: right">Filtrar</b> <input type="checkbox"  id="filtnivel" style="width: 8%;float: right"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <select  id='nivelfich'  name='nivelfich' class="input-large bigger" style="width: 98%" disabled>
                                <option value='0'>-----</option>
                                {% for n in niveles %}
                                    <option value="{{ n.id }}" > {{ n.nivelmalla }} - {{ n.paralelo }} - {{ n.carrera }}    </option>
                                {% endfor %}
                            </select>
                        </div>
{#                        <div class="row-fluid">#}
{#                            <div class="span6">#}
{#                                <b>Con convenio:</b> <input type="checkbox" id="convenficha" style="width: 8%;height: 3em;"/>#}
{#                            </div>#}
{#                            <div class="span6" >#}
{#                                <b>Sin convenio:</b> <input type="checkbox" id="sinconvenficha" style="width: 8%;height: 3em;"/>#}
{#                            </div>#}
{#                        </div>#}

                        <div class="row-fluid ">
                            <div class="span6">
                                <div class="row-fluid"><hr>
                                    <a class="btn btn-success" id="busqueestudiant"><i class="icon-search"></i> Buscar Estudiantes </a>
                                </div>
                            </div>
                            <div class="span6">
                                <div class="row-fluid"><hr>
                                    <a class="btn btn-danger" id="borrarestudiant" style="float: right;display: none"><i class="icon-remove"></i> Limpiar </a>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <table  class='table' cellpadding="0" cellspacing="0" id="tab_logic">
                                <thead>
                                    <tr >
                                        <th id="cabecfichrecep">Seleccionar &nbsp;&nbsp;&nbsp; Estudiantes &nbsp;&nbsp;&nbsp; Fecha</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodybusestudfich">

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a style="cursor: pointer" class="btn btn-warning btn-copificha" opc="enviar"> <b> Copiar y Enviar Solicitud </b></a>
{#            <a style="cursor: pointer" class="btn btn-success btn-copificha"  opc="noenviar"> <b> Copiar </b></a>#}
            <a style="cursor: pointer" class="btn btn-info btn-cerrarcopificha">Salir</a>
        </div>
    </div>
    <div class="modal fade static" id="finalizapanel" style="width: 20px;">
        <div class="modal-header">
            <h4 id="paneltitleenvi">Finalizar Práctica</h4>
            <h3 id="panelerror" ></h3>
        </div>
        <div class="modal-body">
            <div class="row-fluid ">
                <b>HORAS LABORADAS:</b>
                <input type="text"  class="input input-small" style="font-size: 1.2em;color: #333333" id="horalbmod" alt="0" name="horalbmod" readonly/>
            </div>
            <div class="row-fluid ">
                <b>APROBADO:</b>
                <input type="checkbox" style="width: 12%;height: 2em" class="input input-xxlarge" id="aproprac" alt="0" name="aproprac"/>
            </div>

            <div class="row-fluid">
                <b>RECHAZADO:</b>
                <input type="checkbox" style="width: 10%;height: 2em" class="input input-xxlarge" id="rechapract" alt="0" name="rechapract"/>
            </div><hr>

            <div class="row-fluid"  id="divnivelfinal" style="display: none">
                <b id="bprac1chek"> Práctica 1: </b>
                <input type="checkbox" class="input input-xxlarge pracfinalicheck" num="1"  style="width: 10%;height: 2em;text-align: center" id="iprac1chek" name="iprac1chek" />
                <input type="text" class="input input-small"  id="nprac1chek" name="nprac1chek" style="margin-top: 15px;display: none" readonly/>
                <br/>
                <b id="bprac2chek"> Práctica 2: </b>
                <input type="checkbox" class="input input-xxlarge pracfinalicheck" num="2"   style="width: 10%;height: 2em;text-align: center" id="iprac2chek" name="iprac2chek" />
                <input type="text" class="input input-small"  id="nprac2chek" name="nprac2chek" style="margin-top: 15px;display: none" readonly/>
                <br/>
                <b id="bprac3chek"> Práctica 3: </b>
                <input type="checkbox" class="input input-xxlarge pracfinalicheck" num="3"   style="width: 10%;height: 2em;text-align: center" id="iprac3chek" name="iprac3chek" />
                <input type="text" class="input input-small"  id="nprac3chek" name="nprac3chek" style="margin-top: 15px;display: none" readonly/>
                <br/>
            </div>
            <div class="row-fluid" id="divobserfinal" style="display: none">
                <b>OBSERVACIÓN: </b><br/>
                <textarea type='text' id='obserfinal' style="width:90%;text-transform: uppercase" rows="10" cols="50" > </textarea>
            </div>
            <p id="etiquetapfinal" ></p>

        </div>
        <div class="modal-footer">
            <a style="cursor: pointer" class="btn btn-success btn-guardarfinal"> <b> Finalizar </b></a>
            <a style="cursor: pointer" class="btn btn-info btn-cerrarfinali">Salir</a>

        </div>
    </div>


    <div class="modal fade static" id="paramreportepanel">
        <div class="modal-header " style="word-wrap: break-word">
            <h4  id='paneltitle2' >Ingrese el Supervisor y Coordinador de la práctica</h4><br>
            <h5 id="errorgenerreport"></h5>
        </div>
        <div class="modal-body" >
{#            <b> Supervisor:  </b>#}
{#            <input type="text" id="superrep" class="searchinput input-xxlarge search-query" autocomplete="off"/>#}
            <b> Coordinador:  </b>
            <input type="text" id="coordinrep" class="searchinput input-xxlarge search-query" autocomplete="off"/>
        </div>

        <div class="modal-footer">
            <a style="cursor: pointer" class="btn btn-success btn-cancelgenreport"> <b> Cancelar </b></a>
            <a style="cursor: pointer" class="btn btn-info btn-ejectreporte">Generar</a>

        </div>
    </div>

{% endblock %}